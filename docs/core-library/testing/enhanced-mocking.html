<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-library/testing/enhanced-mocking" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Enhanced Mock Testing System | Brobot</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jspinak.github.io/brobot/docs/core-library/testing/enhanced-mocking"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Enhanced Mock Testing System | Brobot"><meta data-rh="true" name="description" content="This section covers advanced mocking features for developers extending the Brobot framework or building complex testing scenarios."><meta data-rh="true" property="og:description" content="This section covers advanced mocking features for developers extending the Brobot framework or building complex testing scenarios."><link data-rh="true" rel="icon" href="/brobot/img/brobot-happy.ico"><link data-rh="true" rel="canonical" href="https://jspinak.github.io/brobot/docs/core-library/testing/enhanced-mocking"><link data-rh="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/core-library/testing/enhanced-mocking" hreflang="en"><link data-rh="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/core-library/testing/enhanced-mocking" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Enhanced Mock Testing System","item":"https://jspinak.github.io/brobot/docs/core-library/testing/enhanced-mocking"}]}</script><link rel="alternate" type="application/rss+xml" href="/brobot/blog/rss.xml" title="Brobot RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/brobot/blog/atom.xml" title="Brobot Atom Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6WY1S6ZWEY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6WY1S6ZWEY",{anonymize_ip:!0})</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="stylesheet" href="/brobot/assets/css/styles.1b22d91f.css">
<script src="/brobot/assets/js/runtime~main.c4b4e90e.js" defer="defer"></script>
<script src="/brobot/assets/js/main.886a9fd0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/brobot/"><div class="navbar__logo"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="Brobot Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="Brobot Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Brobot</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/brobot/docs/getting-started/introduction">Documentation</a><a href="https://jspinak.github.io/brobot/api/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Reference<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/brobot/visualAPI">The Visual API</a><a class="navbar__item navbar__link" href="/brobot/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/brobot/docs/core-library/testing/enhanced-mocking">Latest</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/brobot/docs/core-library/testing/enhanced-mocking">Latest</a></li><li><a class="dropdown__link" href="/brobot/docs/1.0.7/getting-started/introduction">1.0.7</a></li><li><a class="dropdown__link" href="/brobot/docs/1.0.6/introduction">1.0.6</a></li></ul></div><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/getting-started/introduction">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/no-code-automation/desktop-runner/runner-overview">No-Code Automation (Beta)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/brobot/docs/core-library/guides/finding-objects/configuration-note">Core Library (for Developers)</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/guides/finding-objects/configuration-note">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/core-library/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/architecture/actionresult-architecture">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/category/actionconfig-api">ActionConfig API</a><button aria-label="Expand sidebar category &#x27;ActionConfig API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/core-library/capture/modular-capture-system">Screen Capture</a><button aria-label="Collapse sidebar category &#x27;Screen Capture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/capture/capture-quick-reference">Capture Quick Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/capture/dpi-resolution-guide">DPI and Resolution Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/keyboard/special-keys-guide">Keyboard &amp; Typing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/brobot/docs/core-library/testing/test-logging-architecture">Advanced Testing</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/testing/test-logging-architecture">Test Logging Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/brobot/docs/core-library/testing/enhanced-mocking">Enhanced Mock Testing System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/testing/ci-cd-testing">CI/CD Testing Guide for Brobot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/testing/motion-detection-testing">Motion Detection Testing Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/category/migration-guides">Migration Guides</a><button aria-label="Expand sidebar category &#x27;Migration Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/advanced/ASPECTJ_USAGE_GUIDE">advanced</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/automation-runner">AutomationRunner - Graceful Failure Handling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/configuration/auto-configuration">configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/opencv-mock-system/architecture">opencv-mock-system</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/tools/capture-methods-comparison">tools</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/testing/testing-intro">Testing Your Automation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/migration/frameworksettings-to-brobotproperties">migration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/category/theoretical-foundations">Theoretical Foundations</a><button aria-label="Expand sidebar category &#x27;Theoretical Foundations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/logging">Brobot Logging System</a><button aria-label="Expand sidebar category &#x27;Brobot Logging System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/brobot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Library (for Developers)</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Testing</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Enhanced Mock Testing System</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Latest</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Enhanced Mock Testing System</h1></header>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>For Framework Developers</div><div class="admonitionContent_BuS1"><p>This section covers <strong>advanced mocking features</strong> for developers extending the Brobot framework or building complex testing scenarios.</p><p>For standard automation testing, see the <a href="/brobot/docs/testing/testing-intro">main Testing documentation</a>.</p></div></div>
<p>Brobot&#x27;s enhanced mock testing system provides sophisticated scenario-based testing capabilities with advanced failure patterns, verification, and structured test data management.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>The enhanced mock system extends the basic mocking capabilities with:</p>
<ul>
<li><strong>Centralized mock mode management</strong> via <code>MockModeManager</code></li>
<li><strong>Scenario-based configurations</strong> for complex test conditions</li>
<li><strong>Advanced failure patterns</strong> with temporal and cascading behaviors</li>
<li><strong>Behavioral verification</strong> beyond simple operation counting</li>
<li><strong>Structured test data builders</strong> with variations and versioning</li>
<li><strong>Performance optimization</strong> for large-scale test execution</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="centralized-mock-mode-management">Centralized Mock Mode Management<a href="#centralized-mock-mode-management" class="hash-link" aria-label="Direct link to Centralized Mock Mode Management" title="Direct link to Centralized Mock Mode Management">​</a></h3>
<p>Brobot now provides the <code>MockModeManager</code> class as a single source of truth for mock mode configuration:</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Clean Test Configuration</div><div class="admonitionContent_BuS1"><p>For Spring-based tests, see the <a href="/brobot/docs/core-library/testing/test-logging-architecture">Test Logging Architecture</a> which provides factory-based configuration with clean dependencies.</p></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Note: BrobotProperties must be injected as a dependency</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private BrobotProperties brobotProperties;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.config.MockModeManager;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.test.logging.TestLoggerFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Enable mock mode across all components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockModeManager.setMockMode(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Check if mock mode is active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (brobotProperties.getCore().isMock()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Execute mock-specific logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Debug mock mode state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockModeManager.logMockModeState();</span><br></span></code></pre></div></div>
<p>This ensures consistency across:</p>
<ul>
<li>System properties</li>
<li>ExecutionEnvironment</li>
<li>FrameworkSettings</li>
<li>All other mock-aware components</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mock-scenario-configuration">Mock Scenario Configuration<a href="#mock-scenario-configuration" class="hash-link" aria-label="Direct link to Mock Scenario Configuration" title="Direct link to Mock Scenario Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-scenario-setup">Basic Scenario Setup<a href="#basic-scenario-setup" class="hash-link" aria-label="Direct link to Basic Scenario Setup" title="Direct link to Basic Scenario Setup">​</a></h3>
<p>All test classes should extend <code>BrobotTestBase</code> for automatic mock mode configuration:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.test.BrobotTestBase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyScenarioTest extends BrobotTestBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void testLoginUnderNetworkIssues() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockScenarioConfig scenario = MockScenarioConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .scenarioName(&quot;login_network_issues&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .description(&quot;Simulate intermittent network connectivity during login&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .stateAppearanceProbability(&quot;LOGIN_STATE&quot;, 0.8)  // 80% appear rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .stateAppearanceProbability(&quot;DASHBOARD&quot;, 0.9)    // 90% appear rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Apply scenario and run test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockScenarioManager.activateScenario(scenario);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Your test logic here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = actions.find(loginButton);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-failure-patterns">Advanced Failure Patterns<a href="#advanced-failure-patterns" class="hash-link" aria-label="Direct link to Advanced Failure Patterns" title="Direct link to Advanced Failure Patterns">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testRetryBehaviorWithCascadingFailures() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Configure cascading failures that worsen over time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FailurePattern cascadingFailure = FailurePattern.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .baseProbability(0.3)              // Start with 30% failure rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .cascading(true)                   // Enable cascading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .cascadeMultiplier(1.5)            // Each failure increases probability by 50%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maxConsecutiveFailures(3)         // Force success after 3 failures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .recoveryDelay(Duration.ofSeconds(2))  // 2-second recovery period</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .failureMessage(&quot;Network timeout&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockScenarioConfig scenario = MockScenarioConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .scenarioName(&quot;cascading_network_failures&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .actionFailurePattern(ActionType.FIND, cascadingFailure)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maxDuration(Duration.ofMinutes(5))  // Scenario timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockScenarioManager.activateScenario(scenario);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Test retry logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int attempt = 1; attempt &lt;= 5; attempt++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Find with pause before next retry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PatternFindOptions findWithPause = new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setPauseAfterEnd(0.5)  // 500ms pause if not found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionResult result = actions.perform(findWithPause, targetElement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (result.isSuccess()) break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="temporal-conditions">Temporal Conditions<a href="#temporal-conditions" class="hash-link" aria-label="Direct link to Temporal Conditions" title="Direct link to Temporal Conditions">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testPerformanceUnderLoad() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TemporalConditions slowNetwork = TemporalConditions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .baseDelay(Duration.ofMillis(500))        // Base 500ms delay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maximumDelay(Duration.ofSeconds(3))      // Cap at 3 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .delayProgression(Duration.ofMillis(100)) // Increase by 100ms each time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .randomVariation(0.2)                     // ±20% random variation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .activeTimeRange(LocalTime.of(9, 0), LocalTime.of(17, 0)) // Business hours</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockScenarioConfig scenario = MockScenarioConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .scenarioName(&quot;performance_degradation&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .temporalCondition(&quot;slow_network&quot;, slowNetwork)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockScenarioManager.activateScenario(scenario);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long startTime = System.currentTimeMillis();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = actions.find(targetElement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    long duration = System.currentTimeMillis() - startTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(&quot;Action should take longer under load&quot;, duration &gt;= 500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="behavioral-verification">Behavioral Verification<a href="#behavioral-verification" class="hash-link" aria-label="Direct link to Behavioral Verification" title="Direct link to Behavioral Verification">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-transition-verification">State Transition Verification<a href="#state-transition-verification" class="hash-link" aria-label="Direct link to State Transition Verification" title="Direct link to State Transition Verification">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testLoginFlowTransitionSequence() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Set up verification for expected state transitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StateTransitionVerification verification = mockBehaviorVerifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expectTransitionSequence(&quot;login_flow&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .fromState(&quot;INITIAL&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .toState(&quot;LOGIN_PAGE&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maxDuration(Duration.ofSeconds(2))  // Transition should be fast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .fromState(&quot;LOGIN_PAGE&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .toState(&quot;AUTHENTICATING&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .minDuration(Duration.ofMillis(100)) // Should take some time to authenticate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maxDuration(Duration.ofSeconds(5))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .fromState(&quot;AUTHENTICATING&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .toState(&quot;DASHBOARD&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withinTime(Duration.ofSeconds(10))  // Overall sequence timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .verify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Execute the login flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    performLoginSequence();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Verify the transitions occurred as expected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(VerificationResult.PASSED, verification.getResult());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(&quot;No transition errors&quot;, verification.getErrors().isEmpty());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="action-pattern-verification">Action Pattern Verification<a href="#action-pattern-verification" class="hash-link" aria-label="Direct link to Action Pattern Verification" title="Direct link to Action Pattern Verification">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testRetryPatternCompliance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Verify that find operations retry with proper backoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionPatternVerification retryVerification = mockBehaviorVerifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expectActionPattern(&quot;find_retry_pattern&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .action(ActionType.FIND)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .maxAttempts(3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withBackoff(Duration.ofMillis(500))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expectedSuccessRate(0.8)  // 80% should eventually succeed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .within(Duration.ofSeconds(10))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .verify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Execute actions that may need retries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result1 = actions.find(intermittentElement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result2 = actions.find(intermittentElement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result3 = actions.find(intermittentElement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Verify retry behavior</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(VerificationResult.PASSED, retryVerification.getResult());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(&quot;Retry timing should be correct&quot;, retryVerification.getErrors().isEmpty());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="structured-test-data-builder">Structured Test Data Builder<a href="#structured-test-data-builder" class="hash-link" aria-label="Direct link to Structured Test Data Builder" title="Direct link to Structured Test Data Builder">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-test-scenarios">Creating Test Scenarios<a href="#creating-test-scenarios" class="hash-link" aria-label="Direct link to Creating Test Scenarios" title="Direct link to Creating Test Scenarios">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testWithStructuredData() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TestScenario loginScenario = testDataBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .scenario(&quot;comprehensive_login_test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withDescription(&quot;Complete login flow with variations&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withVersion(&quot;1.1.0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withBaselineData()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withStateImage(&quot;login_button&quot;, &quot;login_btn.png&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withStateImage(&quot;username_field&quot;, &quot;username_input.png&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withStateString(&quot;welcome_text&quot;, &quot;Welcome back!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withRegion(&quot;login_form&quot;, new Region(300, 200, 400, 300))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withTag(&quot;authentication&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withTag(&quot;critical_path&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Use the structured scenario in your test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StateImage loginButton = loginScenario.getStateImages().get(&quot;login_button&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Region formArea = loginScenario.getRegions().get(&quot;login_form&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = actions.find(loginButton).searchRegions(formArea);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-variations">Test Variations<a href="#test-variations" class="hash-link" aria-label="Direct link to Test Variations" title="Direct link to Test Variations">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testMobileLayoutVariation() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TestScenario baseScenario = testDataBuilder.loginScenario().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Create mobile variation with adjusted similarity thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TestScenario mobileScenario = baseScenario.withVariation(&quot;small_screen&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Mobile scenario automatically has:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // - Reduced similarity thresholds for scaled elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // - Adjusted regions for smaller screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // - Modified timing expectations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StateImage mobileLoginButton = mobileScenario.getStateImages().get(&quot;login_button&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(&quot;Mobile button has lower similarity threshold&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               mobileLoginButton.getSimilarity() &lt; 0.8);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = actions.find(mobileLoginButton);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-variations">Custom Variations<a href="#custom-variations" class="hash-link" aria-label="Direct link to Custom Variations" title="Direct link to Custom Variations">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testHighContrastVariation() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TestScenario scenario = testDataBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .scenario(&quot;high_contrast_test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withStateImage(&quot;button&quot;, &quot;normal_button.png&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withVariation(&quot;high_contrast&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withDescription(&quot;High contrast accessibility mode&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withTransformation(&quot;reduce_similarity&quot;, (name, obj) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (obj instanceof StateImage) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return ((StateImage) obj).toBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .similarity(Math.max(0.6, ((StateImage) obj).getSimilarity() - 0.15))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return obj;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .endVariation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TestScenario highContrastScenario = scenario.withVariation(&quot;high_contrast&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Test with high contrast variation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = actions.find(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        highContrastScenario.getStateImages().get(&quot;button&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="base-test-configuration">Base Test Configuration<a href="#base-test-configuration" class="hash-link" aria-label="Direct link to Base Test Configuration" title="Direct link to Base Test Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-brobottestbase">Using BrobotTestBase<a href="#using-brobottestbase" class="hash-link" aria-label="Direct link to Using BrobotTestBase" title="Direct link to Using BrobotTestBase">​</a></h3>
<p>All Brobot tests should extend <code>BrobotTestBase</code> to ensure proper mock mode configuration and consistent test behavior across different environments:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.test.BrobotTestBase;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.jupiter.api.Test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyBrobotTest extends BrobotTestBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void testMyFeature() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Your test code here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Mock mode is automatically enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="what-brobottestbase-provides">What BrobotTestBase Provides<a href="#what-brobottestbase-provides" class="hash-link" aria-label="Direct link to What BrobotTestBase Provides" title="Direct link to What BrobotTestBase Provides">​</a></h4>
<p><code>BrobotTestBase</code> automatically configures the following for all tests:</p>
<ol>
<li><strong>Mock Mode Activation</strong> - Sets <code>// Mock mode is now configured via application.properties: // brobot.core.mock=true</code> to prevent SikuliX headless exceptions</li>
<li><strong>Fast Mock Timings</strong> - Configures minimal delays for mock operations (0.01-0.04 seconds)</li>
<li><strong>Mouse Settings</strong> - Removes mouse pause delays for faster test execution</li>
<li><strong>Screenshot Paths</strong> - Sets up paths for mock screenshot operations</li>
<li><strong>Per-Test Reset</strong> - Ensures mock mode remains enabled between tests</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-benefits">Key Benefits<a href="#key-benefits" class="hash-link" aria-label="Direct link to Key Benefits" title="Direct link to Key Benefits">​</a></h4>
<ul>
<li><strong>CI/CD Compatibility</strong> - Tests run without requiring a display or GUI</li>
<li><strong>Consistent Behavior</strong> - All tests use the same mock configuration</li>
<li><strong>Fast Execution</strong> - Minimal mock delays speed up test suites</li>
<li><strong>Headless Support</strong> - Prevents AWTException and HeadlessException errors</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-test-setup">Customizing Test Setup<a href="#customizing-test-setup" class="hash-link" aria-label="Direct link to Customizing Test Setup" title="Direct link to Customizing Test Setup">​</a></h4>
<p>You can override <code>setupTest()</code> to add custom configuration:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">public class CustomTest extends BrobotTestBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @BeforeEach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setupTest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super.setupTest(); // Important: call parent setup first</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Add your custom setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        brobotProperties.getCore().isMock()TimeFindFirst = 0.05; // Custom timing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Other custom configuration...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-brobottestbase">When to Use BrobotTestBase<a href="#when-to-use-brobottestbase" class="hash-link" aria-label="Direct link to When to Use BrobotTestBase" title="Direct link to When to Use BrobotTestBase">​</a></h4>
<ul>
<li><strong>Always</strong> for unit tests that use Brobot APIs</li>
<li><strong>Always</strong> for integration tests in headless environments</li>
<li><strong>Optional</strong> for end-to-end tests that need real screen interaction (don&#x27;t extend BrobotTestBase)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-mock-infrastructure">Enhanced Mock Infrastructure<a href="#enhanced-mock-infrastructure" class="hash-link" aria-label="Direct link to Enhanced Mock Infrastructure" title="Direct link to Enhanced Mock Infrastructure">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grid-operations-in-mock-mode">Grid Operations in Mock Mode<a href="#grid-operations-in-mock-mode" class="hash-link" aria-label="Direct link to Grid Operations in Mock Mode" title="Direct link to Grid Operations in Mock Mode">​</a></h3>
<p>Brobot now provides full grid operation support in mock mode through the <code>MockGridConfig</code> class:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.testing.mock.grid.MockGridConfig;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testGridOperations() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Configure grid dimensions for testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockGridConfig.setDefaultGrid(3, 3); // 3x3 grid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Region region = new Region(0, 0, 300, 300);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Location location = new Location(150, 150); // Center</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Grid operations work seamlessly in mock mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional&lt;Integer&gt; gridNumber = RegionUtils.getGridNumber(region, location);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(gridNumber.isPresent());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(4, gridNumber.get()); // Center cell in 3x3 grid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Get specific grid region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Region gridRegion = region.getGridRegion(4);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(100, gridRegion.w());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(100, gridRegion.h());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mockgridconfig-features">MockGridConfig Features<a href="#mockgridconfig-features" class="hash-link" aria-label="Direct link to MockGridConfig Features" title="Direct link to MockGridConfig Features">​</a></h4>
<ul>
<li><strong>Configurable Dimensions</strong>: Set custom grid sizes with <code>setDefaultGrid(rows, cols)</code></li>
<li><strong>Thread-Safe</strong>: Safe for use in parallel test execution</li>
<li><strong>Fallback Calculations</strong>: When SikuliX is unavailable, uses native Brobot calculations</li>
<li><strong>Consistent Behavior</strong>: Same API in mock and real modes</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mockfind-intelligent-fallback-behavior">MockFind Intelligent Fallback Behavior<a href="#mockfind-intelligent-fallback-behavior" class="hash-link" aria-label="Direct link to MockFind Intelligent Fallback Behavior" title="Direct link to MockFind Intelligent Fallback Behavior">​</a></h3>
<p>The <code>MockFind</code> class provides intelligent fallback behavior to ensure robust testing even when match history is not configured:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-match-generation">Automatic Match Generation<a href="#automatic-match-generation" class="hash-link" aria-label="Direct link to Automatic Match Generation" title="Direct link to Automatic Match Generation">​</a></h4>
<p>When a pattern has no configured match history, MockFind automatically generates default successful matches:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testWithoutMatchHistory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Create pattern without any match history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Pattern pattern = new Pattern.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setName(&quot;TestPattern&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // MockFind will still return a match in mock mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockFind mockFind = context.getBean(MockFind.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Match&gt; matches = mockFind.getMatches(pattern);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertFalse(matches.isEmpty(), &quot;MockFind provides default match&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(&quot;TestPattern&quot;, matches.get(0).getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fallback-behavior-rules">Fallback Behavior Rules<a href="#fallback-behavior-rules" class="hash-link" aria-label="Direct link to Fallback Behavior Rules" title="Direct link to Fallback Behavior Rules">​</a></h4>
<p>MockFind follows these rules for consistent testing behavior:</p>
<ol>
<li><strong>Check for existing history</strong>: First checks if the pattern has any match history configured</li>
<li><strong>Generate default match if empty</strong>: If no history exists, generates a default successful match with:<!-- -->
<ul>
<li>Region: 100, 100, 50, 50 (reasonable default location and size)</li>
<li>Similarity score: 0.95 (high confidence match)</li>
<li>Name: Uses pattern name if available, otherwise &quot;MockMatch&quot;</li>
</ul>
</li>
<li><strong>Respect configured history</strong>: If history exists but has no matches for current state, returns empty list</li>
<li><strong>State-aware matching</strong>: When history exists, filters by active states</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-testing-without-extensive-setup">Example: Testing Without Extensive Setup<a href="#example-testing-without-extensive-setup" class="hash-link" aria-label="Direct link to Example: Testing Without Extensive Setup" title="Direct link to Example: Testing Without Extensive Setup">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testQuickMockSetup() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // No need to configure match history for simple tests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StateImage quickTestImage = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addPattern(new Pattern.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;QuickTestPattern&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ObjectCollection collection = new ObjectCollection.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withImages(quickTestImage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // MockFind will provide default matches</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = action.perform(new PatternFindOptions.Builder().build(), collection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isSuccess(), &quot;Mock mode works without match history setup&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-match-history-vs-fallback">When to Use Match History vs Fallback<a href="#when-to-use-match-history-vs-fallback" class="hash-link" aria-label="Direct link to When to Use Match History vs Fallback" title="Direct link to When to Use Match History vs Fallback">​</a></h4>
<ul>
<li>
<p><strong>Use configured match history</strong> when:</p>
<ul>
<li>Testing specific match locations or patterns</li>
<li>Simulating test scenarios with varying success rates</li>
<li>Testing state-specific behaviors</li>
</ul>
</li>
<li>
<p><strong>Rely on fallback behavior</strong> when:</p>
<ul>
<li>Running quick smoke tests</li>
<li>Testing flow logic rather than match specifics</li>
<li>Prototyping new test scenarios</li>
<li>Testing in CI/CD without complex setup</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-match-history-when-needed">Configuring Match History When Needed<a href="#configuring-match-history-when-needed" class="hash-link" aria-label="Direct link to Configuring Match History When Needed" title="Direct link to Configuring Match History When Needed">​</a></h4>
<p>For tests requiring specific match behavior, configure match history explicitly:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testWithSpecificMatchHistory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Pattern pattern = new Pattern.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setName(&quot;SpecificPattern&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Add specific match history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionRecord successfulFind = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setActionConfig(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setStrategy(PatternFindOptions.Strategy.FIRST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setActionSuccess(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setState(&quot;TestState&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setMatchList(Arrays.asList(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new Match.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setRegion(new Region(200, 150, 100, 50))  // Specific location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setSimScore(0.98)  // High confidence</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pattern.getMatchHistory().addSnapshot(successfulFind);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Test will use configured history instead of fallback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockFind mockFind = context.getBean(MockFind.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Match&gt; matches = mockFind.getMatches(pattern);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(200, matches.get(0).getRegion().x());  // Uses configured location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This intelligent fallback behavior ensures that:</p>
<ul>
<li>Tests can run successfully without extensive mock setup</li>
<li>Quick prototyping and testing is possible</li>
<li>Tests remain maintainable with minimal configuration</li>
<li>Configured history is always respected when present</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mock-scene-and-color-analysis">Mock Scene and Color Analysis<a href="#mock-scene-and-color-analysis" class="hash-link" aria-label="Direct link to Mock Scene and Color Analysis" title="Direct link to Mock Scene and Color Analysis">​</a></h3>
<p>The <code>MockSceneBuilder</code> provides comprehensive builders for creating test data for color analysis and scene processing:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.testing.mock.builders.MockSceneBuilder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testColorAnalysis() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Create a mock scene with initialized image data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Scene scene = MockSceneBuilder.createMockScene();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertNotNull(scene.getPattern());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertNotNull(scene.getPattern().getImage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Create scene analysis with multiple profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SceneAnalysis analysis = MockSceneBuilder.createMockSceneAnalysis(3);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(3, analysis.size());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Each profile has properly initialized color clusters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PixelProfiles profile = analysis.getPixelAnalysisCollection(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertNotNull(profile.getStateImage().getColorCluster());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Color operations work without real images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ColorClassifier classifier = new ColorClassifier();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mat indices = classifier.getImageIndices(analysis, ColorCluster.ColorSchemaName.BGR);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertNotNull(indices);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mockscenebuilder-methods">MockSceneBuilder Methods<a href="#mockscenebuilder-methods" class="hash-link" aria-label="Direct link to MockSceneBuilder Methods" title="Direct link to MockSceneBuilder Methods">​</a></h4>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>createMockScene()</code></td><td>Creates Scene with valid Pattern and Image</td></tr><tr><td><code>createMockPattern()</code></td><td>Creates Pattern with BGR Mat image</td></tr><tr><td><code>createMockSceneAnalysis(int)</code></td><td>Creates SceneAnalysis with specified number of profiles</td></tr><tr><td><code>createMockColorCluster()</code></td><td>Creates ColorCluster with BGR and HSV schemas</td></tr><tr><td><code>createMockColorSchema(ColorSchemaName)</code></td><td>Creates schema with proper statistics</td></tr><tr><td><code>sceneAnalysis()</code></td><td>Returns builder for complex SceneAnalysis configurations</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="builder-pattern-for-complex-scenarios">Builder Pattern for Complex Scenarios<a href="#builder-pattern-for-complex-scenarios" class="hash-link" aria-label="Direct link to Builder Pattern for Complex Scenarios" title="Direct link to Builder Pattern for Complex Scenarios">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testComplexSceneAnalysis() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Use builder for complex configurations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SceneAnalysis analysis = MockSceneBuilder.sceneAnalysis()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withScene(customScene)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withPixelProfile(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withPixelProfile(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withPixelProfile(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Analysis is fully initialized and ready for testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(3, analysis.getPixelAnalysisCollections().size());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-characteristics">Performance Characteristics<a href="#performance-characteristics" class="hash-link" aria-label="Direct link to Performance Characteristics" title="Direct link to Performance Characteristics">​</a></h3>
<p>Mock mode operations are significantly faster than real operations:</p>
<table><thead><tr><th>Operation</th><th>Mock Mode</th><th>Real Mode</th><th>Speedup</th></tr></thead><tbody><tr><td>Grid operations</td><td>~0.01s</td><td>0.5s</td><td>50x</td></tr><tr><td>Color analysis</td><td>~0.02s</td><td>1-2s</td><td>50-100x</td></tr><tr><td>Pattern matching</td><td>~0.01s</td><td>0.5-2s</td><td>50-200x</td></tr><tr><td>State transitions</td><td>~0.01s</td><td>0.2-1s</td><td>20-100x</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jackson-serialization-support">Jackson Serialization Support<a href="#jackson-serialization-support" class="hash-link" aria-label="Direct link to Jackson Serialization Support" title="Direct link to Jackson Serialization Support">​</a></h3>
<p>When creating test objects that need serialization, ensure proper Jackson annotations:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Builder(toBuilder = true, builderClassName = &quot;Builder&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonDeserialize(builder = MyTestData.Builder.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonIgnoreProperties(ignoreUnknown = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyTestData {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String field;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @JsonPOJOBuilder(withPrefix = &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @JsonIgnoreProperties(ignoreUnknown = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class Builder {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Lombok generates implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-testing-pitfalls-and-solutions">Common Testing Pitfalls and Solutions<a href="#common-testing-pitfalls-and-solutions" class="hash-link" aria-label="Direct link to Common Testing Pitfalls and Solutions" title="Direct link to Common Testing Pitfalls and Solutions">​</a></h3>
<table><thead><tr><th>Pitfall</th><th>Solution</th></tr></thead><tbody><tr><td>Tests fail in headless environments</td><td>Always extend <code>BrobotTestBase</code></td></tr><tr><td>SikuliX field mocking errors</td><td>Use real SikuliX objects or Brobot mocks</td></tr><tr><td>Grid operations return empty</td><td>Configure <code>MockGridConfig</code> dimensions</td></tr><tr><td>ColorClassifier NPEs</td><td>Use <code>MockSceneBuilder</code> for test data</td></tr><tr><td>Forget to call <code>super.setupTest()</code></td><td>Always call parent setup when overriding</td></tr><tr><td>Static mocks without cleanup</td><td>Use try-with-resources for static mocks</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-with-existing-tests">Integration with Existing Tests<a href="#integration-with-existing-tests" class="hash-link" aria-label="Direct link to Integration with Existing Tests" title="Direct link to Integration with Existing Tests">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-from-basic-mocks">Migrating from Basic Mocks<a href="#migrating-from-basic-mocks" class="hash-link" aria-label="Direct link to Migrating from Basic Mocks" title="Direct link to Migrating from Basic Mocks">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Old approach - basic mock status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void oldStyleTest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockStatus.setTimesToRun(10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionResult result = actions.find(element);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// New approach - scenario-based with verification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void newStyleTest() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MockScenarioConfig scenario = MockScenarioConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .scenarioName(&quot;repeated_find_test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockScenarioManager.activateScenario(scenario);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionPatternVerification verification = mockBehaviorVerifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expectActionPattern(&quot;find_pattern&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .action(ActionType.FIND)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expectedSuccessRate(1.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .verify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionResult result = actions.find(element);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertTrue(result.isSuccess());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(VerificationResult.PASSED, verification.getResult());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-suite-organization">Test Suite Organization<a href="#test-suite-organization" class="hash-link" aria-label="Direct link to Test Suite Organization" title="Direct link to Test Suite Organization">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@TestConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MockTestConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MockScenarioManager scenarioManager() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new MockScenarioManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public TestDataBuilder testDataBuilder() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new TestDataBuilder();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Pre-configured scenarios for reuse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Map&lt;String, MockScenarioConfig&gt; commonScenarios() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, MockScenarioConfig&gt; scenarios = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scenarios.put(&quot;network_issues&quot;, MockScenarioConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .scenarioName(&quot;network_issues&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .actionFailurePattern(ActionType.FIND, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                FailurePattern.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .baseProbability(0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .maxConsecutiveFailures(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        scenarios.put(&quot;slow_system&quot;, MockScenarioConfig.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .scenarioName(&quot;slow_system&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .temporalCondition(&quot;delay&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TemporalConditions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .baseDelay(Duration.ofMillis(200))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return scenarios;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-design">Scenario Design<a href="#scenario-design" class="hash-link" aria-label="Direct link to Scenario Design" title="Direct link to Scenario Design">​</a></h3>
<ol>
<li><strong>Keep scenarios focused</strong> - Each scenario should test one specific condition</li>
<li><strong>Use meaningful names</strong> - Scenario names should clearly indicate what they test</li>
<li><strong>Set appropriate timeouts</strong> - Prevent runaway tests with reasonable duration limits</li>
<li><strong>Document expected behaviors</strong> - Include descriptions of what each scenario validates</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="failure-pattern-design">Failure Pattern Design<a href="#failure-pattern-design" class="hash-link" aria-label="Direct link to Failure Pattern Design" title="Direct link to Failure Pattern Design">​</a></h3>
<ol>
<li><strong>Model realistic failures</strong> - Base patterns on actual system behavior</li>
<li><strong>Use progressive failures</strong> - Start with low probability and increase over time</li>
<li><strong>Include recovery periods</strong> - Allow systems to recover after failure sequences</li>
<li><strong>Set failure limits</strong> - Prevent infinite failure loops with max consecutive failures</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verification-strategy">Verification Strategy<a href="#verification-strategy" class="hash-link" aria-label="Direct link to Verification Strategy" title="Direct link to Verification Strategy">​</a></h3>
<ol>
<li><strong>Verify behavior, not just results</strong> - Check timing, sequences, and patterns</li>
<li><strong>Use multiple verification types</strong> - Combine state transitions with action patterns</li>
<li><strong>Include negative tests</strong> - Verify that unexpected behaviors are caught</li>
<li><strong>Clean up after tests</strong> - Reset verifiers and scenarios between tests</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-considerations">Performance Considerations<a href="#performance-considerations" class="hash-link" aria-label="Direct link to Performance Considerations" title="Direct link to Performance Considerations">​</a></h3>
<ol>
<li><strong>Use sampling for high-frequency actions</strong> - Reduce verification overhead</li>
<li><strong>Batch related verifications</strong> - Group similar checks together</li>
<li><strong>Clean up resources</strong> - Properly dispose of mock contexts and verifiers</li>
<li><strong>Monitor test execution time</strong> - Enhanced mocking should not significantly slow tests</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-reference">Configuration Reference<a href="#configuration-reference" class="hash-link" aria-label="Direct link to Configuration Reference" title="Direct link to Configuration Reference">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mockscenarioconfig-properties">MockScenarioConfig Properties<a href="#mockscenarioconfig-properties" class="hash-link" aria-label="Direct link to MockScenarioConfig Properties" title="Direct link to MockScenarioConfig Properties">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>scenarioName</code></td><td>String</td><td>Unique identifier for the scenario</td></tr><tr><td><code>description</code></td><td>String</td><td>Human-readable description</td></tr><tr><td><code>stateAppearanceProbabilities</code></td><td><code>Map&lt;String, Double&gt;</code></td><td>Per-state appearance rates (0.0-1.0)</td></tr><tr><td><code>actionFailurePatterns</code></td><td><code>Map&lt;Action, FailurePattern&gt;</code></td><td>Failure patterns by action type</td></tr><tr><td><code>temporalConditions</code></td><td><code>Map&lt;String, TemporalConditions&gt;</code></td><td>Time-based conditions</td></tr><tr><td><code>maxDuration</code></td><td>Duration</td><td>Maximum scenario runtime</td></tr><tr><td><code>cascadingFailures</code></td><td>boolean</td><td>Enable failure cascading</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="failurepattern-properties">FailurePattern Properties<a href="#failurepattern-properties" class="hash-link" aria-label="Direct link to FailurePattern Properties" title="Direct link to FailurePattern Properties">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>baseProbability</code></td><td>double</td><td>Base failure rate (0.0-1.0)</td></tr><tr><td><code>probabilityDecay</code></td><td>double</td><td>Reduction per failure occurrence</td></tr><tr><td><code>maxConsecutiveFailures</code></td><td>int</td><td>Max failures before forced success</td></tr><tr><td><code>cascading</code></td><td>boolean</td><td>Whether failures increase probability</td></tr><tr><td><code>recoveryDelay</code></td><td>Duration</td><td>Recovery time after failures</td></tr><tr><td><code>exceptionType</code></td><td><code>Class&lt;Exception&gt;</code></td><td>Type of exception to throw</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verification-configuration">Verification Configuration<a href="#verification-configuration" class="hash-link" aria-label="Direct link to Verification Configuration" title="Direct link to Verification Configuration">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>maxTotalTime</code></td><td>Duration</td><td>Overall sequence timeout</td></tr><tr><td><code>minDuration</code></td><td>Duration</td><td>Minimum step duration</td></tr><tr><td><code>maxDuration</code></td><td>Duration</td><td>Maximum step duration</td></tr><tr><td><code>optional</code></td><td>boolean</td><td>Whether step is optional</td></tr><tr><td><code>verificationWindow</code></td><td>Duration</td><td>Time window for pattern verification</td></tr></tbody></table>
<p>This enhanced mock testing system provides comprehensive tools for creating realistic, maintainable, and thorough test scenarios that closely mirror production conditions while enabling rapid iteration and debugging.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/testing/enhanced-mocking.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/brobot/docs/core-library/testing/test-logging-architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Test Logging Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/brobot/docs/core-library/testing/ci-cd-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CI/CD Testing Guide for Brobot</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#centralized-mock-mode-management" class="table-of-contents__link toc-highlight">Centralized Mock Mode Management</a></li></ul></li><li><a href="#mock-scenario-configuration" class="table-of-contents__link toc-highlight">Mock Scenario Configuration</a><ul><li><a href="#basic-scenario-setup" class="table-of-contents__link toc-highlight">Basic Scenario Setup</a></li><li><a href="#advanced-failure-patterns" class="table-of-contents__link toc-highlight">Advanced Failure Patterns</a></li><li><a href="#temporal-conditions" class="table-of-contents__link toc-highlight">Temporal Conditions</a></li></ul></li><li><a href="#behavioral-verification" class="table-of-contents__link toc-highlight">Behavioral Verification</a><ul><li><a href="#state-transition-verification" class="table-of-contents__link toc-highlight">State Transition Verification</a></li><li><a href="#action-pattern-verification" class="table-of-contents__link toc-highlight">Action Pattern Verification</a></li></ul></li><li><a href="#structured-test-data-builder" class="table-of-contents__link toc-highlight">Structured Test Data Builder</a><ul><li><a href="#creating-test-scenarios" class="table-of-contents__link toc-highlight">Creating Test Scenarios</a></li><li><a href="#test-variations" class="table-of-contents__link toc-highlight">Test Variations</a></li><li><a href="#custom-variations" class="table-of-contents__link toc-highlight">Custom Variations</a></li></ul></li><li><a href="#base-test-configuration" class="table-of-contents__link toc-highlight">Base Test Configuration</a><ul><li><a href="#using-brobottestbase" class="table-of-contents__link toc-highlight">Using BrobotTestBase</a></li></ul></li><li><a href="#enhanced-mock-infrastructure" class="table-of-contents__link toc-highlight">Enhanced Mock Infrastructure</a><ul><li><a href="#grid-operations-in-mock-mode" class="table-of-contents__link toc-highlight">Grid Operations in Mock Mode</a></li><li><a href="#mockfind-intelligent-fallback-behavior" class="table-of-contents__link toc-highlight">MockFind Intelligent Fallback Behavior</a></li><li><a href="#mock-scene-and-color-analysis" class="table-of-contents__link toc-highlight">Mock Scene and Color Analysis</a></li><li><a href="#performance-characteristics" class="table-of-contents__link toc-highlight">Performance Characteristics</a></li><li><a href="#jackson-serialization-support" class="table-of-contents__link toc-highlight">Jackson Serialization Support</a></li><li><a href="#common-testing-pitfalls-and-solutions" class="table-of-contents__link toc-highlight">Common Testing Pitfalls and Solutions</a></li></ul></li><li><a href="#integration-with-existing-tests" class="table-of-contents__link toc-highlight">Integration with Existing Tests</a><ul><li><a href="#migrating-from-basic-mocks" class="table-of-contents__link toc-highlight">Migrating from Basic Mocks</a></li><li><a href="#test-suite-organization" class="table-of-contents__link toc-highlight">Test Suite Organization</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a><ul><li><a href="#scenario-design" class="table-of-contents__link toc-highlight">Scenario Design</a></li><li><a href="#failure-pattern-design" class="table-of-contents__link toc-highlight">Failure Pattern Design</a></li><li><a href="#verification-strategy" class="table-of-contents__link toc-highlight">Verification Strategy</a></li><li><a href="#performance-considerations" class="table-of-contents__link toc-highlight">Performance Considerations</a></li></ul></li><li><a href="#configuration-reference" class="table-of-contents__link toc-highlight">Configuration Reference</a><ul><li><a href="#mockscenarioconfig-properties" class="table-of-contents__link toc-highlight">MockScenarioConfig Properties</a></li><li><a href="#failurepattern-properties" class="table-of-contents__link toc-highlight">FailurePattern Properties</a></li><li><a href="#verification-configuration" class="table-of-contents__link toc-highlight">Verification Configuration</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=aHnVQ8KmOVw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Introductory Video</a></li><li class="footer__item"><a class="footer__link-item" href="/brobot/docs/getting-started/introduction">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/brobot/visualAPI">The Visual API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/brobot/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgRljq-lHkMLrzRzpJC4HNw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://search.maven.org/artifact/io.github.jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Joshua Spinak · Free & Open Source</div></div></div></footer></div>
</body>
</html>