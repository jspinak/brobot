<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core-library/guides/dynamic-transitions" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Dynamic Transitions and Hidden States | Brobot</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jspinak.github.io/brobot/docs/core-library/guides/dynamic-transitions"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dynamic Transitions and Hidden States | Brobot"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/brobot/img/brobot-happy.ico"><link data-rh="true" rel="canonical" href="https://jspinak.github.io/brobot/docs/core-library/guides/dynamic-transitions"><link data-rh="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/core-library/guides/dynamic-transitions" hreflang="en"><link data-rh="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/core-library/guides/dynamic-transitions" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Dynamic Transitions and Hidden States","item":"https://jspinak.github.io/brobot/docs/core-library/guides/dynamic-transitions"}]}</script><link rel="alternate" type="application/rss+xml" href="/brobot/blog/rss.xml" title="Brobot RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/brobot/blog/atom.xml" title="Brobot Atom Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6WY1S6ZWEY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6WY1S6ZWEY",{anonymize_ip:!0})</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="stylesheet" href="/brobot/assets/css/styles.1b22d91f.css">
<script src="/brobot/assets/js/runtime~main.c4b4e90e.js" defer="defer"></script>
<script src="/brobot/assets/js/main.886a9fd0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/brobot/"><div class="navbar__logo"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="Brobot Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="Brobot Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Brobot</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/brobot/docs/getting-started/introduction">Documentation</a><a href="https://jspinak.github.io/brobot/api/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Reference<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/brobot/visualAPI">The Visual API</a><a class="navbar__item navbar__link" href="/brobot/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/brobot/docs/core-library/guides/dynamic-transitions">Latest</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/brobot/docs/core-library/guides/dynamic-transitions">Latest</a></li><li><a class="dropdown__link" href="/brobot/docs/1.0.7/core-library/guides/dynamic-transitions">1.0.7</a></li><li><a class="dropdown__link" href="/brobot/docs/1.0.6/introduction">1.0.6</a></li></ul></div><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/getting-started/introduction">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/no-code-automation/desktop-runner/runner-overview">No-Code Automation (Beta)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/brobot/docs/core-library/guides/finding-objects/configuration-note">Core Library (for Developers)</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/brobot/docs/core-library/guides/finding-objects/configuration-note">Guides</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/guides/finding-objects/configuration-note">Finding Objects</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/guides/labeling/labeling-intro">Labeling Images</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/processes-as-objects">Processes as Objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/brobot/docs/core-library/guides/dynamic-transitions">Dynamic Transitions and Hidden States</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/pathfinding-and-costs">Pathfinding and Path Costs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/screen-adaptive-regions">Region Building with Position Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/state-aware-scheduling">State-Aware Scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/advanced-illustration-system">Advanced Illustration System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/declarative-region-definition">Declarative Region Definition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/search-regions-and-fixed-locations">Search Regions and Fixed Locations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/annotations">Annotations API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/runtime-delegation-migration">Runtime Delegation Migration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/action-config-factory">ActionConfig Factory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/actionhistory-migration-plan">ActionHistory Migration Plan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/multi-state-transitions-guide">Multi-State Transitions Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/API_DOCUMENTATION_TEMPLATE">Brobot API Documentation Template</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/BUILDER_PERFORMANCE_GUIDE">Builder Pattern Performance Optimization Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/action-refactoring-migration">Action Refactoring Migration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/claude-automator-console-output">Claude Automator Expected Console Output</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/configuration-migration">Configuration Migration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/highlighting-feature">Image Highlighting Feature</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/migration-guide">Brobot ActionOptions to ActionConfig Migration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/migration-status-report">Migration Status Report</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/monitor-configuration">Multi-Monitor Configuration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/guides/persistence-user-guide">Persistence Module User Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/core-library/tutorials">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/architecture/actionresult-architecture">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/category/actionconfig-api">ActionConfig API</a><button aria-label="Expand sidebar category &#x27;ActionConfig API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/core-library/capture/modular-capture-system">Screen Capture</a><button aria-label="Collapse sidebar category &#x27;Screen Capture&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/capture/capture-quick-reference">Capture Quick Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/capture/dpi-resolution-guide">DPI and Resolution Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/keyboard/special-keys-guide">Keyboard &amp; Typing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/testing/test-logging-architecture">Advanced Testing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/brobot/docs/category/migration-guides">Migration Guides</a><button aria-label="Expand sidebar category &#x27;Migration Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/advanced/ASPECTJ_USAGE_GUIDE">advanced</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/brobot/docs/core-library/automation-runner">AutomationRunner - Graceful Failure Handling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/configuration/auto-configuration">configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/opencv-mock-system/architecture">opencv-mock-system</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/brobot/docs/core-library/tools/capture-methods-comparison">tools</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/testing/testing-intro">Testing Your Automation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/migration/frameworksettings-to-brobotproperties">migration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/category/theoretical-foundations">Theoretical Foundations</a><button aria-label="Expand sidebar category &#x27;Theoretical Foundations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/logging">Brobot Logging System</a><button aria-label="Expand sidebar category &#x27;Brobot Logging System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/brobot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Library (for Developers)</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Dynamic Transitions and Hidden States</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Latest</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dynamic Transitions and Hidden States</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>A common challenge in GUI automation is dealing with dynamic overlays like menus, dialogs, and pop-ups that can appear at any time and cover other UI elements. Brobot handles this elegantly through its <strong>Hidden States</strong> mechanism and <strong>Dynamic Transitions</strong> using special marker classes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-problem">The Problem<a href="#the-problem" class="hash-link" aria-label="Direct link to The Problem" title="Direct link to The Problem">​</a></h2>
<p>Consider a typical application with:</p>
<ul>
<li>A main window with various screens (Home, Settings, Profile, etc.)</li>
<li>A menu that can be opened from any screen</li>
<li>Dialogs that can appear over any state</li>
<li>Pop-ups that temporarily cover content</li>
</ul>
<p>When a menu opens over the Settings screen, the Settings state becomes temporarily inaccessible. When the menu is closed, you want to return to Settings. But what if the menu was opened from the Home screen instead? The same action that transitions from Menu to Settings would also transition from Menu to Home. If transitions were hard-coded, it would create ambiguity in the pathfinding algorithm.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-solution-hidden-states">The Solution: Hidden States<a href="#the-solution-hidden-states" class="hash-link" aria-label="Direct link to The Solution: Hidden States" title="Direct link to The Solution: Hidden States">​</a></h2>
<p>Brobot solves this with the Hidden States mechanism:</p>
<ol>
<li><strong>Automatic Registration</strong>: When a state opens and covers another, the covered state is automatically registered as &quot;hidden&quot;</li>
<li><strong>Dynamic Tracking</strong>: The framework maintains a stack of hidden states for each active state</li>
<li><strong>Smart Navigation</strong>: Special marker classes enable dynamic transitions back to hidden states</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="special-marker-classes">Special Marker Classes<a href="#special-marker-classes" class="hash-link" aria-label="Direct link to Special Marker Classes" title="Direct link to Special Marker Classes">​</a></h2>
<p>Brobot provides special marker classes for dynamic transitions:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-currently-implemented">✅ Currently Implemented<a href="#-currently-implemented" class="hash-link" aria-label="Direct link to ✅ Currently Implemented" title="Direct link to ✅ Currently Implemented">​</a></h3>
<ul>
<li><strong><code>PreviousState</code></strong>: Returns to the most recently hidden state (fully functional)</li>
<li><strong><code>CurrentState</code></strong>: Targets the currently active state for self-transitions (fully functional)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="️-future-consideration">⚠️ Future Consideration<a href="#️-future-consideration" class="hash-link" aria-label="Direct link to ⚠️ Future Consideration" title="Direct link to ⚠️ Future Consideration">​</a></h3>
<ul>
<li><strong><code>ExpectedState</code></strong>: Would navigate to an expected state determined at runtime (not yet implemented)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-each-special-state-type">Understanding Each Special State Type<a href="#understanding-each-special-state-type" class="hash-link" aria-label="Direct link to Understanding Each Special State Type" title="Direct link to Understanding Each Special State Type">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="previousstate---return-to-hidden-state">PreviousState - Return to Hidden State<a href="#previousstate---return-to-hidden-state" class="hash-link" aria-label="Direct link to PreviousState - Return to Hidden State" title="Direct link to PreviousState - Return to Hidden State">​</a></h3>
<p><strong>What it does</strong>: Returns to whatever state was covered by an overlay.</p>
<p><strong>Real-world examples</strong>:</p>
<ul>
<li>Closing a modal dialog returns to the page that opened it</li>
<li>Exiting fullscreen video returns to the article or gallery</li>
<li>Dismissing a popup menu returns to the underlying screen</li>
<li>Closing a lightbox returns to the product page or article</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = ModalDialog.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ModalDialogTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {PreviousState.class},  // Returns to whatever opened this modal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Close modal and return to previous state&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeModal() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(closeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>When to use PreviousState</strong>:</p>
<ul>
<li>Modal dialogs that can appear over any page</li>
<li>Popup menus and dropdowns</li>
<li>Lightboxes and image viewers</li>
<li>Fullscreen modes</li>
<li>Temporary overlays</li>
<li>Help tooltips</li>
<li>Quick-view product previews</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="currentstate---self-transitions">CurrentState - Self-Transitions<a href="#currentstate---self-transitions" class="hash-link" aria-label="Direct link to CurrentState - Self-Transitions" title="Direct link to CurrentState - Self-Transitions">​</a></h3>
<p><strong>What it does</strong>: Performs an action while staying in the same state. The UI might change slightly, but you remain conceptually in the same place. Also useful when transitioning between overlapping states where both remain active.</p>
<p><strong>Tutorial Example - Island Capture</strong>:
In the tutorial-basics example, the Island state overlays the World state. To capture multiple islands, instead of directly calling transition methods (which bypasses the state management system), use CurrentState:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = IslandState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IslandTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Better approach - using CurrentState for re-entry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},  // Re-enter Island state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Capture new island (re-enter Island from World)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean captureNewIsland() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Since both World and Island are active (Island overlays World),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // this transition from World back to Island to capture another island</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This properly uses the state management system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(worldState.getNextIsland()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Traditional approach - avoid this pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void getNewIsland() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This bypasses the state management system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fromWorld();  // Direct method call - not recommended</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Other Real-world examples</strong>:</p>
<ul>
<li>Pagination (loading more results)</li>
<li>Sorting or filtering lists</li>
<li>Refreshing data</li>
<li>Expanding/collapsing sections</li>
<li>Form validation errors</li>
<li>Toggling view modes</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = SearchResultsPage.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SearchResultsTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},  // Stay on search results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Load more results&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean loadMoreResults() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Clicking &quot;Load More&quot; adds results but stays on same page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(loadMoreButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Sort results by price&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean sortByPrice() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Sorting rearranges items but doesn&#x27;t leave the page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        action.click(sortDropdown);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(priceOption).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Refresh search results&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean refreshResults() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // F5 refreshes but stays on same page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.type(&quot;{F5}&quot;).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>When to use CurrentState</strong>:</p>
<ul>
<li>Actions that modify the current page without navigation</li>
<li>Data refresh operations</li>
<li>In-page interactions (sorting, filtering, pagination)</li>
<li>UI state changes (expand/collapse, show/hide)</li>
<li>Form submissions that stay on the same page (validation errors)</li>
<li>Re-entering an active state from another active state (overlapping states)</li>
<li>Game scenarios where capturing items doesn&#x27;t change the active state</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="expectedstate---runtime-determined-not-yet-implemented">ExpectedState - Runtime-Determined (Not Yet Implemented)<a href="#expectedstate---runtime-determined-not-yet-implemented" class="hash-link" aria-label="Direct link to ExpectedState - Runtime-Determined (Not Yet Implemented)" title="Direct link to ExpectedState - Runtime-Determined (Not Yet Implemented)">​</a></h3>
<p><strong>Concept</strong>: Would allow transitions where the target state is determined at runtime based on conditions like user preferences, roles, or application state.</p>
<p><strong>Current alternatives</strong>: Most &quot;expected state&quot; scenarios can be handled today using:</p>
<ol>
<li><strong>Multiple transitions with different path costs</strong>:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@OutgoingTransition(activate = {AdminDashboard.class}, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean loginAsAdmin() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (!user.isAdmin()) return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return performLogin();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@OutgoingTransition(activate = {UserHome.class}, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean loginAsUser() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (user.isAdmin()) return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return performLogin();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<ol start="2">
<li><strong>Conditional logic in transition methods</strong>:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@OutgoingTransition(activate = {HomePage.class}, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean navigateToHome() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The HomePage state can handle different user types internally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return action.click(homeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<ol start="3">
<li><strong>State detection after transition</strong>:</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Let the framework detect which state we ended up in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@OutgoingTransition(activate = {HomePage.class}, pathCost = 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean attemptNavigation() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    action.click(navigationButton);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Framework will verify actual state after transition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-unknownstate-not-a-special-marker">Understanding UnknownState (Not a Special Marker)<a href="#understanding-unknownstate-not-a-special-marker" class="hash-link" aria-label="Direct link to Understanding UnknownState (Not a Special Marker)" title="Direct link to Understanding UnknownState (Not a Special Marker)">​</a></h2>
<p><strong>Important</strong>: <code>UnknownState</code> is NOT a special marker class. It&#x27;s an actual state that exists in every Brobot project.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-unknownstate-works">How UnknownState Works<a href="#how-unknownstate-works" class="hash-link" aria-label="Direct link to How UnknownState Works" title="Direct link to How UnknownState Works">​</a></h3>
<ol>
<li><strong>You don&#x27;t navigate TO UnknownState</strong> - you end up there when state detection fails</li>
<li><strong>UnknownState has outgoing transitions</strong> - these are your recovery mechanisms</li>
<li><strong>It&#x27;s your safety net</strong> - ensures automation can always recover</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// CORRECT: UnknownState has outgoing transitions for recovery</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = UnknownState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UnknownStateTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {HomePage.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Recover to home&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean recoverToHome() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Try to get back to a known state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        action.type(&quot;{ESC}&quot;);  // Close any popups</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(homeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {LoginPage.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Recover to login if session expired&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean recoverToLogin() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Navigate to login page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.goToUrl(loginUrl).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// INCORRECT: Never transition TO UnknownState</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// @OutgoingTransition(activate = {UnknownState.class}) // ❌ DON&#x27;T DO THIS</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="complete-working-example-special-states">Complete Working Example: Special States<a href="#complete-working-example-special-states" class="hash-link" aria-label="Direct link to Complete Working Example: Special States" title="Direct link to Complete Working Example: Special States">​</a></h2>
<p>The following is a complete, tested example from the special-states-example project that demonstrates PreviousState and CurrentState in action. The full project is available at <code>examples/03-core-library/guides/dynamic-transitions/special-states-example/</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modal-dialog-state-with-previousstate">Modal Dialog State with PreviousState<a href="#modal-dialog-state-with-previousstate" class="hash-link" aria-label="Direct link to Modal Dialog State with PreviousState" title="Direct link to Modal Dialog State with PreviousState">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.specialstates.states;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.State;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.state.StateImage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.Getter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Modal dialog state that overlays the main page. This state hides whatever state was active before</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State(description = &quot;Modal dialog overlay&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ModalDialogState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage dialogTitle;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage confirmButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage cancelButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage closeButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ModalDialogState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Initializing ModalDialogState&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dialogTitle =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new StateImage.Builder().addPatterns(&quot;dialogTitle&quot;).setName(&quot;dialogTitle&quot;).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        confirmButton =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new StateImage.Builder().addPatterns(&quot;confirmBtn&quot;).setName(&quot;confirmButton&quot;).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cancelButton =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new StateImage.Builder().addPatterns(&quot;cancelBtn&quot;).setName(&quot;cancelButton&quot;).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        closeButton =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .addPatterns(&quot;closeBtn&quot;, &quot;xButton&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .setName(&quot;closeButton&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modal-dialog-transitions-using-previousstate">Modal Dialog Transitions Using PreviousState<a href="#modal-dialog-transitions-using-previousstate" class="hash-link" aria-label="Direct link to Modal Dialog Transitions Using PreviousState" title="Direct link to Modal Dialog Transitions Using PreviousState">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.specialstates.transitions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.example.specialstates.states.ModalDialogState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.action.Action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.IncomingTransition;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.OutgoingTransition;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.TransitionSet;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.state.special.PreviousState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.RequiredArgsConstructor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Transitions for the ModalDialog state. Uses PreviousState to return to whatever state was hidden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * by the modal.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = ModalDialogState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ModalDialogTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ModalDialogState modalDialogState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @IncomingTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean verifyArrival() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Verifying arrival at ModalDialog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In mock mode, always return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {PreviousState.class}, // Return to whatever state was hidden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            staysVisible = false, // Modal closes completely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Confirm and close modal, returning to previous state&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean confirmAndClose() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Confirming and closing modal - returning to PreviousState&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;This should return to whatever state was hidden (MainPage or SettingsPage)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In mock mode, just return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {PreviousState.class}, // Return to whatever state was hidden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            staysVisible = false, // Modal closes completely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Cancel and close modal, returning to previous state&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean cancelAndClose() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Cancelling and closing modal - returning to PreviousState&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;This should return to whatever state was hidden (MainPage or SettingsPage)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In mock mode, just return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {PreviousState.class}, // Return to whatever state was hidden</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            staysVisible = false, // Modal closes completely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Close modal with X button, returning to previous state&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeModal() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Closing modal with X button - returning to PreviousState&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;This should return to whatever state was hidden (MainPage or SettingsPage)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In mock mode, just return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="main-page-with-currentstate-self-transitions">Main Page with CurrentState Self-Transitions<a href="#main-page-with-currentstate-self-transitions" class="hash-link" aria-label="Direct link to Main Page with CurrentState Self-Transitions" title="Direct link to Main Page with CurrentState Self-Transitions">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.specialstates.transitions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.example.specialstates.states.MainPageState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.example.specialstates.states.ModalDialogState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import com.example.specialstates.states.SettingsPageState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.action.Action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.IncomingTransition;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.OutgoingTransition;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.annotations.TransitionSet;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.state.special.CurrentState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.RequiredArgsConstructor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/** Transitions for the MainPage state. Includes self-transitions using CurrentState. */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = MainPageState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MainPageTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final MainPageState mainPageState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @IncomingTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean verifyArrival() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Verifying arrival at MainPage&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In mock mode, always return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {ModalDialogState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            staysVisible = true, // MainPage stays visible behind modal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Open modal dialog over main page&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean openModal() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Opening modal dialog from MainPage&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // In mock mode, just return true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {SettingsPageState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Navigate to settings page&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean toSettings() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Navigating from MainPage to Settings&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {CurrentState.class}, // Self-transition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Refresh main page&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean refresh() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Refreshing MainPage (self-transition using CurrentState)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This demonstrates a self-transition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            activate = {CurrentState.class}, // Self-transition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pathCost = 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            description = &quot;Load next page of results&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean nextPage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Loading next page of results (self-transition using CurrentState)&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Another self-transition example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generic-data-grid-example-with-self-transitions">Generic Data Grid Example with Self-Transitions<a href="#generic-data-grid-example-with-self-transitions" class="hash-link" aria-label="Direct link to Generic Data Grid Example with Self-Transitions" title="Direct link to Generic Data Grid Example with Self-Transitions">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = DataGridState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DataGridTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final DataGridState grid;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},  // Stay in same state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Load next page of data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean nextPage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(grid.getNextPageButton()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Load previous page of data&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean previousPage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(grid.getPrevPageButton()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Sort by column&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean sortByColumn() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(grid.getColumnHeader()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        activate = {CurrentState.class},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pathCost = 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        description = &quot;Apply filter&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean applyFilter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        action.type(grid.getFilterInput(), filterText);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(grid.getApplyButton()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multi-level-overlays">Multi-Level Overlays<a href="#multi-level-overlays" class="hash-link" aria-label="Direct link to Multi-Level Overlays" title="Direct link to Multi-Level Overlays">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Settings can be covered by Menu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SettingsPage {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Settings page elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Menu can cover any page</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MenuOverlay {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Menu elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Help can cover the Menu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelpDialog {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Help dialog elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Transitions maintain the hidden state stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = HelpDialog.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelpDialogTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(activate = {PreviousState.class}, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeHelp() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Returns to Menu (which is covering Settings)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(closeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = MenuOverlay.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MenuTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(activate = {PreviousState.class}, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeMenu() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Returns to Settings (or whatever was covered)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(closeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="decision-guide">Decision Guide<a href="#decision-guide" class="hash-link" aria-label="Direct link to Decision Guide" title="Direct link to Decision Guide">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Which transition type should I use?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. Does the action change the page/screen?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   NO → Use CurrentState (self-transition)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   YES → Continue to #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Is this closing an overlay that covers other content?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   YES → Use PreviousState (return to hidden)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   NO → Continue to #3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Do I know at compile-time where this will go?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   YES → Use a regular state class (HomeState.class, etc.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   NO → Consider the alternatives mentioned for ExpectedState</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-use-previousstate-for-true-overlays">1. Use PreviousState for True Overlays<a href="#1-use-previousstate-for-true-overlays" class="hash-link" aria-label="Direct link to 1. Use PreviousState for True Overlays" title="Direct link to 1. Use PreviousState for True Overlays">​</a></h3>
<p>Dynamic transitions work best for UI elements that truly overlay others:</p>
<ul>
<li>Modal dialogs</li>
<li>Dropdown menus</li>
<li>Pop-up notifications</li>
<li>Sidebars that slide over content</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-use-currentstate-for-in-page-actions">2. Use CurrentState for In-Page Actions<a href="#2-use-currentstate-for-in-page-actions" class="hash-link" aria-label="Direct link to 2. Use CurrentState for In-Page Actions" title="Direct link to 2. Use CurrentState for In-Page Actions">​</a></h3>
<p>Self-transitions are perfect for actions that don&#x27;t leave the current context:</p>
<ul>
<li>Pagination</li>
<li>Sorting and filtering</li>
<li>Data refresh</li>
<li>UI toggles</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-provide-fallbacks">3. Provide Fallbacks<a href="#3-provide-fallbacks" class="hash-link" aria-label="Direct link to 3. Provide Fallbacks" title="Direct link to 3. Provide Fallbacks">​</a></h3>
<p>Always have a fallback plan if dynamic transitions might fail:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = MenuState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MenuTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(activate = {PreviousState.class}, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeToPrevious() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Primary: try to return to previous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(closeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(activate = {HomePage.class}, pathCost = 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeToHome() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Fallback: go to home if previous fails</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(homeButton).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-clear-visual-indicators">4. Clear Visual Indicators<a href="#4-clear-visual-indicators" class="hash-link" aria-label="Direct link to 4. Clear Visual Indicators" title="Direct link to 4. Clear Visual Indicators">​</a></h3>
<p>Ensure overlays have clear visual indicators for state detection:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DialogState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @StateImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private StateImage dialogHeader;  // Unique to this dialog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @StateImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private StateImage darkOverlay;   // Common overlay indicator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-handle-edge-cases">5. Handle Edge Cases<a href="#5-handle-edge-cases" class="hash-link" aria-label="Direct link to 5. Handle Edge Cases" title="Direct link to 5. Handle Edge Cases">​</a></h3>
<p>Consider edge cases in your transitions:</p>
<ul>
<li>What if the previous state no longer exists?</li>
<li>What if multiple overlays are stacked?</li>
<li>What if the application crashed and restarted?</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="framework-components">Framework Components<a href="#framework-components" class="hash-link" aria-label="Direct link to Framework Components" title="Direct link to Framework Components">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-marker-classes-1">Special Marker Classes<a href="#special-marker-classes-1" class="hash-link" aria-label="Direct link to Special Marker Classes" title="Direct link to Special Marker Classes">​</a></h3>
<p>Located in <code>io.github.jspinak.brobot.model.state.special</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// PreviousState.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public final class PreviousState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final Long ID = SpecialStateType.PREVIOUS.getId(); // -2L</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private PreviousState() {} // Cannot be instantiated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// CurrentState.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public final class CurrentState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final Long ID = SpecialStateType.CURRENT.getId(); // -3L</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private CurrentState() {} // Cannot be instantiated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ExpectedState.java (marker exists but not yet functional)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public final class ExpectedState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final Long ID = SpecialStateType.EXPECTED.getId(); // -4L</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ExpectedState() {} // Cannot be instantiated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transitionsetprocessor">TransitionSetProcessor<a href="#transitionsetprocessor" class="hash-link" aria-label="Direct link to TransitionSetProcessor" title="Direct link to TransitionSetProcessor">​</a></h3>
<p>The processor recognizes special marker classes and handles them appropriately:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TransitionSetProcessor {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Detects when to = PreviousState.class or CurrentState.class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Sets special state IDs instead of regular state names</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Enables dynamic resolution at runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sethiddenstates">SetHiddenStates<a href="#sethiddenstates" class="hash-link" aria-label="Direct link to SetHiddenStates" title="Direct link to SetHiddenStates">​</a></h3>
<p>Manages the registration and tracking of hidden states:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SetHiddenStates {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Automatically invoked when states change</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setHiddenStates(State coveringState, Set&lt;State&gt; coveredStates) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Registers which states are hidden by the covering state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="statememory">StateMemory<a href="#statememory" class="hash-link" aria-label="Direct link to StateMemory" title="Direct link to StateMemory">​</a></h3>
<p>Maintains the history of state transitions and hidden states:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StateMemory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Tracks the sequence of state activations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Used to determine the &quot;previous&quot; state for dynamic transitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hidden-state-not-found">Hidden State Not Found<a href="#hidden-state-not-found" class="hash-link" aria-label="Direct link to Hidden State Not Found" title="Direct link to Hidden State Not Found">​</a></h3>
<p>If a dynamic transition fails to find the previous state:</p>
<ol>
<li>Check that states are properly detecting overlays</li>
<li>Verify StateImage definitions don&#x27;t overlap incorrectly</li>
<li>Ensure the covering state is properly registered</li>
<li>Check logs for state transition history</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="self-transitions-not-working">Self-Transitions Not Working<a href="#self-transitions-not-working" class="hash-link" aria-label="Direct link to Self-Transitions Not Working" title="Direct link to Self-Transitions Not Working">​</a></h3>
<p>If CurrentState transitions aren&#x27;t working:</p>
<ol>
<li>Verify the action actually completes</li>
<li>Check that the state detection still passes after the action</li>
<li>Ensure the UI change doesn&#x27;t trigger a different state detection</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-states-claiming-to-be-active">Multiple States Claiming to be Active<a href="#multiple-states-claiming-to-be-active" class="hash-link" aria-label="Direct link to Multiple States Claiming to be Active" title="Direct link to Multiple States Claiming to be Active">​</a></h3>
<p>This can happen with poor state definition:</p>
<ol>
<li>Make StateImages more specific</li>
<li>Use unique identifiers for each state</li>
<li>Adjust pattern matching thresholds</li>
<li>Consider using state priorities</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration-from-old-annotations">Migration from Old Annotations<a href="#migration-from-old-annotations" class="hash-link" aria-label="Direct link to Migration from Old Annotations" title="Direct link to Migration from Old Annotations">​</a></h2>
<p>If you have old code using the deprecated <code>@Transition</code> annotation:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// OLD (no longer supported)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transition(from = MenuState.class, to = PreviousState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// NEW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TransitionSet(state = MenuState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MenuTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @OutgoingTransition(to = PreviousState.class, pathCost = 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean closeToPrevious() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Implementation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>Brobot&#x27;s special state transitions provide powerful patterns for handling dynamic UI behavior:</p>
<ul>
<li><strong>PreviousState</strong>: Perfect for overlays that need to return to whatever they covered</li>
<li><strong>CurrentState</strong>: Ideal for actions that modify the current page without navigation</li>
<li><strong>ExpectedState</strong>: Future consideration for runtime-determined navigation</li>
<li><strong>UnknownState</strong>: Not a target, but a safety net with recovery transitions</li>
</ul>
<p>These special states make your automation more resilient and adaptable to the dynamic nature of modern applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="complete-tutorial-and-example-project">Complete Tutorial and Example Project<a href="#complete-tutorial-and-example-project" class="hash-link" aria-label="Direct link to Complete Tutorial and Example Project" title="Direct link to Complete Tutorial and Example Project">​</a></h2>
<p>A complete, runnable example demonstrating all special state concepts is available:</p>
<ul>
<li><strong><a href="/brobot/docs/core-library/tutorials/tutorial-special-states">Special States Tutorial</a></strong> - Step-by-step tutorial with full source code</li>
<li><strong>Example Project</strong>: <code>examples/03-core-library/guides/dynamic-transitions/special-states-example/</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-documentation">Related Documentation<a href="#related-documentation" class="hash-link" aria-label="Direct link to Related Documentation" title="Direct link to Related Documentation">​</a></h2>
<ul>
<li><a href="/brobot/docs/getting-started/transitions">Transitions Overview</a> - General transition concepts</li>
<li><a href="/brobot/docs/getting-started/core-concepts#handling-dynamic-overlays-hidden-states">Core Concepts</a> - Brief hidden states overview</li>
<li><a href="/brobot/docs/getting-started/states">States Overview</a> - Understanding states in Brobot</li>
<li><a href="/brobot/docs/core-library/guides/state-aware-scheduling">State-Aware Scheduling</a> - Advanced state scheduling patterns</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/guides/dynamic-transitions.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/brobot/docs/core-library/guides/processes-as-objects"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Processes as Objects</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/brobot/docs/core-library/guides/pathfinding-and-costs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pathfinding and Path Costs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#the-problem" class="table-of-contents__link toc-highlight">The Problem</a></li><li><a href="#the-solution-hidden-states" class="table-of-contents__link toc-highlight">The Solution: Hidden States</a></li><li><a href="#special-marker-classes" class="table-of-contents__link toc-highlight">Special Marker Classes</a><ul><li><a href="#-currently-implemented" class="table-of-contents__link toc-highlight">✅ Currently Implemented</a></li><li><a href="#️-future-consideration" class="table-of-contents__link toc-highlight">⚠️ Future Consideration</a></li></ul></li><li><a href="#understanding-each-special-state-type" class="table-of-contents__link toc-highlight">Understanding Each Special State Type</a><ul><li><a href="#previousstate---return-to-hidden-state" class="table-of-contents__link toc-highlight">PreviousState - Return to Hidden State</a></li><li><a href="#currentstate---self-transitions" class="table-of-contents__link toc-highlight">CurrentState - Self-Transitions</a></li><li><a href="#expectedstate---runtime-determined-not-yet-implemented" class="table-of-contents__link toc-highlight">ExpectedState - Runtime-Determined (Not Yet Implemented)</a></li></ul></li><li><a href="#understanding-unknownstate-not-a-special-marker" class="table-of-contents__link toc-highlight">Understanding UnknownState (Not a Special Marker)</a><ul><li><a href="#how-unknownstate-works" class="table-of-contents__link toc-highlight">How UnknownState Works</a></li></ul></li><li><a href="#complete-working-example-special-states" class="table-of-contents__link toc-highlight">Complete Working Example: Special States</a><ul><li><a href="#modal-dialog-state-with-previousstate" class="table-of-contents__link toc-highlight">Modal Dialog State with PreviousState</a></li><li><a href="#modal-dialog-transitions-using-previousstate" class="table-of-contents__link toc-highlight">Modal Dialog Transitions Using PreviousState</a></li><li><a href="#main-page-with-currentstate-self-transitions" class="table-of-contents__link toc-highlight">Main Page with CurrentState Self-Transitions</a></li><li><a href="#generic-data-grid-example-with-self-transitions" class="table-of-contents__link toc-highlight">Generic Data Grid Example with Self-Transitions</a></li><li><a href="#multi-level-overlays" class="table-of-contents__link toc-highlight">Multi-Level Overlays</a></li></ul></li><li><a href="#decision-guide" class="table-of-contents__link toc-highlight">Decision Guide</a></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a><ul><li><a href="#1-use-previousstate-for-true-overlays" class="table-of-contents__link toc-highlight">1. Use PreviousState for True Overlays</a></li><li><a href="#2-use-currentstate-for-in-page-actions" class="table-of-contents__link toc-highlight">2. Use CurrentState for In-Page Actions</a></li><li><a href="#3-provide-fallbacks" class="table-of-contents__link toc-highlight">3. Provide Fallbacks</a></li><li><a href="#4-clear-visual-indicators" class="table-of-contents__link toc-highlight">4. Clear Visual Indicators</a></li><li><a href="#5-handle-edge-cases" class="table-of-contents__link toc-highlight">5. Handle Edge Cases</a></li></ul></li><li><a href="#framework-components" class="table-of-contents__link toc-highlight">Framework Components</a><ul><li><a href="#special-marker-classes-1" class="table-of-contents__link toc-highlight">Special Marker Classes</a></li><li><a href="#transitionsetprocessor" class="table-of-contents__link toc-highlight">TransitionSetProcessor</a></li><li><a href="#sethiddenstates" class="table-of-contents__link toc-highlight">SetHiddenStates</a></li><li><a href="#statememory" class="table-of-contents__link toc-highlight">StateMemory</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#hidden-state-not-found" class="table-of-contents__link toc-highlight">Hidden State Not Found</a></li><li><a href="#self-transitions-not-working" class="table-of-contents__link toc-highlight">Self-Transitions Not Working</a></li><li><a href="#multiple-states-claiming-to-be-active" class="table-of-contents__link toc-highlight">Multiple States Claiming to be Active</a></li></ul></li><li><a href="#migration-from-old-annotations" class="table-of-contents__link toc-highlight">Migration from Old Annotations</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#complete-tutorial-and-example-project" class="table-of-contents__link toc-highlight">Complete Tutorial and Example Project</a></li><li><a href="#related-documentation" class="table-of-contents__link toc-highlight">Related Documentation</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=aHnVQ8KmOVw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Introductory Video</a></li><li class="footer__item"><a class="footer__link-item" href="/brobot/docs/getting-started/introduction">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/brobot/visualAPI">The Visual API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/brobot/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgRljq-lHkMLrzRzpJC4HNw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://search.maven.org/artifact/io.github.jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Joshua Spinak · Free & Open Source</div></div></div></footer></div>
</body>
</html>