<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ai-brobot-project-creation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">AI Instructions for Creating Brobot Projects | Brobot</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jspinak.github.io/brobot/docs/ai-brobot-project-creation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AI Instructions for Creating Brobot Projects | Brobot"><meta data-rh="true" name="description" content="Project Setup Sequence"><meta data-rh="true" property="og:description" content="Project Setup Sequence"><link data-rh="true" rel="icon" href="/brobot/img/brobot-happy.ico"><link data-rh="true" rel="canonical" href="https://jspinak.github.io/brobot/docs/ai-brobot-project-creation"><link data-rh="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/ai-brobot-project-creation" hreflang="en"><link data-rh="true" rel="alternate" href="https://jspinak.github.io/brobot/docs/ai-brobot-project-creation" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"AI Instructions for Creating Brobot Projects","item":"https://jspinak.github.io/brobot/docs/ai-brobot-project-creation"}]}</script><link rel="alternate" type="application/rss+xml" href="/brobot/blog/rss.xml" title="Brobot RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/brobot/blog/atom.xml" title="Brobot Atom Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6WY1S6ZWEY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6WY1S6ZWEY",{anonymize_ip:!0})</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous"><link rel="stylesheet" href="/brobot/assets/css/styles.1b22d91f.css">
<script src="/brobot/assets/js/runtime~main.efa892f1.js" defer="defer"></script>
<script src="/brobot/assets/js/main.4ae53e84.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/brobot/"><div class="navbar__logo"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="Brobot Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/brobot/img/brobot_logo/brobot-happy-text.svg" alt="Brobot Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Brobot</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/brobot/docs/getting-started/introduction">Documentation</a><a href="https://jspinak.github.io/brobot/api/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Reference<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/brobot/visualAPI">The Visual API</a><a class="navbar__item navbar__link" href="/brobot/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/brobot/docs/ai-brobot-project-creation">Latest</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/brobot/docs/ai-brobot-project-creation">Latest</a></li><li><a class="dropdown__link" href="/brobot/docs/1.0.7/getting-started/introduction">1.0.7</a></li><li><a class="dropdown__link" href="/brobot/docs/1.0.6/introduction">1.0.6</a></li></ul></div><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/getting-started/introduction">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/no-code-automation/desktop-runner/runner-overview">No-Code Automation (Beta)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/core-library/guides/finding-objects/configuration-note">Core Library (for Developers)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/testing/testing-intro">Testing Your Automation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/category/theoretical-foundations">Theoretical Foundations</a><button aria-label="Expand sidebar category &#x27;Theoretical Foundations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/brobot/docs/category/integrations">Integrations</a><button aria-label="Expand sidebar category &#x27;Integrations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/brobot/docs/brobot-name-origin">Origin of the Name Brobot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/brobot/docs/ASPECTJ_USAGE_GUIDE">AspectJ Usage Guide for Brobot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/brobot/docs/ai-brobot-project-creation">AI Instructions for Creating Brobot Projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/brobot/docs/migration/actionoptions-to-actionconfig">migration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/brobot/docs/preparing-folder-for-ai-project-creation">Preparing a Folder for AI-Assisted Brobot Project Creation</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/brobot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">AI Instructions for Creating Brobot Projects</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Latest</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AI Instructions for Creating Brobot Projects</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-setup-sequence">Project Setup Sequence<a href="#project-setup-sequence" class="hash-link" aria-label="Direct link to Project Setup Sequence" title="Direct link to Project Setup Sequence">​</a></h2>
<ol>
<li>
<p><strong>Directory Structure</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">project-root/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src/main/java/com/[organization]/[project]/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── states/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── transitions/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── automation/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── config/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── [ProjectName]Application.java</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── src/main/resources/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── application.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └  ── application.yml          # Alternative to properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── images/                      # Image resources in project root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── [state-name]/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── history/                     # Destination for illustrated screenshots from unit testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── build.gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── settings.gradle</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Gradle Configuration</strong></p>
<ul>
<li>Use Spring Boot 3.2.0+ with Java 21</li>
<li>For local Brobot library development, use composite build:</li>
</ul>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// build.gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Brobot 1.1.0+ includes Spring, Lombok, SLF4J as transitive dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation &#x27;io.github.jspinak:brobot:1.1.0&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Only need annotation processor for Lombok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotationProcessor &#x27;org.projectlombok:lombok:1.18.32&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Add test dependencies as needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testImplementation &#x27;org.springframework.boot:spring-boot-starter-test&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// settings.gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">includeBuild(&#x27;../brobot&#x27;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependencySubstitution {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        substitute module(&#x27;io.github.jspinak:brobot&#x27;) using project(&#x27;:library&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>State Creation Pattern (Modern with Annotations)</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State  // Automatically registers as Spring component and Brobot state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExampleState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage mainImage;  // Direct access to components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage secondaryImage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateString textRegion;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ExampleState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Create state components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mainImage = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;folder/image-name1&quot;, &quot;folder/image-name2&quot;)  // No .png extension needed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;MainImage&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        secondaryImage = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;folder/secondary-image&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;SecondaryImage&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        textRegion = new StateString.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;TextRegion&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setRegion(new Region(100, 100, 200, 50))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // No need to build State object - annotation handles it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>For Initial States:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State(initial = true)  // Marks as initial state for state machine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HomeState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // State definition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Important Naming Convention:</strong></p>
<ul>
<li>Classes with <code>@State</code> annotation are registered with the &quot;State&quot; suffix removed</li>
<li>Example: <code>WorldState</code> class is registered as <code>&quot;World&quot;</code></li>
<li>Example: <code>HomeState</code> class is registered as <code>&quot;Home&quot;</code></li>
<li>When referencing states (e.g., in <code>targetStateName</code>), use the name without &quot;State&quot;</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="traditional-state-pattern-without-state">Traditional State Pattern (Without @State)<a href="#traditional-state-pattern-without-state" class="hash-link" aria-label="Direct link to Traditional State Pattern (Without @State)" title="Direct link to Traditional State Pattern (Without @State)">​</a></h3>
<p>For reference, here&#x27;s the traditional approach without annotations (as shown in the research paper):</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Home { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public enum Name implements StateEnum { HOME } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private StateImageObject toWorldButton = new StateImageObject.Builder() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withImage(&quot;toWorldButton&quot;) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .isFixed(true) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addSnapshot(new MatchSnapshot(220, 600, 20, 20)) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private State state = new State.Builder(HOME) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withImages(toWorldButton) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Home(StateService stateService) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stateService.save(state); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This approach requires:</p>
<ul>
<li>Manual state registration in constructor</li>
<li>Explicit State object creation</li>
<li>Direct StateService dependency</li>
<li>Uses older StateImageObject API</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-define-an-explicit-state-object">When to Define an Explicit State Object<a href="#when-to-define-an-explicit-state-object" class="hash-link" aria-label="Direct link to When to Define an Explicit State Object" title="Direct link to When to Define an Explicit State Object">​</a></h3>
<p><strong>With @State annotation, you have two options:</strong></p>
<ol>
<li>
<p><strong>Components Only (Recommended)</strong> - Let the framework handle State creation:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MenuState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage button;  // Only components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MenuState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        button = new StateImage.Builder()...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Explicit State (Rare)</strong> - Only if you need direct State access:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MenuState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final State state;  // Explicit State object</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage button;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public MenuState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        button = new StateImage.Builder()...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        state = new State.Builder(&quot;MENU&quot;)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
</ol>
<p><strong>Use explicit State only when:</strong></p>
<ul>
<li>Migrating legacy code gradually</li>
<li>You need the State object for specific framework interactions</li>
<li>You&#x27;re not using @State annotation (traditional approach)</li>
</ul>
<p><strong>Otherwise, stick with components only</strong> - it&#x27;s cleaner and the framework handles everything automatically.</p>
</li>
<li>
<p><strong>Declarative Search Region Definition (v1.1.0+)</strong></p>
<p>Brobot supports defining search regions relative to other objects, even across states:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WorkingState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage claudeIcon;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public WorkingState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ClaudeIcon&#x27;s search region is defined relative to ClaudePrompt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        claudeIcon = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;working/claude-icon-1&quot;, &quot;working/claude-icon-2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;ClaudeIcon&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setSearchRegionOnObject(SearchRegionOnObject.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .targetType(StateObject.Type.IMAGE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .targetStateName(&quot;Prompt&quot;)  // Can reference other states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .targetObjectName(&quot;ClaudePrompt&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .adjustments(MatchAdjustmentOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addX(3)    // Offset from ClaudePrompt location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addY(10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addW(30)   // Expand width by 30 pixels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addH(55)   // Expand height by 55 pixels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Key Benefits:</strong></p>
<ul>
<li><strong>Automatic Updates</strong>: When ClaudePrompt is found, ClaudeIcon&#x27;s search region updates automatically</li>
<li><strong>Cross-State References</strong>: Objects can depend on objects in other states</li>
<li><strong>No Manual Calculations</strong>: Framework handles all region math</li>
<li><strong>Cleaner Code</strong>: Define relationships declaratively, not imperatively</li>
</ul>
<p><strong>Common Patterns:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Simple relative positioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.setSearchRegionOnObject(SearchRegionOnObject.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .targetType(StateObject.Type.IMAGE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .targetStateName(&quot;Menu&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .targetObjectName(&quot;MenuBar&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .adjustments(MatchAdjustmentOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addY(50)  // 50 pixels below menu bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Fixed dimensions with relative position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.setSearchRegionOnObject(SearchRegionOnObject.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .targetType(StateObject.Type.IMAGE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .targetStateName(&quot;Form&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .targetObjectName(&quot;FormTitle&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .adjustments(MatchAdjustmentOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .addY(100)     // Below title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .absoluteW(200) // Fixed 200x50 region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .absoluteH(50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build())</span><br></span></code></pre></div></div>
<p><strong>How It Works:</strong></p>
<ol>
<li>Dependencies are registered when states load (via <code>SearchRegionDependencyInitializer</code>)</li>
<li>When a FIND operation succeeds, <code>FindPipeline</code> updates dependent regions</li>
<li>Next search uses the updated region automatically</li>
</ol>
<p><strong>For detailed documentation, see:</strong> <code>docs/03-core-library/guides/declarative-region-definition.md</code></p>
</li>
<li>
<p><strong>Search Regions and Fixed Locations</strong></p>
<p>Understanding how search regions and fixed locations work together is crucial for efficient pattern matching:</p>
<p><strong>Key Concept:</strong></p>
<blockquote>
<p>The normal search region defines a limited area in which to search. StateImages marked as fixed will set the fixed region when found. However, until the image has been found, it will continue to search within the search regions defined for it.</p>
</blockquote>
<p><strong>Basic Search Region Configuration:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExampleState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage element;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public ExampleState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Define search region (e.g., lower left quarter of screen)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Region searchArea = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withScreenPercentage(0.0, 0.5, 0.5, 0.5)  // x=0%, y=50%, w=50%, h=50%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Apply search region to StateImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        element = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;element-1&quot;, &quot;element-2&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;Element&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setSearchRegionForAllPatterns(searchArea)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Fixed Location Pattern:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class NavigationState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage menuBar;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public NavigationState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Region topArea = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withScreenPercentage(0.0, 0.0, 1.0, 0.1)  // Top 10% of screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        menuBar = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;menu/menu-bar&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;MenuBar&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setSearchRegionForAllPatterns(topArea)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Mark as fixed - will remember location once found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        menuBar.getPatterns().forEach(p -&gt; p.setFixed(true));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>How Fixed Locations Work:</strong></p>
<ol>
<li><strong>First Search</strong>: Searches within defined search regions</li>
<li><strong>Location Memory</strong>: When found, saves exact location as fixed region</li>
<li><strong>Subsequent Searches</strong>: Checks fixed location first, falls back to search regions if not found</li>
</ol>
<p><strong>Best Practices:</strong></p>
<ul>
<li>Use fixed locations for static UI elements (navigation bars, status indicators)</li>
<li>Use search regions only for dynamic content (popups, moving elements)</li>
<li>Combine both for robustness (fixed location with search region fallback)</li>
<li>Keep search regions as small as practical for performance</li>
</ul>
<p><strong>Performance Impact:</strong></p>
<table><thead><tr><th>Approach</th><th>Initial Search</th><th>Subsequent Searches</th><th>Use Case</th></tr></thead><tbody><tr><td>Full Screen</td><td>Slowest</td><td>Slowest</td><td>Last resort</td></tr><tr><td>Search Region</td><td>Fast</td><td>Fast</td><td>Dynamic content</td></tr><tr><td>Fixed + Region</td><td>Fast</td><td>Fastest</td><td>Static UI elements</td></tr></tbody></table>
<p><strong>For detailed documentation, see:</strong> <code>docs/03-core-library/guides/search-regions-and-fixed-locations.md</code></p>
</li>
<li>
<p><strong>Transitions (Two Approaches)</strong></p>
<p><strong>Modern Approach with @Transition Annotation (Recommended):</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Transition(from = ExampleState.class, to = TargetState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExampleToTargetTransition {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ExampleState exampleState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean execute() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Executing transition from Example to Target&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Use convenience methods for clean code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(exampleState.getMainImage()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Traditional Approach with JavaStateTransition:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExampleTransitions {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ExampleState exampleState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public StateTransitions getStateTransitions() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new StateTransitions.Builder(ExampleState.Name.EXAMPLE.toString())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addTransition(createOutgoingTransition())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addTransitionFinish(() -&gt; verifyInState())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private JavaStateTransition createOutgoingTransition() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new JavaStateTransition.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setFunction(() -&gt; executeTransition())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addToActivate(TargetState.Name.TARGET.toString())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setStaysVisibleAfterTransition(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean executeTransition() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(exampleState.getMainImage()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private boolean verifyInState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.find(exampleState.getMainImage()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Modern Action Patterns</strong></p>
<ul>
<li>
<p><strong>Use ActionConfig classes, NOT ActionOptions</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Good - Modern approach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PatternFindOptions findOptions = new PatternFindOptions.Builder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ClickOptions clickOptions = new ClickOptions.Builder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TypeOptions typeOptions = new TypeOptions.Builder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColorFindOptions colorOptions = new ColorFindOptions.Builder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MotionFindOptions motionOptions = new MotionFindOptions.Builder().build();</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Fluent API with Action Chaining (Two Approaches)</strong>:</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-actionchainbuilder-vs-then">When to Use ActionChainBuilder vs .then()<a href="#when-to-use-actionchainbuilder-vs-then" class="hash-link" aria-label="Direct link to When to Use ActionChainBuilder vs .then()" title="Direct link to When to Use ActionChainBuilder vs .then()">​</a></h3>
<p><strong>Use ActionChainBuilder when you need:</strong></p>
<ul>
<li>More than 2 actions in sequence</li>
<li>Explicit control over chaining strategy (NESTED vs CONFIRM)</li>
<li>Chain-level configuration (pauseBeforeBegin, pauseAfterEnd for entire chain)</li>
<li>Better readability for complex sequences</li>
<li>To build reusable chain configurations</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Example: Complex 3+ action chain with strategy control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionChainOptions validateAndSubmit = ActionChainBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .of(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setStrategy(PatternFindOptions.Strategy.BEST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setColorStrategy(ColorFindOptions.Color.MU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(new ClickOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setNumberOfClicks(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(new TypeOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setText(&quot;Submit&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withStrategy(ActionChainOptions.ChainingStrategy.CONFIRM) // Explicit strategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pauseBeforeBegin(2.0)  // Wait before entire chain starts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pauseAfterEnd(1.0)     // Wait after entire chain completes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<p><strong>Use .then() on ActionConfig when you have:</strong></p>
<ul>
<li>Simple 2-action sequences (find→click, find→type)</li>
<li>No need for explicit strategy control (defaults to sequential execution)</li>
<li>Quick inline action chains</li>
<li>Actions that naturally flow together</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Example: Simple find and click - concise and readable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult result = action.perform(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setStrategy(PatternFindOptions.Strategy.BEST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .then(new ClickOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setNumberOfClicks(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stateImage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Example: Find and type - common pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PatternFindOptions findAndType = new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setStrategy(PatternFindOptions.Strategy.FIRST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(new TypeOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setText(&quot;Hello World&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<p><strong>Key Differences:</strong></p>
<ul>
<li><strong>ActionChainBuilder</strong>:<!-- -->
<ul>
<li>Creates ActionChainOptions with full chain control</li>
<li>Supports chain-wide configuration and strategies (NESTED, CONFIRM)</li>
<li>Best for complex multi-action sequences requiring precise control</li>
</ul>
</li>
<li><strong>.then() method</strong>:<!-- -->
<ul>
<li>Creates a simple subsequent action list (convenience method)</li>
<li>Inherits the parent action&#x27;s default sequential execution behavior</li>
<li>Best for simple 2-3 step sequences without special requirements</li>
</ul>
</li>
</ul>
<p><strong>Rule of Thumb:</strong> Start with .then() for simple cases. Switch to ActionChainBuilder when you need more control or have 3+ actions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conditionalactionchain---the-foundation">ConditionalActionChain - The Foundation<a href="#conditionalactionchain---the-foundation" class="hash-link" aria-label="Direct link to ConditionalActionChain - The Foundation" title="Direct link to ConditionalActionChain - The Foundation">​</a></h3>
<p><strong>ConditionalActionChain provides the core fluent API for building complex action sequences with conditional execution:</strong></p>
<p>Located in the examples at <code>examples/03-core-library/action-config/conditional-chains-examples/</code>, this class demonstrates the patterns for building conditional action sequences that handle different UI states and conditions.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.conditional.ConditionalActionChain;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Basic usage pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(loginButton)           // Start with find</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(clickOptions)        // Execute if found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFoundLog(&quot;Not found&quot;)   // Log if not found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(usernameField)          // Continue to next element</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundType(&quot;username&quot;)      // Type if found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>Key Methods:</strong></p>
<ul>
<li><strong>Starting methods</strong>: <code>find()</code>, <code>start()</code> - Begin a chain</li>
<li><strong>Conditional methods</strong>: <code>ifFound()</code>, <code>ifNotFound()</code>, <code>ifFoundDo()</code>, <code>ifNotFoundDo()</code></li>
<li><strong>Sequential methods</strong>: <code>then()</code>, <code>always()</code> - Continue the chain</li>
<li><strong>Action methods</strong>: <code>click()</code>, <code>type()</code>, <code>clearAndType()</code>, <code>highlight()</code></li>
<li><strong>Control methods</strong>: <code>stopChain()</code>, <code>throwError()</code>, <code>wait()</code></li>
<li><strong>Utility methods</strong>: <code>takeScreenshot()</code>, <code>log()</code>, <code>logAction()</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conditionalactionchain---the-most-elegant-approach">ConditionalActionChain - The Most Elegant Approach<a href="#conditionalactionchain---the-most-elegant-approach" class="hash-link" aria-label="Direct link to ConditionalActionChain - The Most Elegant Approach" title="Direct link to ConditionalActionChain - The Most Elegant Approach">​</a></h3>
<p><strong>ConditionalActionChain extends ConditionalActionChain with additional convenience methods and better sequential composition:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Basic pattern: find → if found do X → if not found do Y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(buttonImage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFoundLog(&quot;Button not found&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, new ObjectCollection.Builder().build());</span><br></span></code></pre></div></div>
<p><strong>Key Feature - The then() Method:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Sequential actions with then() - the missing piece!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(loginButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(usernameField)  // Move to next element</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundType(&quot;username&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(passwordField)  // Continue the flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundType(&quot;password&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(submitButton)   // Keep going</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, new ObjectCollection.Builder().build());</span><br></span></code></pre></div></div>
<p><strong>Enhanced Features:</strong></p>
<ul>
<li><strong>Sequential Composition</strong>: The crucial <code>then()</code> method for multi-step workflows</li>
<li><strong>Convenience Methods</strong>: Direct <code>click()</code>, <code>type()</code>, <code>scrollDown()</code> methods</li>
<li><strong>Keyboard Shortcuts</strong>: Built-in <code>pressEnter()</code>, <code>pressTab()</code>, <code>pressCtrlS()</code></li>
<li><strong>No wait() Method</strong>: Follows model-based principles - timing via action configurations</li>
<li><strong>Control Flow</strong>: <code>stopChain()</code>, <code>retry()</code>, <code>throwError()</code> methods</li>
<li><strong>Conditional Logic</strong>: Proper if/then/else execution with <code>ifFound()</code> and <code>ifNotFound()</code></li>
</ul>
<p><strong>Common Patterns:</strong></p>
<ol>
<li><strong>Login Flow with Sequential Actions:</strong></li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(loginButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(usernameField)      // Sequential action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundType(&quot;username&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(passwordField)      // Continue flow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundType(&quot;password&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(submitButton)       // Keep going</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, new ObjectCollection.Builder().build());</span><br></span></code></pre></div></div>
<ol start="2">
<li><strong>Form Filling with Convenience Methods:</strong></li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(formTitle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFoundDo(res -&gt; { throw new RuntimeException(&quot;Form not found&quot;); })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(nameField)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .clearAndType(&quot;John Doe&quot;)    // Convenience method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressTab()                   // Keyboard shortcut</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .type(&quot;john@example.com&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(submitButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .takeScreenshot(&quot;form-submitted&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, new ObjectCollection.Builder().build());</span><br></span></code></pre></div></div>
<ol start="3">
<li><strong>Error Handling with Control Flow:</strong></li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(submitButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(errorDialog)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundLog(&quot;Error appeared&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .stopIf(res -&gt; res.getText() != null &amp;&amp; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            !res.getText().isEmpty() &amp;&amp; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            res.getText().get(0).contains(&quot;CRITICAL&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(retryButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, new ObjectCollection.Builder().build());</span><br></span></code></pre></div></div>
<ol start="4">
<li><strong>Retry Pattern and Keyboard Shortcuts:</strong></li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Retry with convenience methods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .retry(new PatternFindOptions.Builder().build(), 3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFoundLog(&quot;Failed after retries&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Keyboard shortcuts workflow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(editorField)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressCtrlA()      // Select all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressDelete()     // Delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .type(&quot;New text&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressCtrlS()      // Save</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, new ObjectCollection.Builder().build());</span><br></span></code></pre></div></div>
<p><strong>When to Use ConditionalActionChain:</strong></p>
<ul>
<li><strong>Always for UI interactions</strong> - Handles element not found gracefully</li>
<li><strong>Multi-step workflows</strong> - Clean sequential flow with error handling</li>
<li><strong>When you need both success and failure handling</strong></li>
<li><strong>For readable, self-documenting code</strong></li>
</ul>
<p><strong>When NOT to Use:</strong></p>
<ul>
<li><strong>Known coordinates</strong> - Use <code>action.perform(ActionType.CLICK, location)</code></li>
<li><strong>Simple unconditional actions</strong> - Use convenience methods</li>
<li><strong>Performance-critical loops</strong> - Use traditional find/action separation</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-world-conditionalactionchain-examples">Real-World ConditionalActionChain Examples<a href="#real-world-conditionalactionchain-examples" class="hash-link" aria-label="Direct link to Real-World ConditionalActionChain Examples" title="Direct link to Real-World ConditionalActionChain Examples">​</a></h3>
<p><strong>Complex Dialog Handling:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Handle multi-path dialog with various UI states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(dialogTitle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFoundLog(&quot;Dialog not present&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .stopChain()  // Exit early if no dialog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(errorMessage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundLog(&quot;Error detected&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundDo(result -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Custom error handling logic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String error = result.getText().get(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.error(&quot;Dialog error: {}&quot;, error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(retryButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(new ClickOptions.Builder().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFound(cancelButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(new ClickOptions.Builder().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>Form Validation Flow:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Validate and submit form with error highlighting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .start(validateButton)  // Start without initial find</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .click()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .wait(0.5)  // Allow validation to complete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(errorFields)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundDo(result -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Highlight all error fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.getMatchList().forEach(match -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            action.highlight(match.getRegion());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .highlightErrors()  // Additional error highlighting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFound(submitButton)  // No errors, submit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .logAction()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>State-Aware Navigation:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Navigate based on current state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .checkPrerequisites()  // Custom prerequisite check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(homeIcon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(new ClickOptions.Builder().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .waitVanish(loadingSpinner)  // Wait for load</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(navigationMenu)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFoundLog(&quot;Menu not accessible&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .throwError(&quot;Navigation failed&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(menuItems)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .analyzeItem()  // Analyze menu structure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .processItemDialog()  // Handle item selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .cleanupResources()  // Cleanup after navigation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>Document Processing:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Process documents with different handlers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(documentIcon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundDo(result -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Determine document type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String docType = analyzeDocumentType(result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context.put(&quot;docType&quot;, docType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(pdfIcon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(openDocument())  // PDF handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFound(imageIcon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(viewImage())     // Image handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifNotFound(textIcon)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(openDocument())  // Text handler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .always(showProperties()) // Always show properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>Keyboard Navigation Example:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Navigate using keyboard shortcuts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(textEditor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundClick()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressCtrlA()      // Select all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressDelete()     // Clear</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .type(&quot;New content&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .pressCtrlS()      // Save</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .handleConfirmation()  // Handle save dialog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>Checkbox and Toggle Handling:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Smart checkbox handling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(checkbox)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .clickIfNotChecked()  // Only click if unchecked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(relatedOption)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFoundLog(&quot;Related option appeared&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .validateFields()  // Validate dependent fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>Region-Based Actions:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Work with specific regions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region searchArea = new Region(100, 100, 400, 300);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region clickArea = new Region(150, 150, 50, 30);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConditionalActionChain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .find(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setSearchRegion(searchArea)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .ifFound(highlightRegion(searchArea))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .clickRegion(clickArea)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .perform(action, objectCollection);</span><br></span></code></pre></div></div>
<p><strong>ConditionalActionWrapper for Spring Applications:</strong></p>
<p>When using Spring Boot, you can use <code>ConditionalActionWrapper</code> with ConditionalActionChain:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginAutomation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ConditionalActionWrapper actions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void performLogin(StateImage loginButton, String username) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Simple find and click</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions.findAndClick(loginButton);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Find and type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions.findAndType(usernameField, username);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Complex conditional chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        actions.createChain()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .find(submitButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .ifFound(ConditionalActionWrapper.click())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .ifNotFoundLog(&quot;Submit button not found&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>ConditionalActionWrapper vs FindAndClick/FindAndType:</strong></p>
<ul>
<li>
<p><strong>FindAndClick/FindAndType</strong>: Simple composite actions that always execute all steps</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Always finds then clicks, no conditions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FindAndClick findAndClick = new FindAndClick.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSimilarity(0.9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.perform(findAndClick, objectCollection);</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>ConditionalActionWrapper</strong>: Spring component with conditional execution</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Only clicks if found, with logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired ConditionalActionWrapper actions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">actions.findAndClick(submitButton);  // Handles errors gracefully</span><br></span></code></pre></div></div>
</li>
</ul>
<p><strong>Use ConditionalActionWrapper when:</strong></p>
<ul>
<li>Working in a Spring Boot application</li>
<li>Need conditional execution paths</li>
<li>Want automatic error handling and logging</li>
<li>Building complex conditional workflows</li>
</ul>
<p><strong>Use FindAndClick/FindAndType when:</strong></p>
<ul>
<li>
<p>Not using Spring dependency injection</p>
</li>
<li>
<p>Always want to execute all steps</p>
</li>
<li>
<p>Working with simple, predictable sequences</p>
</li>
<li>
<p><strong>Convenience Methods</strong>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Simple find</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.find(state.getImage()).isSuccess()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Find with timeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.findWithTimeout(10.0, state.getImage()).isSuccess()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Direct click</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.click(state.getImage())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Type with object collection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.type(new ObjectCollection.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withStrings(state.getTextCommand())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build())</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
<li>
<p><strong>State Registration with Event Listener (Recommended)</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.boot.context.event.ApplicationReadyEvent;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.springframework.context.event.EventListener;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.config.FrameworkInitializer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StateRegistrationListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateService stateService;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateTransitionStore stateTransitionStore;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateMemory stateMemory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final FrameworkInitializer frameworkInitializer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ExampleState exampleState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final ExampleTransitions exampleTransitions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @EventListener(ApplicationReadyEvent.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onApplicationReady() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Application ready - registering states&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Register states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stateService.save(exampleState.getState());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Register transitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            stateTransitionStore.add(exampleTransitions.getStateTransitions());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Critical: Initialize state structure after ALL states registered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            frameworkInitializer.initializeStateStructure();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Set initial active state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Long stateId = stateService.getStateId(ExampleState.Name.EXAMPLE.toString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (stateId != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                stateMemory.addActiveState(stateId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.error(&quot;Error registering states: &quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Why use @EventListener instead of @PostConstruct:</strong></p>
<ul>
<li>Ensures framework is fully initialized before state registration</li>
<li>Prevents image loading errors during initialization</li>
<li>Better integration with Spring Boot lifecycle</li>
<li>Required call to <code>frameworkInitializer.initializeStateStructure()</code> after all states are registered</li>
</ul>
</li>
<li>
<p><strong>Spring Boot Application</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ComponentScan(basePackages = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;com.yourorg.yourproject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;io.github.jspinak.brobot&quot;  // Include Brobot components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class YourApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(YourApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Enhanced StateNavigator</strong></p>
</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Add this method to StateNavigator for cleaner code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean openState(StateEnum stateEnum) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return openState(stateEnum.toString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Usage becomes cleaner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stateNavigator.openState(WorkingState.Name.WORKING);</span><br></span></code></pre></div></div>
<ol start="11">
<li><strong>Image and Resource Organization</strong></li>
</ol>
<ul>
<li>Place images in <code>images/[state-name]/</code> at project root</li>
<li>Create <code>history/</code> folder at project root for illustrated test screenshots</li>
<li>Build.gradle should copy images to build directory:<!-- -->
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">task copyImages(type: Copy) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from &#x27;images&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    into &quot;$buildDir/resources/main/images&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">processResources.dependsOn copyImages</span><br></span></code></pre></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="brobot-annotations">Brobot Annotations<a href="#brobot-annotations" class="hash-link" aria-label="Direct link to Brobot Annotations" title="Direct link to Brobot Annotations">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-annotation">@State Annotation<a href="#state-annotation" class="hash-link" aria-label="Direct link to @State Annotation" title="Direct link to @State Annotation">​</a></h3>
<ul>
<li><strong>Purpose</strong>: Marks a class as a Brobot state and Spring component</li>
<li><strong>Parameters</strong>:<!-- -->
<ul>
<li><code>initial</code>: boolean (default false) - marks as initial state</li>
<li><code>name</code>: String (default &quot;&quot;) - optional state name override</li>
<li><code>description</code>: String (default &quot;&quot;) - state documentation</li>
</ul>
</li>
<li><strong>Required with</strong>: <code>@Getter</code> and <code>@Slf4j</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transition-annotation">@Transition Annotation<a href="#transition-annotation" class="hash-link" aria-label="Direct link to @Transition Annotation" title="Direct link to @Transition Annotation">​</a></h3>
<ul>
<li><strong>Purpose</strong>: Marks a class as a Brobot transition and Spring component</li>
<li><strong>Parameters</strong>:<!-- -->
<ul>
<li><code>from</code>: Class&lt;?&gt;[] - source state class(es)</li>
<li><code>to</code>: Class&lt;?&gt;[] - target state class(es)</li>
<li><code>method</code>: String (default &quot;execute&quot;) - transition method name</li>
<li><code>priority</code>: int (default 0) - transition priority</li>
<li><code>description</code>: String (default &quot;&quot;) - transition documentation</li>
</ul>
</li>
<li><strong>Required with</strong>: <code>@RequiredArgsConstructor</code> and <code>@Slf4j</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="collectdata-annotation-advanced">@CollectData Annotation (Advanced)<a href="#collectdata-annotation-advanced" class="hash-link" aria-label="Direct link to @CollectData Annotation (Advanced)" title="Direct link to @CollectData Annotation (Advanced)">​</a></h3>
<ul>
<li><strong>Purpose</strong>: Marks methods for automatic ML dataset collection</li>
<li><strong>Parameters</strong>:<!-- -->
<ul>
<li><code>category</code>: String - data category (default &quot;general&quot;)</li>
<li><code>features</code>: String[] - specific features to collect (empty = all)</li>
<li><code>captureScreenshots</code>: boolean - capture before/after screenshots (default true)</li>
<li><code>captureIntermediateStates</code>: boolean - capture multi-step operations (default false)</li>
<li><code>samplingRate</code>: double - collection rate 0.0-1.0 (default 1.0)</li>
<li><code>maxSamples</code>: int - max samples to collect, -1 = unlimited (default -1)</li>
<li><code>onlySuccess</code>: boolean - collect only successful executions (default false)</li>
<li><code>format</code>: DataFormat - storage format (JSON, CSV, BINARY, TFRECORD, PARQUET)</li>
<li><code>labels</code>: String[] - labels for supervised learning</li>
</ul>
</li>
<li><strong>Use Case</strong>: Training ML models on automation behavior</li>
</ul>
<p>Example usage:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@CollectData(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    category = &quot;click_accuracy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    captureScreenshots = true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    samplingRate = 0.1  // Collect 10% of executions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public ActionResult performCriticalClick(StateImage target) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Click logic that will have data collected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return action.click(target);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices">​</a></h2>
<ol>
<li>
<p><strong>Code Organization</strong></p>
<ul>
<li>Keep states simple with direct access to components</li>
<li>Use @State and @Transition annotations for cleaner code</li>
<li>Separate transitions into dedicated classes</li>
<li>Use Spring dependency injection throughout</li>
<li>Use declarative search regions for UI elements with predictable relationships</li>
</ul>
</li>
<li>
<p><strong>Modern API Usage</strong></p>
<ul>
<li>Always use ActionConfig classes (PatternFindOptions, ClickOptions, etc.)</li>
<li>Leverage fluent API for action chaining</li>
<li>Use convenience methods to reduce boilerplate</li>
<li>Implement StateEnum overloads for cleaner code</li>
</ul>
</li>
<li>
<p><strong>State Components</strong></p>
<ul>
<li>Expose frequently used StateImages/StateStrings as fields</li>
<li>Create getter methods for direct access</li>
<li>Combine related actions in single StateString (e.g., &quot;continue\n&quot;)</li>
</ul>
</li>
<li>
<p><strong>Error Handling</strong></p>
<ul>
<li>Wrap transitions in try-catch blocks</li>
<li>Log at appropriate levels (info for success, warn for failures)</li>
<li>Return boolean from transition functions</li>
</ul>
</li>
<li>
<p><strong>Lombok Considerations</strong></p>
<ul>
<li>Use @RequiredArgsConstructor for dependency injection</li>
<li>Use @Slf4j for logging</li>
<li>If Lombok issues occur, create manual constructors</li>
<li>Ensure Lombok version matches Brobot&#x27;s (1.18.32)</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-issues-and-solutions">Common Issues and Solutions<a href="#common-issues-and-solutions" class="hash-link" aria-label="Direct link to Common Issues and Solutions" title="Direct link to Common Issues and Solutions">​</a></h2>
<ol>
<li>
<p><strong>ActionOptions Deprecated</strong></p>
<ul>
<li>Always use specific ActionConfig implementations</li>
<li>ActionOptions will be removed in future versions</li>
</ul>
</li>
<li>
<p><strong>State Component Access</strong></p>
<ul>
<li>Don&#x27;t navigate through: <code>state.getStateImages().iterator().next()</code></li>
<li>Do provide direct access: <code>getMainImage()</code></li>
</ul>
</li>
<li>
<p><strong>Import Paths</strong></p>
<ul>
<li>Use <code>io.github.jspinak.brobot.model.state.*</code> (not primitives)</li>
<li>ActionExecution is in <code>internal.execution</code> package</li>
<li>StateMemory is in <code>statemanagement</code> package</li>
</ul>
</li>
<li>
<p><strong>Method Names</strong></p>
<ul>
<li>Use <code>stateService.save()</code> not <code>addState()</code></li>
<li>Use <code>stateMemory.addActiveState()</code> not <code>setActiveState()</code></li>
<li>Use <code>isSuccess()</code> on ActionResult</li>
</ul>
</li>
<li>
<p><strong>Transitions</strong></p>
<ul>
<li>Use StateTransitions.Builder pattern</li>
<li>Use <code>addTransitionFinish()</code> not <code>setTransitionFinish()</code></li>
<li>Use <code>setPauseBeforeBegin()</code> for timeouts</li>
</ul>
</li>
<li>
<p><strong>Declarative Search Regions Not Working</strong></p>
<ul>
<li>Verify target state and object names match exactly (case-sensitive)</li>
<li>Check logs for &quot;Registered search region dependency&quot; messages</li>
<li>Ensure target object has been found at least once</li>
<li>Enable debug logging: <code>logging.level.io.github.jspinak.brobot.action.internal.region=DEBUG</code></li>
<li>Verify Spring component scanning includes <code>io.github.jspinak.brobot</code></li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-patterns">Testing Patterns<a href="#testing-patterns" class="hash-link" aria-label="Direct link to Testing Patterns" title="Direct link to Testing Patterns">​</a></h2>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Quick verification in transitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private boolean findWithTimeout() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PatternFindOptions options = new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setPauseBeforeBegin(10.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return action.perform(options, state.getImage()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or use convenience method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private boolean findWithTimeout() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return action.findWithTimeout(10.0, state.getImage()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-v110">Configuration (v1.1.0+)<a href="#configuration-v110" class="hash-link" aria-label="Direct link to Configuration (v1.1.0+)" title="Direct link to Configuration (v1.1.0+)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="important-configuration-best-practices">Important: Configuration Best Practices<a href="#important-configuration-best-practices" class="hash-link" aria-label="Direct link to Important: Configuration Best Practices" title="Direct link to Important: Configuration Best Practices">​</a></h3>
<p><strong>DO:</strong> Configure through <code>application.yml</code> or <code>application.properties</code><br>
<strong>DO NOT:</strong> Set FrameworkSettings fields directly (deprecated)</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ❌ WRONG - Direct static field access is deprecated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FrameworkSettings.mock = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FrameworkSettings.saveHistory = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ✅ CORRECT - Use application properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Configure in application.yml or application.properties</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-configuration">Default Configuration<a href="#default-configuration" class="hash-link" aria-label="Direct link to Default Configuration" title="Direct link to Default Configuration">​</a></h3>
<p>Brobot includes sensible defaults in <code>brobot-defaults.properties</code>. You only need to override what you want to change.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="image-path-configuration">Image Path Configuration<a href="#image-path-configuration" class="hash-link" aria-label="Direct link to Image Path Configuration" title="Direct link to Image Path Configuration">​</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># application.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">brobot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image-path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> images/              </span><span class="token comment" style="color:#999988;font-style:italic"># Load from project root images folder</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># image-path: classpath:images/  # Load from classpath (after build copies them)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># image-path: /absolute/path/    # Absolute path</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-configuration-example">Complete Configuration Example<a href="#complete-configuration-example" class="hash-link" aria-label="Direct link to Complete Configuration Example" title="Direct link to Complete Configuration Example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-applicationyml-recommended">Using application.yml (Recommended):<a href="#using-applicationyml-recommended" class="hash-link" aria-label="Direct link to Using application.yml (Recommended):" title="Direct link to Using application.yml (Recommended):">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">brobot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">core</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image-path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> images/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">mock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic"># Enable/disable mock mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">headless</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># Run without GUI (for CI/CD)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">package-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> com.example        </span><span class="token comment" style="color:#999988;font-style:italic"># Base package for scanning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">startup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">verify-initial-states</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initial-states</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> HOME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">LOGIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">fallback-search</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">startup-delay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mouse</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">move-delay</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># Delay for mouse movements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pause-before-down</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># Pause before mouse down</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pause-after-down</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Pause after mouse down</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pause-before-up</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic"># Pause before mouse up</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pause-after-up</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># Pause after mouse up</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                              </span><span class="token comment" style="color:#999988;font-style:italic"># Mock mode timings (seconds)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-find-first</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-find-all</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-drag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-click</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-move</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-find-histogram</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-find-color</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">time-classify</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">screenshot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">save-snapshots</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Save screenshots during execution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">save-history</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic"># Save illustrated action history</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> screenshots/               </span><span class="token comment" style="color:#999988;font-style:italic"># Screenshot directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">filename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> screen                 </span><span class="token comment" style="color:#999988;font-style:italic"># Screenshot filename prefix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">history-path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> history/           </span><span class="token comment" style="color:#999988;font-style:italic"># History directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">history-filename</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hist           </span><span class="token comment" style="color:#999988;font-style:italic"># History filename prefix</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">illustration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic"># What to draw in history screenshots</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-find</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-click</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-drag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-move</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-highlight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-repeated-actions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-classify</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">draw-define</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">analysis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                          </span><span class="token comment" style="color:#999988;font-style:italic"># Color analysis settings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">k-means-in-profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">max-k-means-to-store</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">recording</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic"># Screen recording settings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> recordings/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">fps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">quality</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dataset</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic"># ML dataset generation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dataset/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">save-format</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JSON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">testing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic"># Unit test settings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">mock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">save-snapshots</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-applicationproperties">Using application.properties:<a href="#using-applicationproperties" class="hash-link" aria-label="Direct link to Using application.properties:" title="Direct link to Using application.properties:">​</a></h4>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Core settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.core.image-path=images/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.core.mock=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.core.headless=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.core.package-name=com.example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Startup settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.verify-initial-states=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.initial-states=HOME,LOGIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.fallback-search=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.startup-delay=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Mouse settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.mouse.move-delay=0.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.mouse.pause-before-down=0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.mouse.pause-after-down=0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Mock mode timings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.mock.time-find-first=0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.mock.time-find-all=0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.mock.time-click=0.05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Screenshot settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-snapshots=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-history=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.path=screenshots/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.history-path=history/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Illustration settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-find=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-click=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Testing settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.testing.mock=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.testing.save-snapshots=true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-classes">Configuration Classes<a href="#configuration-classes" class="hash-link" aria-label="Direct link to Configuration Classes" title="Direct link to Configuration Classes">​</a></h3>
<p><strong>BrobotProperties</strong>: The main configuration class that maps to <code>brobot.*</code> properties</p>
<ul>
<li>Uses Spring&#x27;s <code>@ConfigurationProperties(prefix = &quot;brobot&quot;)</code></li>
<li>Automatically initialized on startup</li>
<li>Values are copied to FrameworkSettings for backward compatibility</li>
</ul>
<p><strong>Key Configuration Groups</strong>:</p>
<ul>
<li><code>brobot.core.*</code> - Essential framework settings</li>
<li><code>brobot.mouse.*</code> - Mouse action timing and behavior</li>
<li><code>brobot.mock.*</code> - Simulated execution timings</li>
<li><code>brobot.screenshot.*</code> - Screen capture and history</li>
<li><code>brobot.illustration.*</code> - Visual feedback settings</li>
<li><code>brobot.analysis.*</code> - Color profiling settings</li>
<li><code>brobot.testing.*</code> - Test-specific overrides</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="movement-and-navigation-in-v110">Movement and Navigation in v1.1.0<a href="#movement-and-navigation-in-v110" class="hash-link" aria-label="Direct link to Movement and Navigation in v1.1.0" title="Direct link to Movement and Navigation in v1.1.0">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="available-movement-apis">Available Movement APIs<a href="#available-movement-apis" class="hash-link" aria-label="Direct link to Available Movement APIs" title="Direct link to Available Movement APIs">​</a></h3>
<p>Brobot v1.1.0 provides comprehensive movement control:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mouse-movement">Mouse Movement<a href="#mouse-movement" class="hash-link" aria-label="Direct link to Mouse Movement" title="Direct link to Mouse Movement">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Direct mouse movement with speed control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MouseMoveOptions moveOptions = new MouseMoveOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setMoveMouseDelay(0.5f)  // 0.0 = instant, 1.0 = slow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setPauseAfterEnd(1.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.move(moveOptions, objectCollection);</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scrolling">Scrolling<a href="#scrolling" class="hash-link" aria-label="Direct link to Scrolling" title="Direct link to Scrolling">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Native mouse wheel scrolling</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ScrollOptions scrollDown = new ScrollOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDirection(ScrollOptions.Direction.DOWN)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setScrollSteps(5)  // Number of scroll wheel clicks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setPauseAfterEnd(0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.scroll(scrollDown, objectCollection);</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mouse-button-control">Mouse Button Control<a href="#mouse-button-control" class="hash-link" aria-label="Direct link to Mouse Button Control" title="Direct link to Mouse Button Control">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Press and hold mouse button</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MouseDownOptions pressOptions = new MouseDownOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setPressOptions(MousePressOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .button(MouseButton.LEFT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .pauseAfterMouseDown(0.5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.mouseDown(pressOptions, location);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Release mouse button</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MouseUpOptions releaseOptions = new MouseUpOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setPressOptions(MousePressOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .button(MouseButton.LEFT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.mouseUp(releaseOptions, location);</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="drag-operations">Drag Operations<a href="#drag-operations" class="hash-link" aria-label="Direct link to Drag Operations" title="Direct link to Drag Operations">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DragOptions dragOptions = new DragOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setFromOptions(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setSimilarity(0.9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setToOptions(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setSimilarity(0.9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDragDelay(0.5)  // Hold duration before dragging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action.drag(dragOptions, dragCollection);</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="illustration-system-v110">Illustration System (v1.1.0)<a href="#illustration-system-v110" class="hash-link" aria-label="Direct link to Illustration System (v1.1.0)" title="Direct link to Illustration System (v1.1.0)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="illustrationcontroller-api">IllustrationController API<a href="#illustrationcontroller-api" class="hash-link" aria-label="Direct link to IllustrationController API" title="Direct link to IllustrationController API">​</a></h3>
<p>v1.1.0 provides the IllustrationController for programmatic control:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAutomation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final IllustrationController illustrationController;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void checkIllustration(ActionConfig config, ObjectCollection objects) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Check if action will be illustrated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean willIllustrate = illustrationController.okToIllustrate(config, objects);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Manually create illustration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionResult result = action.find(objects);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean illustrated = illustrationController.illustrateWhenAllowed(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            result, searchRegions, config, objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-properties">Configuration Properties<a href="#configuration-properties" class="hash-link" aria-label="Direct link to Configuration Properties" title="Direct link to Configuration Properties">​</a></h3>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Enable/disable illustrations by action type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-find=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-click=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-drag=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-move=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-highlight=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Screenshot and history settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-history=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-snapshots=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.path=screenshots/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.history-path=history/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.filename=screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.history-filename=hist</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-specific-configurations">Environment-Specific Configurations<a href="#environment-specific-configurations" class="hash-link" aria-label="Direct link to Environment-Specific Configurations" title="Direct link to Environment-Specific Configurations">​</a></h3>
<p>Create different property files for different environments:</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># application-dev.properties - Full debugging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-find=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-click=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-history=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># application-test.properties - Selective</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-find=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-click=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-history=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># application-prod.properties - Minimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-find=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.illustration.draw-click=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.screenshot.save-history=false</span><br></span></code></pre></div></div>
<p>Run with: <code>java -jar app.jar --spring.profiles.active=dev</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-management-in-v110">State Management in v1.1.0<a href="#state-management-in-v110" class="hash-link" aria-label="Direct link to State Management in v1.1.0" title="Direct link to State Management in v1.1.0">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-using-annotations">Recommended: Using Annotations<a href="#recommended-using-annotations" class="hash-link" aria-label="Direct link to Recommended: Using Annotations" title="Direct link to Recommended: Using Annotations">​</a></h3>
<p>The modern approach uses @State and @Transition annotations for automatic registration:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// State with @State annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State(initial = true)  // Marks as initial state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HomeState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage loginButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public HomeState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginButton = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;LoginButton&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;home/login_button&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setFixed(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Transition with @Transition annotation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transition(from = HomeState.class, to = WorldState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HomeToWorldTransition {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final HomeState homeState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean execute() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(homeState.getLoginButton()).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// No manual configuration needed - annotations handle registration!</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="initial-state-verification-v110">Initial State Verification (v1.1.0+)<a href="#initial-state-verification-v110" class="hash-link" aria-label="Direct link to Initial State Verification (v1.1.0+)" title="Direct link to Initial State Verification (v1.1.0+)">​</a></h2>
<p>Modern Brobot provides automatic initial state verification:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-based-recommended">Configuration-Based (Recommended)<a href="#configuration-based-recommended" class="hash-link" aria-label="Direct link to Configuration-Based (Recommended)" title="Direct link to Configuration-Based (Recommended)">​</a></h3>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># application.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.verify-initial-states=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.initial-states=HOME,LOGIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.fallback-search=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.startup.startup-delay=2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="programmatic-usage">Programmatic Usage<a href="#programmatic-usage" class="hash-link" aria-label="Direct link to Programmatic Usage" title="Direct link to Programmatic Usage">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAutomation implements ApplicationRunner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final InitialStateVerifier stateVerifier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void run(ApplicationArguments args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Simple verification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stateVerifier.verify(HomePage.Name.HOME, LoginPage.Name.LOGIN);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Advanced verification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stateVerifier.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withStates(HomePage.Name.HOME, Dashboard.Name.MAIN)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withFallbackSearch(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .activateFirstOnly(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .verify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mock-testing-support">Mock Testing Support<a href="#mock-testing-support" class="hash-link" aria-label="Direct link to Mock Testing Support" title="Direct link to Mock Testing Support">​</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Clean Test Architecture</div><div class="admonitionContent_BuS1"><p>For Spring-based integration tests, see the <a href="/brobot/docs/core-library/testing/test-logging-architecture">Test Logging Architecture</a> which provides:</p><ul>
<li>Factory-based logger creation with clean dependencies</li>
<li>Clean separation of concerns following SRP</li>
<li>Proper initialization order management</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-mock-mode">Understanding Mock Mode<a href="#understanding-mock-mode" class="hash-link" aria-label="Direct link to Understanding Mock Mode" title="Direct link to Understanding Mock Mode">​</a></h4>
<p>Mock mode (<code>brobot.framework.mock=true</code>) enables testing automation logic without GUI interaction:</p>
<ul>
<li><strong>No screen capture</strong> - Patterns are &quot;found&quot; based on configured probabilities</li>
<li><strong>Deterministic testing</strong> - Use 100% probabilities for flow validation</li>
<li><strong>Stochastic testing</strong> - Use variable probabilities for robustness testing</li>
<li><strong>CI/CD friendly</strong> - No GUI dependencies required</li>
</ul>
<p><strong>IMPORTANT</strong>: Starting with Brobot v1.0.0+, ActionHistory is <strong>REQUIRED</strong> for patterns to be found in mock mode. Without ActionHistory, all find operations will fail with &quot;No matches found&quot;. Always configure ActionHistory using the new builder methods when creating StateImages for mock testing.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-mock-mode">Configuring Mock Mode<a href="#configuring-mock-mode" class="hash-link" aria-label="Direct link to Configuring Mock Mode" title="Direct link to Configuring Mock Mode">​</a></h4>
<p><strong>Enable in application.properties:</strong></p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Enable mock mode for testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.framework.mock=true</span><br></span></code></pre></div></div>
<p><strong>Configure state probabilities in state classes (recommended):</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State(initial = true)  // Mark initial state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired(required = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private MockStateManagement mockStateManagement;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 100% for deterministic flow testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final int MOCK_PROBABILITY = 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage loginButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LoginState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginButton = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;login-button&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;LoginButton&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostConstruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void configureMockProbability() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (FrameworkSettings.mock &amp;&amp; mockStateManagement != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mockStateManagement.setStateProbabilities(MOCK_PROBABILITY, &quot;Login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.debug(&quot;Configured Login state mock probability to {}%&quot;, MOCK_PROBABILITY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-state-transitions">Testing State Transitions<a href="#testing-state-transitions" class="hash-link" aria-label="Direct link to Testing State Transitions" title="Direct link to Testing State Transitions">​</a></h4>
<p><strong>Deterministic flow testing (100% probabilities):</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testLoginToHomeTransition() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Configure states for reliable transitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockStateManagement.setStateProbabilities(100, &quot;Login&quot;, &quot;Home&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Initial state should be Login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(stateMemory.getActiveStateNames().contains(&quot;Login&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Navigate to Home</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    boolean success = stateNavigator.openState(&quot;Home&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(success);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Verify transition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(stateMemory.getActiveStateNames().contains(&quot;Home&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Stochastic robustness testing (variable probabilities):</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Test with unreliable element detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stateVerifier.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withState(HomePage.Name.HOME, 70)    // 70% probability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withState(LoginPage.Name.LOGIN, 30)  // 30% probability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .verify();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Test retry logic with intermittent failures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mockStateManagement.setStateProbabilities(50, &quot;UnstableDialog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; MAX_RETRIES; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = action.find(dialogElement);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (result.isSuccess()) break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Thread.sleep(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-state-simulation">Dynamic State Simulation<a href="#dynamic-state-simulation" class="hash-link" aria-label="Direct link to Dynamic State Simulation" title="Direct link to Dynamic State Simulation">​</a></h4>
<p>Simulate state changes during test execution:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void testCompleteWorkflow() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Initial: Login visible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockStateManagement.setStateProbabilities(100, &quot;Login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockStateManagement.setStateProbabilities(0, &quot;Home&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Perform login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stateNavigator.openState(&quot;Home&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Simulate successful login: Home appears, Login disappears</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockStateManagement.setStateProbabilities(0, &quot;Login&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockStateManagement.setStateProbabilities(100, &quot;Home&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Continue with workflow...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-mock-testing">Best Practices for Mock Testing<a href="#best-practices-for-mock-testing" class="hash-link" aria-label="Direct link to Best Practices for Mock Testing" title="Direct link to Best Practices for Mock Testing">​</a></h4>
<ol>
<li><strong>Use 100% probability for flow testing</strong> - Focus on automation logic, not robustness</li>
<li><strong>Set initial states correctly</strong> - Only starting states should have <code>@State(initial = true)</code></li>
<li><strong>Configure probabilities in state classes</strong> - Keep mock behavior with state definition</li>
<li><strong>Clean state between tests</strong> - Clear active states in @AfterEach</li>
<li><strong>Use separate test properties</strong> - Keep mock config separate from production</li>
</ol>
<p>For complete mock mode documentation, see <a href="/brobot/docs/testing/mock-mode-guide">Mock Mode Guide</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="profile-based-testing-architecture">Profile-Based Testing Architecture<a href="#profile-based-testing-architecture" class="hash-link" aria-label="Direct link to Profile-Based Testing Architecture" title="Direct link to Profile-Based Testing Architecture">​</a></h3>
<p>Brobot now supports a cleaner profile-based architecture that eliminates runtime conditionals and provides better separation between test and production environments.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="quick-setup">Quick Setup<a href="#quick-setup" class="hash-link" aria-label="Direct link to Quick Setup" title="Direct link to Quick Setup">​</a></h4>
<p><strong>1. Create <code>application-test.properties</code>:</strong></p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Test profile - automatically enables mock mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.config.import=optional:classpath:brobot-test-defaults.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.framework.mock=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brobot.action.similarity=0.70</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging.level.com.yourapp=DEBUG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># State probabilities for deterministic testing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourapp.mock.state-probabilities=100</span><br></span></code></pre></div></div>
<p><strong>2. Use <code>@ActiveProfiles</code> in tests:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ActiveProfiles(&quot;test&quot;)  // Replaces manual property configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class YourAutomationTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Mock mode automatically enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Test-optimized settings applied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>3. Configure states to use profiles:</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State(initial = true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class YourState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired(required = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private MockStateManagement mockStateManagement;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostConstruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void configureMockMode() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (FrameworkSettings.mock &amp;&amp; mockStateManagement != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mockStateManagement.setStateProbabilities(100, &quot;YourState&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info(&quot;Mock mode configured for YourState&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-over-runtime-delegation">Benefits Over Runtime Delegation<a href="#benefits-over-runtime-delegation" class="hash-link" aria-label="Direct link to Benefits Over Runtime Delegation" title="Direct link to Benefits Over Runtime Delegation">​</a></h4>
<p>The old approach used runtime checks:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// OLD - Runtime delegation (still supported but not recommended)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (FrameworkSettings.mock) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return mockExecution();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return liveExecution();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The new profile-based approach uses dependency injection:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// NEW - Profile-based (recommended)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Profile(&quot;test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MockExecutor implements Executor { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Profile(&quot;!test&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LiveExecutor implements Executor { }</span><br></span></code></pre></div></div>
<p>Benefits:</p>
<ul>
<li><strong>No runtime overhead</strong> - No conditional checks in production</li>
<li><strong>Clean separation</strong> - Test and production code clearly separated</li>
<li><strong>Automatic configuration</strong> - Settings applied based on environment</li>
<li><strong>Better IDE support</strong> - Profile-aware code completion</li>
<li><strong>Easier testing</strong> - Guaranteed mock mode in tests</li>
</ul>
<p>For complete profile documentation, see <a href="/brobot/docs/testing/profile-based-architecture">Profile-Based Architecture Guide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="color-finding-and-motion-detection">Color Finding and Motion Detection<a href="#color-finding-and-motion-detection" class="hash-link" aria-label="Direct link to Color Finding and Motion Detection" title="Direct link to Color Finding and Motion Detection">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="color-finding-with-colorfindoptions">Color Finding with ColorFindOptions<a href="#color-finding-with-colorfindoptions" class="hash-link" aria-label="Direct link to Color Finding with ColorFindOptions" title="Direct link to Color Finding with ColorFindOptions">​</a></h3>
<p>Brobot supports three color analysis strategies:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 1. KMEANS - Find dominant colors using k-means clustering</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColorFindOptions kmeansColor = new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setColorStrategy(ColorFindOptions.Color.KMEANS)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setKmeans(3)  // Find 3 dominant colors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDiameter(5) // Minimum cluster size</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. MU - Use mean color statistics (default)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColorFindOptions meanColor = new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setColorStrategy(ColorFindOptions.Color.MU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDiameter(5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.95)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 3. CLASSIFICATION - Multi-class pixel classification</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColorFindOptions classification = new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setColorStrategy(ColorFindOptions.Color.CLASSIFICATION)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nested-vs-confirmed-finds-with-actionchainoptions">Nested vs Confirmed Finds with ActionChainOptions<a href="#nested-vs-confirmed-finds-with-actionchainoptions" class="hash-link" aria-label="Direct link to Nested vs Confirmed Finds with ActionChainOptions" title="Direct link to Nested vs Confirmed Finds with ActionChainOptions">​</a></h3>
<p><strong>Key Difference</strong>:</p>
<ul>
<li><strong>NESTED</strong>: Each action searches WITHIN the results of the previous action</li>
<li><strong>CONFIRM</strong>: Each action validates the results of the previous action; returns original match if confirmed</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nested-finds-example">Nested Finds Example<a href="#nested-finds-example" class="hash-link" aria-label="Direct link to Nested Finds Example" title="Direct link to Nested Finds Example">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Find yellow bars: first find all bars, then find yellow within those bars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PatternFindOptions findBars = new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setStrategy(PatternFindOptions.Strategy.ALL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.7)  // Lower to catch all bars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColorFindOptions findYellow = new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setColorStrategy(ColorFindOptions.Color.MU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDiameter(10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionChainOptions nestedFind = new ActionChainOptions.Builder(findBars)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setStrategy(ActionChainOptions.ChainingStrategy.NESTED)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(findYellow)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Result: Returns yellow regions found INSIDE the bar patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Action action = // obtain from Spring context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult yellowRegions = action.perform(nestedFind, objectCollection);</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="confirmed-finds-example">Confirmed Finds Example<a href="#confirmed-finds-example" class="hash-link" aria-label="Direct link to Confirmed Finds Example" title="Direct link to Confirmed Finds Example">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Confirm buttons by checking they have the right color</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PatternFindOptions findButtons = new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setStrategy(PatternFindOptions.Strategy.ALL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ColorFindOptions confirmColor = new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setColorStrategy(ColorFindOptions.Color.MU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.85)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionChainOptions confirmedFind = new ActionChainOptions.Builder(findButtons)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setStrategy(ActionChainOptions.ChainingStrategy.CONFIRM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .then(confirmColor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Result: Returns original button matches that passed color confirmation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult confirmedButtons = action.perform(confirmedFind, objectCollection);</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="motion-detection-with-motionfindoptions">Motion Detection with MotionFindOptions<a href="#motion-detection-with-motionfindoptions" class="hash-link" aria-label="Direct link to Motion Detection with MotionFindOptions" title="Direct link to Motion Detection with MotionFindOptions">​</a></h3>
<p>Motion detection requires 3 scenes to determine direction of movement:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Configure motion detection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MotionFindOptions motionOptions = new MotionFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setMaxMovement(150)     // Max pixels object can move between scenes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setMinArea(100)         // Filter out small movements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setMaxMatchesToActOn(5) // Track up to 5 moving objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.75)     // Match threshold across scenes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Three ways to provide scenes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 1. From files (mock mode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Configure in application.properties:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// brobot.core.mock=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// brobot.screenshot.path=screenshots/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ObjectCollection emptyCollection = new ObjectCollection.Builder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult motionFromFiles = action.perform(motionOptions, emptyCollection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. From Brobot images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ObjectCollection scenes = new ObjectCollection.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withScenes(scene1, scene2, scene3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult motionFromImages = action.perform(motionOptions, scenes);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 3. From live screen (mock=false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// brobot.core.mock=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult motionFromScreen = action.perform(motionOptions, emptyCollection);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Access results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;Match&gt; movingObjects = motionFromScreen.getMatchList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SceneAnalysisCollection sceneAnalysis = motionFromScreen.getSceneAnalysis();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="histogram-finding">Histogram Finding<a href="#histogram-finding" class="hash-link" aria-label="Direct link to Histogram Finding" title="Direct link to Histogram Finding">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HistogramFindOptions histogramFind = new HistogramFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setSimilarity(0.8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setBinOptions(HSVBinOptions.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .hueBins(90)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .saturationBins(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .valueBins(1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setMaxMatchesToActOn(5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="practical-color--pattern-example">Practical Color + Pattern Example<a href="#practical-color--pattern-example" class="hash-link" aria-label="Direct link to Practical Color + Pattern Example" title="Direct link to Practical Color + Pattern Example">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Find red error buttons using pattern + color confirmation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean clickErrorButton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Define the chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionChainOptions findRedButton = ActionChainBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .of(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setStrategy(PatternFindOptions.Strategy.ALL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setSimilarity(0.7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .then(new ColorFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setColorStrategy(ColorFindOptions.Color.MU)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setSimilarity(0.9)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .withStrategy(ActionChainOptions.ChainingStrategy.CONFIRM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Execute find</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionResult result = action.perform(findRedButton, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        new ObjectCollection.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withImages(errorButtonImage)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Click if found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (result.isSuccess() &amp;&amp; !result.getMatchList().isEmpty()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return action.click(result.getMatchList().get(0)).isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="actionhistory-for-integration-testing">ActionHistory for Integration Testing<a href="#actionhistory-for-integration-testing" class="hash-link" aria-label="Direct link to ActionHistory for Integration Testing" title="Direct link to ActionHistory for Integration Testing">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h3>
<p>ActionHistory is Brobot&#x27;s core component for mock testing and probabilistic automation. It records action execution patterns over time, enabling realistic testing without the target application.</p>
<p><strong>New in v1.0.0+</strong>: ActionHistory can now be configured directly in the StateImage builder using the new <code>withActionHistory()</code> methods, eliminating the need for separate initialization methods.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="modern-actionhistory-setup-v100">Modern ActionHistory Setup (v1.0.0+)<a href="#modern-actionhistory-setup-v100" class="hash-link" aria-label="Direct link to Modern ActionHistory Setup (v1.0.0+)" title="Direct link to Modern ActionHistory Setup (v1.0.0+)">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="direct-builder-integration">Direct Builder Integration<a href="#direct-builder-integration" class="hash-link" aria-label="Direct link to Direct Builder Integration" title="Direct link to Direct Builder Integration">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.state.StateImage;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.element.Region;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.testing.mock.history.MockActionHistoryFactory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.testing.mock.history.MockActionHistoryBuilder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// NEW: ActionHistory configured directly in builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage loginButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LoginState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Use factory method for common UI patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginButton = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;login/button&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;LoginButton&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withActionHistory(MockActionHistoryFactory.reliableButton(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                new Region(500, 400, 100, 40)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // No separate initializeActionHistory() method needed!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-mockactionhistorybuilder-for-custom-configurations">Using MockActionHistoryBuilder for Custom Configurations<a href="#using-mockactionhistorybuilder-for-custom-configurations" class="hash-link" aria-label="Direct link to Using MockActionHistoryBuilder for Custom Configurations" title="Direct link to Using MockActionHistoryBuilder for Custom Configurations">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class CustomState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage customElement;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public CustomState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        customElement = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;custom/element&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;CustomElement&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withActionHistory(MockActionHistoryBuilder.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .successRate(0.85)          // 85% success rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .matchRegion(new Region(50, 100, 150, 75))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .minSimilarity(0.80)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .maxSimilarity(0.95)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .minDuration(20)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .maxDuration(100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .recordCount(30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="factory-methods-for-common-ui-patterns">Factory Methods for Common UI Patterns<a href="#factory-methods-for-common-ui-patterns" class="hash-link" aria-label="Direct link to Factory Methods for Common UI Patterns" title="Direct link to Factory Methods for Common UI Patterns">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Different factory methods for different UI elements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage button = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;ok-button&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.reliableButton(region))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage textField = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;search-field&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.dynamicTextField(region))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage loader = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;loading&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.loadingIndicator(region))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage menu = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;file-menu&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.menuItem(region))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="screen-position-helpers">Screen Position Helpers<a href="#screen-position-helpers" class="hash-link" aria-label="Direct link to Screen Position Helpers" title="Direct link to Screen Position Helpers">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.element.Positions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Element at center of screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage centerModal = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;modal&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.forScreenPosition(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Positions.Name.MIDDLEMIDDLE, 400, 300))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Element in lower-left corner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage chatWindow = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;chat&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.lowerLeftElement(300, 200))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-actionhistory-setup-pre-v100">Legacy ActionHistory Setup (Pre-v1.0.0)<a href="#legacy-actionhistory-setup-pre-v100" class="hash-link" aria-label="Direct link to Legacy ActionHistory Setup (Pre-v1.0.0)" title="Direct link to Legacy ActionHistory Setup (Pre-v1.0.0)">​</a></h3>
<p>For reference, here&#x27;s the traditional approach (still supported but not recommended):</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.action.ActionHistory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.action.ActionRecord;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.action.basic.find.PatternFindOptions;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.match.Match;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// OLD: Separate initialization method required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LegacyState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final StateImage loginButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LegacyState() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loginButton = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .addPatterns(&quot;login/button&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .setName(&quot;LoginButton&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Old approach: separate method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initializeActionHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void initializeActionHistory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionHistory history = new ActionHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Manual record creation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 100; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean success = i &lt; 90;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ActionRecord record = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionConfig(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .setSimilarity(0.85)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .addMatch(success ? new Match.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .setRegion(500, 400, 100, 40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .setSimScore(0.85 + Math.random() * 0.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .build() : null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionSuccess(success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setDuration(success ? 200 : 5000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            history.addSnapshot(record);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Manual setting on each pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (Pattern pattern : loginButton.getPatterns()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            pattern.setMatchHistory(history);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recording-different-action-types">Recording Different Action Types<a href="#recording-different-action-types" class="hash-link" aria-label="Direct link to Recording Different Action Types" title="Direct link to Recording Different Action Types">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Click actions with timing data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionRecord clickRecord = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionConfig(new ClickOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setClickType(ClickOptions.Type.DOUBLE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setNumberOfClicks(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addMatch(new Match.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setRegion(150, 250, 40, 20)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setSimScore(0.92)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionSuccess(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDuration(250)  // milliseconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Type actions with text capture</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionRecord typeRecord = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionConfig(new TypeOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setPauseBeforeBegin(200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setText(&quot;user@example.com&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionSuccess(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Vanish actions for element disappearance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionRecord vanishRecord = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionConfig(new VanishOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setWaitTime(5.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionSuccess(true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setDuration(3500)  // Vanished after 3.5 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-test-configuration">Integration Test Configuration<a href="#integration-test-configuration" class="hash-link" aria-label="Direct link to Integration Test Configuration" title="Direct link to Integration Test Configuration">​</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># application-test.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">brobot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">use-real-screenshots</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">testing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deterministic</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Use seeded random for reproducible tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">seed</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12345</span><br></span></code></pre></div></div>
<p><strong>ActionHistory Persistence Options</strong>:</p>
<ol>
<li>
<p><strong>In Java Projects (Library-based)</strong>:</p>
<ul>
<li>Use <code>ActionHistoryJsonConverter</code> from the library for serialize/deserialize</li>
<li>Implement your own persistence layer (as shown above)</li>
<li>Full control over when and how to save histories</li>
<li>Best for: Custom automation projects, integration tests</li>
</ul>
</li>
<li>
<p><strong>In Brobot Runner Application</strong>:</p>
<ul>
<li>Automatic recording during execution</li>
<li>GUI for viewing and managing histories</li>
<li>Export/import functionality built-in</li>
<li>Best for: Interactive development, visual debugging</li>
</ul>
</li>
</ol>
<p>To use recorded data from the Runner in your Java tests:</p>
<ol>
<li><strong>Record sessions</strong> in the Runner during live automation</li>
<li><strong>Export sessions</strong> as JSON files from the Runner UI</li>
<li><strong>Import in tests</strong> using ObjectMapper or custom loaders</li>
<li><strong>Apply to StateImages</strong> for realistic mock testing</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-integration-tests-with-actionhistory">Writing Integration Tests with ActionHistory<a href="#writing-integration-tests-with-actionhistory" class="hash-link" aria-label="Direct link to Writing Integration Tests with ActionHistory" title="Direct link to Writing Integration Tests with ActionHistory">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@TestPropertySource(properties = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;brobot.mock.enabled=true&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;brobot.testing.deterministic=true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WorkflowIntegrationTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private LoginState loginState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Action action;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void testLoginWorkflowWithHistory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Pre-populate with realistic data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        prepareLoginHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Execute workflow - uses ActionHistory for mocking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean success = performLogin();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Verify based on historical success rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertTrue(success || getRetryCount() &gt; 0, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Should succeed or retry based on history&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void prepareLoginHistory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionHistory history = loginState.getLoginButton().getActionHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Add time-based patterns (morning = higher success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LocalDateTime morning = LocalDateTime.now().withHour(9);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        LocalDateTime evening = LocalDateTime.now().withHour(18);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Morning: 95% success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addTimeBasedRecords(history, morning, 0.95, 20);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Evening: 75% success (system load)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addTimeBasedRecords(history, evening, 0.75, 20);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void addTimeBasedRecords(ActionHistory history, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     LocalDateTime time, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     double successRate, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     int count) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; count; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean success = Math.random() &lt; successRate;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ActionRecord record = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionConfig(new PatternFindOptions.Builder().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionSuccess(success)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setTimestamp(time.plusMinutes(i))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setDuration(success ? 200 : 5000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            history.addSnapshot(record);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-specific-actionhistory">State-Specific ActionHistory<a href="#state-specific-actionhistory" class="hash-link" aria-label="Direct link to State-Specific ActionHistory" title="Direct link to State-Specific ActionHistory">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Different success patterns for different states</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StateAwareActionHistory {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setupStateSpecificHistory(StateImage image) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionHistory history = new ActionHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Login state: high reliability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Long loginStateId = 1L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addStateRecords(history, loginStateId, 0.95, 50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Error state: lower reliability</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Long errorStateId = 2L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addStateRecords(history, errorStateId, 0.60, 50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        image.setActionHistory(history);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void addStateRecords(ActionHistory history, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Long stateId, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 double successRate, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 int count) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; count; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ActionRecord record = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionConfig(new PatternFindOptions.Builder().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setStateId(stateId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionSuccess(Math.random() &lt; successRate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            history.addSnapshot(record);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Query state-specific records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Optional&lt;ActionRecord&gt; getStateSnapshot(ActionHistory history, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                   Long stateId) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PatternFindOptions config = new PatternFindOptions.Builder().build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return history.getRandomSnapshot(config, stateId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="saving-and-loading-actionhistory-in-java-projects">Saving and Loading ActionHistory in Java Projects<a href="#saving-and-loading-actionhistory-in-java-projects" class="hash-link" aria-label="Direct link to Saving and Loading ActionHistory in Java Projects" title="Direct link to Saving and Loading ActionHistory in Java Projects">​</a></h3>
<p>The Brobot library now includes comprehensive ActionHistory utilities in the <code>io.github.jspinak.brobot.tools.actionhistory</code> package:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-library-classes">Built-in Library Classes<a href="#built-in-library-classes" class="hash-link" aria-label="Direct link to Built-in Library Classes" title="Direct link to Built-in Library Classes">​</a></h4>
<p><strong>ActionHistoryPersistence</strong> - Core persistence functionality:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.actionhistory.ActionHistoryPersistence;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.action.ActionHistory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.model.element.Pattern;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ActionHistoryPersistence persistence;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Save ActionHistory to JSON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persistence.saveToFile(history, &quot;my-history.json&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Load ActionHistory from JSON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionHistory loaded = persistence.loadFromFile(&quot;my-history.json&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Save from Pattern with session metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persistence.saveSessionHistory(pattern, &quot;session-name&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Capture current execution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persistence.captureCurrentExecution(result, pattern, config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Batch load multiple histories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, ActionHistory&gt; histories = persistence.loadAllHistories();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Clean old history files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int deleted = persistence.cleanOldHistories(&quot;histories&quot;, 30); // Keep 30 days</span><br></span></code></pre></div></div>
<p><strong>RecordingActionWrapper</strong> - Automatic recording during execution:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.actionhistory.RecordingActionWrapper;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private RecordingActionWrapper recorder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Start recording session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recorder.startSession(&quot;test-session&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Actions are automatically recorded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionResult result = recorder.find(stateImage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result = recorder.click(stateImage);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// End session and save all histories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recorder.endSession(&quot;test-session&quot;, patterns);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Get recording statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Integer&gt; stats = recorder.getRecordingStatistics();</span><br></span></code></pre></div></div>
<p><strong>ActionHistoryExporter</strong> - Export to various formats:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.actionhistory.ActionHistoryExporter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ActionHistoryExporter exporter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Export to CSV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exporter.exportToCSV(history, &quot;report.csv&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Export to HTML with visualizations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exporter.exportToHTML(history, &quot;report.html&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Generate summary statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Map&lt;String, Object&gt; summary = exporter.generateSummary(history);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Filter and export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionHistory filtered = exporter.filterHistory(history, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    true, // successOnly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0,    // minDuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    5000  // maxDuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Batch export multiple histories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exporter.batchExport(histories, &quot;combined.html&quot;, ExportFormat.HTML);</span><br></span></code></pre></div></div>
<p><strong>PerformanceValidator</strong> - Validate performance characteristics:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import io.github.jspinak.brobot.tools.actionhistory.PerformanceValidator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private PerformanceValidator validator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Validate with default thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ValidationResult result = validator.validate(history);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!result.isValid()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.error(&quot;Performance issues: {}&quot;, result.getErrors());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Custom validation config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ValidationConfig config = ValidationConfig.getDefault()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withMinSuccessRate(90.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withMaxAverageDuration(1000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ValidationResult custom = validator.validate(history, config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Compare baseline vs current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ComparisonResult comparison = validator.compare(baselineHistory, currentHistory);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (comparison.isRegression()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.warn(&quot;Performance regression detected: {}&quot;, comparison.getIssues());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recording-actionhistory-during-live-automation">Recording ActionHistory During Live Automation<a href="#recording-actionhistory-during-live-automation" class="hash-link" aria-label="Direct link to Recording ActionHistory During Live Automation" title="Direct link to Recording ActionHistory During Live Automation">​</a></h3>
<p>The library&#x27;s <code>RecordingActionWrapper</code> class automatically captures ActionHistory during automation runs. Use it in your transitions and actions:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Use in transitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transition(from = HomeState.class, to = WorldState.class)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequiredArgsConstructor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RecordedTransition {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private RecordingActionWrapper recorder;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final HomeState homeState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean execute() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Start recording session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        recorder.startSession(&quot;transition-session&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // All actions are automatically recorded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionResult result = recorder.click(homeState.getButton());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // End session and save</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        recorder.endSession(&quot;transition-session&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Arrays.asList(homeState.getButton().getPatterns()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return result.isSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exportimport-between-projects">Export/Import Between Projects<a href="#exportimport-between-projects" class="hash-link" aria-label="Direct link to Export/Import Between Projects" title="Direct link to Export/Import Between Projects">​</a></h3>
<p>Use the library&#x27;s <code>ActionHistoryExporter</code> for sharing histories between projects:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ActionHistoryExporter exporter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private ActionHistoryPersistence persistence;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Export multiple histories for sharing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void exportForProject(String projectName) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Load all histories from the project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, ActionHistory&gt; histories = persistence.loadAllHistories();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Batch export with metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exporter.batchExport(histories, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String.format(&quot;%s-export.html&quot;, projectName),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionHistoryExporter.ExportFormat.HTML);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Also export as CSV for analysis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exporter.batchExport(histories,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String.format(&quot;%s-export.csv&quot;, projectName),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionHistoryExporter.ExportFormat.CSV);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Generate summary report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (Map.Entry&lt;String, ActionHistory&gt; entry : histories.entrySet()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, Object&gt; summary = exporter.generateSummary(entry.getValue());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;History {}: {} actions, {:.1f}% success rate&quot;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            entry.getKey(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            summary.get(&quot;totalActions&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            summary.get(&quot;successRate&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-testing-with-actionhistory">Performance Testing with ActionHistory<a href="#performance-testing-with-actionhistory" class="hash-link" aria-label="Direct link to Performance Testing with ActionHistory" title="Direct link to Performance Testing with ActionHistory">​</a></h3>
<p>Use the library&#x27;s <code>PerformanceValidator</code> for comprehensive performance testing:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private PerformanceValidator validator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void validateActionPerformance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ActionHistory performanceHistory = loadPerformanceHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Validate with custom thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PerformanceValidator.ValidationConfig config = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PerformanceValidator.ValidationConfig.getDefault()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withMinSuccessRate(85.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withMaxAverageDuration(1500)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withMaxDuration(3000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PerformanceValidator.ValidationResult result = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        validator.validate(performanceHistory, config);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Assert no performance issues</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertTrue(result.isValid(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Performance issues detected: &quot; + result.getErrors());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Check for anomalies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(0, result.getAnomalyCount(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Anomalies detected: &quot; + result.getAnomalies());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Analyze timing patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DoubleSummaryStatistics stats = performanceHistory.getSnapshots().stream()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .filter(ActionRecord::isActionSuccess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .mapToDouble(ActionRecord::getDuration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .summaryStatistics();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Assert performance requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertTrue(stats.getAverage() &lt; 500, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Average response time should be under 500ms&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertTrue(stats.getMax() &lt; 2000, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Max response time should be under 2s&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Check success rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double successRate = performanceHistory.getTimesFound() * 100.0 / </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           performanceHistory.getTimesSearched();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertTrue(successRate &gt; 85, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;Success rate should be above 85%&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ActionHistory createPerformanceHistory() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ActionHistory history = new ActionHistory();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Random random = new Random(42);  // Deterministic</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Simulate performance distribution</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int i = 0; i &lt; 1000; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 90% fast responses, 10% slow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            boolean fast = random.nextDouble() &lt; 0.9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            long duration = fast ? </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                100 + random.nextInt(400) :  // 100-500ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                1000 + random.nextInt(4000); // 1-5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ActionRecord record = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionConfig(new PatternFindOptions.Builder().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setDuration(duration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setActionSuccess(duration &lt; 2000)  // Timeout at 2s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            history.addSnapshot(record);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return history;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-actionhistory">Best Practices for ActionHistory<a href="#best-practices-for-actionhistory" class="hash-link" aria-label="Direct link to Best Practices for ActionHistory" title="Direct link to Best Practices for ActionHistory">​</a></h3>
<ol>
<li><strong>Realistic Data Generation</strong>: Create patterns that reflect real-world behavior</li>
<li><strong>Deterministic Testing</strong>: Use seeded random for reproducible tests</li>
<li><strong>State-Aware Patterns</strong>: Different states should have different success patterns</li>
<li><strong>Time-Based Variations</strong>: Model performance changes throughout the day</li>
<li><strong>Gradual Degradation</strong>: Simulate system degradation over time</li>
<li><strong>Regular Persistence</strong>: Save histories periodically during long automation runs</li>
<li><strong>Version Control</strong>: Include history JSON files in test resources for regression testing</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="actionhistory-utility-classes">ActionHistory Utility Classes<a href="#actionhistory-utility-classes" class="hash-link" aria-label="Direct link to ActionHistory Utility Classes" title="Direct link to ActionHistory Utility Classes">​</a></h3>
<p>The Brobot library now includes comprehensive ActionHistory utilities in the <code>io.github.jspinak.brobot.tools.actionhistory</code> package:</p>
<ol>
<li><strong>ActionHistoryPersistence</strong> - Standardized save/load operations with JSON serialization</li>
<li><strong>RecordingActionWrapper</strong> - Automatic recording during execution with session management</li>
<li><strong>ActionHistoryExporter</strong> - Export to CSV/HTML formats with summary statistics</li>
<li><strong>PerformanceValidator</strong> - Performance analysis, anomaly detection, and regression testing</li>
</ol>
<p>These classes provide production-ready functionality for capturing, persisting, and analyzing automation performance.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-from-legacy-actionoptions">Migration from Legacy ActionOptions<a href="#migration-from-legacy-actionoptions" class="hash-link" aria-label="Direct link to Migration from Legacy ActionOptions" title="Direct link to Migration from Legacy ActionOptions">​</a></h3>
<p>If you have existing code using the deprecated <code>ActionOptions</code> API:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Legacy (deprecated)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionRecord legacyRecord = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionOptions(new ActionOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setAction(ActionOptions.Action.FIND)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setFind(ActionOptions.Find.BEST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Modern (use this)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ActionRecord modernRecord = new ActionRecord.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .setActionConfig(new PatternFindOptions.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .setStrategy(PatternFindOptions.Strategy.BEST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<p>For detailed migration instructions, see the <a href="/brobot/docs/testing/actionhistory-integration-testing">ActionHistory Migration Guide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="screen-adaptive-region-building">Screen-Adaptive Region Building<a href="#screen-adaptive-region-building" class="hash-link" aria-label="Direct link to Screen-Adaptive Region Building" title="Direct link to Screen-Adaptive Region Building">​</a></h2>
<p>The Brobot library now includes enhanced <code>RegionBuilder</code> with Position integration for creating screen-size aware regions that adapt to different resolutions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="position-based-region-building">Position-Based Region Building<a href="#position-based-region-building" class="hash-link" aria-label="Direct link to Position-Based Region Building" title="Direct link to Position-Based Region Building">​</a></h3>
<p>The <code>RegionBuilder</code> class now integrates with <code>Position</code> and <code>Positions.Name</code> for intuitive region placement:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import static io.github.jspinak.brobot.model.element.Positions.Name.*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Position a region at 70% width, 30% height of screen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region customPos = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSize(200, 150)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withPosition(new Position(0.7, 0.3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Use named positions for quick placement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region topRight = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSize(300, 200)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withPosition(TOPRIGHT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Position relative to another region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region tooltip = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSize(200, 50)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .positionRelativeTo(dialogRegion, TOPMIDDLE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .adjustY(-10)  // 10px gap above</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Create centered dialog with margins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region dialog = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withScreenPercentageSize(0.6, 0.4)  // 60% width, 40% height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .centerOnScreen()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-positioning-features">Advanced Positioning Features<a href="#advanced-positioning-features" class="hash-link" aria-label="Direct link to Advanced Positioning Features" title="Direct link to Advanced Positioning Features">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Custom anchor points</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region customAnchor = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSize(100, 100)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withAnchor(new Position(0.75, 0.25))  // Custom anchor at 75% width, 25% height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Named anchor helpers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region bottomCorner = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSize(120, 40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .bottomRight()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .adjustX(-20)  // 20px margin from edges</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .adjustY(-20)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Position chains for complex layouts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region sidebar = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withScreenPercentageSize(0.2, 1.0)  // 20% width, full height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .leftCenter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region content = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .positionRelativeTo(sidebar, MIDDLERIGHT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withScreenPercentageSize(0.8, 1.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="precise-positioning-and-flexibility">Precise Positioning and Flexibility<a href="#precise-positioning-and-flexibility" class="hash-link" aria-label="Direct link to Precise Positioning and Flexibility" title="Direct link to Precise Positioning and Flexibility">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Direct pixel coordinates for precise placement</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region button = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withPosition(1800, 1000)  // Exact pixel position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withSize(100, 50)  // Exact size in pixels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Percentage-based regions for flexibility</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Region searchArea = Region.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withScreenPercentage(0.1, 0.1, 0.8, 0.3)  // 10% margins, 80% width, 30% height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-with-position-class">Integration with Position Class<a href="#integration-with-position-class" class="hash-link" aria-label="Direct link to Integration with Position Class" title="Direct link to Integration with Position Class">​</a></h3>
<p>The <code>Position</code> class provides percentage-based coordinates (0.0 to 1.0) that work seamlessly with <code>RegionBuilder</code>:</p>
<ul>
<li><strong>Positions.Name enum</strong>: Predefined positions like <code>TOPLEFT</code>, <code>MIDDLEMIDDLE</code>, <code>BOTTOMRIGHT</code></li>
<li><strong>Custom positions</strong>: Any percentage-based position using <code>new Position(x, y)</code></li>
<li><strong>Position math</strong>: Add offsets and scale positions for dynamic layouts</li>
</ul>
<p>This integration makes it easy to create regions that adapt to different screen sizes while maintaining their relative positions and proportions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="logging-and-diagnostics">Logging and Diagnostics<a href="#logging-and-diagnostics" class="hash-link" aria-label="Direct link to Logging and Diagnostics" title="Direct link to Logging and Diagnostics">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integrated-logging-system">Integrated Logging System<a href="#integrated-logging-system" class="hash-link" aria-label="Direct link to Integrated Logging System" title="Direct link to Integrated Logging System">​</a></h3>
<p>Brobot v1.1.0+ includes a unified logging system that combines multiple logging approaches for comprehensive diagnostics:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># application.yml - Configure logging levels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">brobot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">logging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">verbosity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> VERBOSE        </span><span class="token comment" style="color:#999988;font-style:italic"># QUIET, NORMAL, or VERBOSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">console</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">capture-enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Prevent duplicate output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">console</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">actions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> VERBOSE         </span><span class="token comment" style="color:#999988;font-style:italic"># Maximum diagnostic information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">report-highlight</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">show-search-regions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Component logging levels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">logging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">io.github.jspinak.brobot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DEBUG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">io.github.jspinak.brobot.logging.DiagnosticLogger</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DEBUG</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagnosticlogger-component">DiagnosticLogger Component<a href="#diagnosticlogger-component" class="hash-link" aria-label="Direct link to DiagnosticLogger Component" title="Direct link to DiagnosticLogger Component">​</a></h3>
<p>The <code>DiagnosticLogger</code> provides specialized pattern matching diagnostics that integrate with both <code>ConsoleReporter</code> and <code>BrobotLogger</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private DiagnosticLogger diagnosticLogger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Automatic logging in ScenePatternMatcher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// You get output like:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// [SEARCH] Pattern: &#x27;login-button&#x27; (64x32) | Similarity: 0.70 | Scene: 1920x1080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// [FOUND #1] Score: 0.852 at (450, 320)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// [RESULT] 2 matches for &#x27;login-button&#x27; | Best score: 0.852</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verbosity-levels">Verbosity Levels<a href="#verbosity-levels" class="hash-link" aria-label="Direct link to Verbosity Levels" title="Direct link to Verbosity Levels">​</a></h3>
<p><strong>QUIET Mode</strong>: Minimal output</p>
<ul>
<li>Only ✓/✗ symbols for success/failure</li>
<li>No detailed diagnostics</li>
</ul>
<p><strong>NORMAL Mode</strong>: Concise diagnostics</p>
<ul>
<li>[SEARCH], [RESULT], [FOUND] prefixes</li>
<li>Basic match information</li>
<li>Image analysis for failures</li>
</ul>
<p><strong>VERBOSE Mode</strong>: Maximum information</p>
<ul>
<li>All NORMAL mode output</li>
<li>Pattern caching information</li>
<li>Detailed metadata via BrobotLogger</li>
<li>Similarity threshold analysis</li>
<li>Performance metrics</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="failed-match-analysis">Failed Match Analysis<a href="#failed-match-analysis" class="hash-link" aria-label="Direct link to Failed Match Analysis" title="Direct link to Failed Match Analysis">​</a></h3>
<p>When patterns aren&#x27;t found, the system provides comprehensive diagnostics:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[RESULT] NO MATCHES for &#x27;submit-button&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [IMAGE ANALYSIS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Pattern: 128x48 type=RGB bytes=24KB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Pattern content: 2.3% black, 45.6% white, avg RGB=(127,189,210)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Scene: 1920x1080 type=RGB bytes=8MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Scene content: 95.2% black, 0.1% white, avg RGB=(5,5,5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WARNING: Scene is mostly BLACK - possible capture failure!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [SIMILARITY ANALYSIS]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Threshold 0.9: No match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Threshold 0.8: No match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Threshold 0.7: No match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Threshold 0.6: FOUND with score 0.624</span><br></span></code></pre></div></div>
<p>This immediately identifies:</p>
<ol>
<li>Screen capture failures (black/white screens)</li>
<li>Similarity threshold issues</li>
<li>Image content problems</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-caching">Pattern Caching<a href="#pattern-caching" class="hash-link" aria-label="Direct link to Pattern Caching" title="Direct link to Pattern Caching">​</a></h3>
<p>The system now caches SikuliX Pattern objects to eliminate redundant creation:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Pattern.java includes caching</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@JsonIgnore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private transient org.sikuli.script.Pattern cachedSikuliPattern = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// In VERBOSE mode, you&#x27;ll see:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// [Pattern.sikuli()] Using CACHED SikuliX Pattern for: login-button</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// [Pattern.sikuli()] Creating NEW SikuliX Pattern for: login-button</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="debug-image-saving">Debug Image Saving<a href="#debug-image-saving" class="hash-link" aria-label="Direct link to Debug Image Saving" title="Direct link to Debug Image Saving">​</a></h3>
<p>For patterns with &quot;prompt&quot; in the name, debug images are automatically saved:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[DEBUG] Saved pattern image to: debug_images/pattern_prompt-button.png</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[DEBUG] Saved scene image to: debug_images/scene_current.png</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-diagnosticlogger-in-custom-code">Using DiagnosticLogger in Custom Code<a href="#using-diagnosticlogger-in-custom-code" class="hash-link" aria-label="Direct link to Using DiagnosticLogger in Custom Code" title="Direct link to Using DiagnosticLogger in Custom Code">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MyAutomation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired(required = false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DiagnosticLogger diagnosticLogger;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void debugPatternMatching(Pattern pattern, Scene scene) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (diagnosticLogger != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Log search attempt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diagnosticLogger.logPatternSearch(pattern, scene, 0.7);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Log results</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diagnosticLogger.logPatternResult(pattern, matchCount, bestScore);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Analyze failures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diagnosticLogger.logImageAnalysis(patternImg, sceneImg, pattern.getName());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Test similarity thresholds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            double[] thresholds = {0.9, 0.8, 0.7, 0.6, 0.5};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diagnosticLogger.logSimilarityAnalysis(pattern.getName(), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                thresholds, foundThreshold, foundScore);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="best-practices-for-logging">Best Practices for Logging<a href="#best-practices-for-logging" class="hash-link" aria-label="Direct link to Best Practices for Logging" title="Direct link to Best Practices for Logging">​</a></h3>
<ol>
<li><strong>Development</strong>: Use VERBOSE for maximum information</li>
<li><strong>Testing</strong>: Use NORMAL for concise but useful output</li>
<li><strong>Production</strong>: Use QUIET to minimize overhead</li>
<li><strong>Debugging Pattern Matching</strong>: Always use VERBOSE to see:<!-- -->
<ul>
<li>Pattern caching behavior</li>
<li>Similarity scores for all matches</li>
<li>Image content analysis</li>
<li>Progressive threshold testing</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unified-logging-system">Unified Logging System<a href="#unified-logging-system" class="hash-link" aria-label="Direct link to Unified Logging System" title="Direct link to Unified Logging System">​</a></h3>
<p>For complete documentation on the unified logging system, see:</p>
<ul>
<li><a href="/brobot/docs/core-library/guides/unified-logging-system">Unified Logging System Guide</a></li>
<li>Covers BrobotLogger, ConsoleReporter, and ActionLogger integration</li>
<li>Session management and context propagation</li>
<li>Performance tracking and metrics</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2>
<p>Modern Brobot development emphasizes:</p>
<ul>
<li>Clean, readable code with minimal boilerplate</li>
<li>Type safety through StateEnum and proper generics</li>
<li>Dependency injection with Spring Boot</li>
<li>Fluent APIs and method chaining</li>
<li><strong>ConditionalActionChain for elegant UI interactions with proper sequential composition</strong></li>
<li><strong>ActionHistory for probabilistic mock testing - NOW WITH BUILDER INTEGRATION (v1.0.0+)</strong></li>
<li><strong>Screen-adaptive RegionBuilder with Position integration for resolution-independent automation</strong></li>
<li><strong>Integrated logging with DiagnosticLogger for comprehensive pattern matching diagnostics</strong></li>
<li>Direct access to state components</li>
<li>Automatic initial state verification</li>
<li>Configuration-driven behavior</li>
<li>Advanced color and motion detection capabilities</li>
<li>Flexible action chaining with nested/confirmed strategies</li>
<li>Comprehensive testing with historical action data</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-reference-new-actionhistory-builder-methods-v100">Quick Reference: New ActionHistory Builder Methods (v1.0.0+)<a href="#quick-reference-new-actionhistory-builder-methods-v100" class="hash-link" aria-label="Direct link to Quick Reference: New ActionHistory Builder Methods (v1.0.0+)" title="Direct link to Quick Reference: New ActionHistory Builder Methods (v1.0.0+)">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// In StateImage.Builder - no separate initialization needed!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StateImage image = new StateImage.Builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .addPatterns(&quot;pattern.png&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .withActionHistory(MockActionHistoryFactory.reliableButton(region))  // Factory method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Available factory methods:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.reliableButton(region)      // 98% success, quick response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.dynamicTextField(region)    // 85% success, variable content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.loadingIndicator(region)   // 60% success, appears/disappears</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.menuItem(region)           // 90% success when visible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.modalDialog(region)        // 100% success when present</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.lowerLeftElement(w, h)     // Common position helper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryFactory.forScreenPosition(pos, w, h) // Any screen position</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Custom builder configuration:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.withActionHistory(MockActionHistoryBuilder.builder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .successRate(0.95).matchRegion(region).recordCount(20).build().build())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Presets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryBuilder.Presets.alwaysFound(region)  // 100% success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryBuilder.Presets.reliable(region)     // 95% success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryBuilder.Presets.flaky(region)       // 70% success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MockActionHistoryBuilder.Presets.neverFound()         // 0% success</span><br></span></code></pre></div></div>
<p><strong>Remember</strong>: ActionHistory is REQUIRED for mock mode finds to work!</p>
<p>Follow these patterns for maintainable, professional Brobot applications.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jspinak/brobot/edit/main/docs/docs/ai-brobot-project-creation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/brobot/docs/ASPECTJ_USAGE_GUIDE"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">AspectJ Usage Guide for Brobot</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/brobot/docs/migration/actionoptions-to-actionconfig"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migration Guide: ActionOptions to ActionConfig</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#project-setup-sequence" class="table-of-contents__link toc-highlight">Project Setup Sequence</a><ul><li><a href="#traditional-state-pattern-without-state" class="table-of-contents__link toc-highlight">Traditional State Pattern (Without @State)</a></li><li><a href="#when-to-define-an-explicit-state-object" class="table-of-contents__link toc-highlight">When to Define an Explicit State Object</a></li><li><a href="#when-to-use-actionchainbuilder-vs-then" class="table-of-contents__link toc-highlight">When to Use ActionChainBuilder vs .then()</a></li><li><a href="#conditionalactionchain---the-foundation" class="table-of-contents__link toc-highlight">ConditionalActionChain - The Foundation</a></li><li><a href="#conditionalactionchain---the-most-elegant-approach" class="table-of-contents__link toc-highlight">ConditionalActionChain - The Most Elegant Approach</a></li><li><a href="#real-world-conditionalactionchain-examples" class="table-of-contents__link toc-highlight">Real-World ConditionalActionChain Examples</a></li></ul></li><li><a href="#brobot-annotations" class="table-of-contents__link toc-highlight">Brobot Annotations</a><ul><li><a href="#state-annotation" class="table-of-contents__link toc-highlight">@State Annotation</a></li><li><a href="#transition-annotation" class="table-of-contents__link toc-highlight">@Transition Annotation</a></li><li><a href="#collectdata-annotation-advanced" class="table-of-contents__link toc-highlight">@CollectData Annotation (Advanced)</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li><li><a href="#common-issues-and-solutions" class="table-of-contents__link toc-highlight">Common Issues and Solutions</a></li><li><a href="#testing-patterns" class="table-of-contents__link toc-highlight">Testing Patterns</a></li><li><a href="#configuration-v110" class="table-of-contents__link toc-highlight">Configuration (v1.1.0+)</a><ul><li><a href="#important-configuration-best-practices" class="table-of-contents__link toc-highlight">Important: Configuration Best Practices</a></li><li><a href="#default-configuration" class="table-of-contents__link toc-highlight">Default Configuration</a></li><li><a href="#image-path-configuration" class="table-of-contents__link toc-highlight">Image Path Configuration</a></li><li><a href="#complete-configuration-example" class="table-of-contents__link toc-highlight">Complete Configuration Example</a></li><li><a href="#configuration-classes" class="table-of-contents__link toc-highlight">Configuration Classes</a></li></ul></li><li><a href="#movement-and-navigation-in-v110" class="table-of-contents__link toc-highlight">Movement and Navigation in v1.1.0</a><ul><li><a href="#available-movement-apis" class="table-of-contents__link toc-highlight">Available Movement APIs</a></li></ul></li><li><a href="#illustration-system-v110" class="table-of-contents__link toc-highlight">Illustration System (v1.1.0)</a><ul><li><a href="#illustrationcontroller-api" class="table-of-contents__link toc-highlight">IllustrationController API</a></li><li><a href="#configuration-properties" class="table-of-contents__link toc-highlight">Configuration Properties</a></li><li><a href="#environment-specific-configurations" class="table-of-contents__link toc-highlight">Environment-Specific Configurations</a></li></ul></li><li><a href="#state-management-in-v110" class="table-of-contents__link toc-highlight">State Management in v1.1.0</a><ul><li><a href="#recommended-using-annotations" class="table-of-contents__link toc-highlight">Recommended: Using Annotations</a></li></ul></li><li><a href="#initial-state-verification-v110" class="table-of-contents__link toc-highlight">Initial State Verification (v1.1.0+)</a><ul><li><a href="#configuration-based-recommended" class="table-of-contents__link toc-highlight">Configuration-Based (Recommended)</a></li><li><a href="#programmatic-usage" class="table-of-contents__link toc-highlight">Programmatic Usage</a></li><li><a href="#mock-testing-support" class="table-of-contents__link toc-highlight">Mock Testing Support</a></li><li><a href="#profile-based-testing-architecture" class="table-of-contents__link toc-highlight">Profile-Based Testing Architecture</a></li></ul></li><li><a href="#color-finding-and-motion-detection" class="table-of-contents__link toc-highlight">Color Finding and Motion Detection</a><ul><li><a href="#color-finding-with-colorfindoptions" class="table-of-contents__link toc-highlight">Color Finding with ColorFindOptions</a></li><li><a href="#nested-vs-confirmed-finds-with-actionchainoptions" class="table-of-contents__link toc-highlight">Nested vs Confirmed Finds with ActionChainOptions</a></li><li><a href="#motion-detection-with-motionfindoptions" class="table-of-contents__link toc-highlight">Motion Detection with MotionFindOptions</a></li><li><a href="#histogram-finding" class="table-of-contents__link toc-highlight">Histogram Finding</a></li><li><a href="#practical-color--pattern-example" class="table-of-contents__link toc-highlight">Practical Color + Pattern Example</a></li></ul></li><li><a href="#actionhistory-for-integration-testing" class="table-of-contents__link toc-highlight">ActionHistory for Integration Testing</a><ul><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#modern-actionhistory-setup-v100" class="table-of-contents__link toc-highlight">Modern ActionHistory Setup (v1.0.0+)</a></li><li><a href="#legacy-actionhistory-setup-pre-v100" class="table-of-contents__link toc-highlight">Legacy ActionHistory Setup (Pre-v1.0.0)</a></li><li><a href="#recording-different-action-types" class="table-of-contents__link toc-highlight">Recording Different Action Types</a></li><li><a href="#integration-test-configuration" class="table-of-contents__link toc-highlight">Integration Test Configuration</a></li><li><a href="#writing-integration-tests-with-actionhistory" class="table-of-contents__link toc-highlight">Writing Integration Tests with ActionHistory</a></li><li><a href="#state-specific-actionhistory" class="table-of-contents__link toc-highlight">State-Specific ActionHistory</a></li><li><a href="#saving-and-loading-actionhistory-in-java-projects" class="table-of-contents__link toc-highlight">Saving and Loading ActionHistory in Java Projects</a></li><li><a href="#recording-actionhistory-during-live-automation" class="table-of-contents__link toc-highlight">Recording ActionHistory During Live Automation</a></li><li><a href="#exportimport-between-projects" class="table-of-contents__link toc-highlight">Export/Import Between Projects</a></li><li><a href="#performance-testing-with-actionhistory" class="table-of-contents__link toc-highlight">Performance Testing with ActionHistory</a></li><li><a href="#best-practices-for-actionhistory" class="table-of-contents__link toc-highlight">Best Practices for ActionHistory</a></li><li><a href="#actionhistory-utility-classes" class="table-of-contents__link toc-highlight">ActionHistory Utility Classes</a></li><li><a href="#migration-from-legacy-actionoptions" class="table-of-contents__link toc-highlight">Migration from Legacy ActionOptions</a></li></ul></li><li><a href="#screen-adaptive-region-building" class="table-of-contents__link toc-highlight">Screen-Adaptive Region Building</a><ul><li><a href="#position-based-region-building" class="table-of-contents__link toc-highlight">Position-Based Region Building</a></li><li><a href="#advanced-positioning-features" class="table-of-contents__link toc-highlight">Advanced Positioning Features</a></li><li><a href="#precise-positioning-and-flexibility" class="table-of-contents__link toc-highlight">Precise Positioning and Flexibility</a></li><li><a href="#integration-with-position-class" class="table-of-contents__link toc-highlight">Integration with Position Class</a></li></ul></li><li><a href="#logging-and-diagnostics" class="table-of-contents__link toc-highlight">Logging and Diagnostics</a><ul><li><a href="#integrated-logging-system" class="table-of-contents__link toc-highlight">Integrated Logging System</a></li><li><a href="#diagnosticlogger-component" class="table-of-contents__link toc-highlight">DiagnosticLogger Component</a></li><li><a href="#verbosity-levels" class="table-of-contents__link toc-highlight">Verbosity Levels</a></li><li><a href="#failed-match-analysis" class="table-of-contents__link toc-highlight">Failed Match Analysis</a></li><li><a href="#pattern-caching" class="table-of-contents__link toc-highlight">Pattern Caching</a></li><li><a href="#debug-image-saving" class="table-of-contents__link toc-highlight">Debug Image Saving</a></li><li><a href="#using-diagnosticlogger-in-custom-code" class="table-of-contents__link toc-highlight">Using DiagnosticLogger in Custom Code</a></li><li><a href="#best-practices-for-logging" class="table-of-contents__link toc-highlight">Best Practices for Logging</a></li><li><a href="#unified-logging-system" class="table-of-contents__link toc-highlight">Unified Logging System</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a><ul><li><a href="#quick-reference-new-actionhistory-builder-methods-v100" class="table-of-contents__link toc-highlight">Quick Reference: New ActionHistory Builder Methods (v1.0.0+)</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/watch?v=aHnVQ8KmOVw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Introductory Video</a></li><li class="footer__item"><a class="footer__link-item" href="/brobot/docs/getting-started/introduction">Get Started</a></li><li class="footer__item"><a class="footer__link-item" href="/brobot/visualAPI">The Visual API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/brobot/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgRljq-lHkMLrzRzpJC4HNw" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://search.maven.org/artifact/io.github.jspinak/brobot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Maven Central<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Joshua Spinak · Free & Open Source</div></div></div></footer></div>
</body>
</html>