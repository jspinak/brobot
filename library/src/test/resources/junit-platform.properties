# JUnit Platform Configuration for Parallel Execution

# Enable parallel execution
junit.jupiter.execution.parallel.enabled=true

# Execution mode for top-level classes
# SAME_THREAD: execute sequentially in same thread
# CONCURRENT: execute in parallel
junit.jupiter.execution.parallel.mode.default=CONCURRENT
junit.jupiter.execution.parallel.mode.classes.default=CONCURRENT

# Strategy for parallel execution
# dynamic: scales based on available processors
# fixed: uses a fixed number of threads
# custom: uses a custom strategy
junit.jupiter.execution.parallel.config.strategy=dynamic

# Dynamic configuration factor (number of threads = factor * number of processors)
# Increased to 2.0 for better parallelization of 5000+ tests
junit.jupiter.execution.parallel.config.dynamic.factor=2.0

# Maximum pool size for parallel execution
# Increased for large test suite
junit.jupiter.execution.parallel.config.dynamic.max-pool-size=512

# Fixed configuration (when using fixed strategy)
junit.jupiter.execution.parallel.config.fixed.parallelism=4

# Timeout for individual test execution
junit.jupiter.execution.timeout.default=30s

# Timeout mode
# disabled: no timeout
# enabled: timeout enabled
# disabled_on_debug: timeout disabled when debugging
junit.jupiter.execution.timeout.mode=enabled

# Thread mode for timeout
# SAME_THREAD: timeout in same thread
# SEPARATE_THREAD: timeout in separate thread
junit.jupiter.execution.timeout.thread.mode=SEPARATE_THREAD

# Test instance lifecycle
# PER_CLASS: one instance for all test methods
# PER_METHOD: new instance for each test method
junit.jupiter.testinstance.lifecycle.default=PER_METHOD

# Display name generation
junit.jupiter.displayname.generator.default=org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores

# Test execution order
# DEFAULT: determined by JUnit
# RANDOM: random order
# METHOD_NAME: alphabetical by method name
# DISPLAY_NAME: alphabetical by display name
junit.jupiter.testmethod.order.default=DEFAULT

# Resource locks timeout
junit.jupiter.execution.parallel.config.exclusive.resources.timeout=10s

# Categories of tests that should run sequentially
junit.jupiter.execution.parallel.mode.exclusive.resources=\
    file-system,\
    network,\
    database,\
    display,\
    sikuli

# Flaky test configuration
brobot.test.flaky.enabled=false
brobot.test.flaky.retries=3
brobot.test.flaky.retry.delay=500ms
