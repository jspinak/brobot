"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3491],{4249:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"core-library/action-config/fluent-api","title":"Fluent API Patterns","description":"The Brobot Fluent API enables you to build automation sequences that read like natural language, making your code more maintainable and self-documenting.","source":"@site/docs/03-core-library/action-config/04-fluent-api.md","sourceDirName":"03-core-library/action-config","slug":"/core-library/action-config/fluent-api","permalink":"/brobot/docs/core-library/action-config/fluent-api","draft":false,"unlisted":false,"editUrl":"https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/action-config/04-fluent-api.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docSidebar","previous":{"title":"ActionConfig Code Examples","permalink":"/brobot/docs/core-library/action-config/examples"},"next":{"title":"ActionConfig API Reference","permalink":"/brobot/docs/core-library/action-config/reference"}}');var a=i(74848),l=i(28453);const s={sidebar_position:4},c="Fluent API Patterns",r={},o=[{value:"Introduction",id:"introduction",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Method Chaining",id:"method-chaining",level:3},{value:"Builder Pattern",id:"builder-pattern",level:3},{value:"Execution Strategies",id:"execution-strategies",level:3},{value:"Basic Patterns",id:"basic-patterns",level:2},{value:"Sequential Actions",id:"sequential-actions",level:3},{value:"Conditional Success",id:"conditional-success",level:3},{value:"Timed Actions",id:"timed-actions",level:3},{value:"Advanced Patterns",id:"advanced-patterns",level:2},{value:"Nested Search",id:"nested-search",level:3},{value:"Validation Chains",id:"validation-chains",level:3},{value:"Complex Workflows",id:"complex-workflows",level:3},{value:"Creating Reusable Components",id:"creating-reusable-components",level:2},{value:"Action Factories",id:"action-factories",level:3},{value:"Custom Builders",id:"custom-builders",level:3},{value:"Pattern Examples",id:"pattern-examples",level:2},{value:"Form Filling Pattern",id:"form-filling-pattern",level:3},{value:"Retry Pattern",id:"retry-pattern",level:3},{value:"Navigation Pattern",id:"navigation-pattern",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Keep Chains Readable",id:"1-keep-chains-readable",level:3},{value:"2. Extract Complex Logic",id:"2-extract-complex-logic",level:3},{value:"3. Use Descriptive Names",id:"3-use-descriptive-names",level:3},{value:"4. Handle Failures Gracefully",id:"4-handle-failures-gracefully",level:3},{value:"5. Document Complex Chains",id:"5-document-complex-chains",level:3},{value:"Debugging Fluent Chains",id:"debugging-fluent-chains",level:2},{value:"Enable Illustration",id:"enable-illustration",level:3},{value:"Add Logging",id:"add-logging",level:3},{value:"Automatic Logging (Recommended)",id:"automatic-logging-recommended",level:4},{value:"Manual Logging",id:"manual-logging",level:4},{value:"Inspect Execution History",id:"inspect-execution-history",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"fluent-api-patterns",children:"Fluent API Patterns"})}),"\n",(0,a.jsx)(e.p,{children:"The Brobot Fluent API enables you to build automation sequences that read like natural language, making your code more maintainable and self-documenting."}),"\n",(0,a.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(e.p,{children:"The Fluent API leverages method chaining and builder patterns to create expressive automation workflows:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'action.perform(\n    find(loginButton)\n        .then(click())\n        .then(find(usernameField))\n        .then(type("user@example.com"))\n        .then(find(submitButton))\n        .then(click())\n);\n'})}),"\n",(0,a.jsx)(e.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,a.jsx)(e.h3,{id:"method-chaining",children:"Method Chaining"}),"\n",(0,a.jsxs)(e.p,{children:["Actions can be chained using the ",(0,a.jsx)(e.code,{children:"then()"})," method:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"ActionConfig chain = firstAction\n    .then(secondAction)\n    .then(thirdAction);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"builder-pattern",children:"Builder Pattern"}),"\n",(0,a.jsx)(e.p,{children:"All ActionConfig classes use builders for construction:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"ClickOptions click = new ClickOptions.Builder()\n    .setNumberOfClicks(2)\n    .setPauseBeforeBegin(0.5)\n    .build();\n"})}),"\n",(0,a.jsx)(e.h3,{id:"execution-strategies",children:"Execution Strategies"}),"\n",(0,a.jsx)(e.p,{children:"Two strategies control how chains execute:"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"NESTED"}),": Each action searches within previous results"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"CONFIRM"}),": Each action validates previous results"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"basic-patterns",children:"Basic Patterns"}),"\n",(0,a.jsx)(e.h3,{id:"sequential-actions",children:"Sequential Actions"}),"\n",(0,a.jsx)(e.p,{children:"Execute actions one after another:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// Click through a wizard\nActionConfig wizard = find(nextButton)\n    .then(click())\n    .then(find(nextButton))\n    .then(click())\n    .then(find(finishButton))\n    .then(click());\n\naction.perform(wizard);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"conditional-success",children:"Conditional Success"}),"\n",(0,a.jsx)(e.p,{children:"Define custom success criteria:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"ActionConfig findMultiple = find(icon)\n    .setSuccessCriteria(result -> result.getMatchList().size() >= 3)\n    .then(click());\n"})}),"\n",(0,a.jsx)(e.h3,{id:"timed-actions",children:"Timed Actions"}),"\n",(0,a.jsx)(e.p,{children:"Add pauses between actions:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'ActionConfig slowSequence = find(button)\n    .setPauseAfterEnd(2.0)  // Wait 2 seconds\n    .then(click())\n    .setPauseAfterEnd(1.0)  // Wait 1 second\n    .then(type("Hello"));\n'})}),"\n",(0,a.jsx)(e.h2,{id:"advanced-patterns",children:"Advanced Patterns"}),"\n",(0,a.jsx)(e.h3,{id:"nested-search",children:"Nested Search"}),"\n",(0,a.jsx)(e.p,{children:"Find elements within other elements:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"ActionChainOptions nestedFind = new ActionChainOptions.Builder(\n    find(menuBar)  // Find menu first\n)\n.setStrategy(ChainingStrategy.NESTED)\n.then(find(fileMenu))     // Find within menu bar\n.then(click())            // Click file menu\n.then(find(saveOption))   // Find within dropdown\n.then(click())            // Click save\n.build();\n\nactionChainExecutor.executeChain(nestedFind, new ActionResult(), images);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"validation-chains",children:"Validation Chains"}),"\n",(0,a.jsx)(e.p,{children:"Confirm each step before proceeding:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"ActionChainOptions validated = new ActionChainOptions.Builder(\n    click(submitButton)\n)\n.setStrategy(ChainingStrategy.CONFIRM)\n.then(waitToVanish(loadingSpinner))  // Confirm loading done\n.then(find(successMessage))           // Confirm success appeared\n.build();\n"})}),"\n",(0,a.jsx)(e.h3,{id:"complex-workflows",children:"Complex Workflows"}),"\n",(0,a.jsx)(e.p,{children:"Build sophisticated automation flows:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public ActionResult performLogin(String username, String password) {\n    return action.perform(\n        find(loginLink)\n            .then(click())\n            .then(waitToVanish(loadingOverlay))\n            .then(find(usernameField))\n            .then(click())\n            .then(clearField())\n            .then(type(username))\n            .then(find(passwordField))\n            .then(click())\n            .then(type(password))\n            .then(find(rememberMe))\n            .then(clickIfFound())\n            .then(find(submitButton))\n            .then(click())\n            .then(waitFor(dashboard))\n    );\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"creating-reusable-components",children:"Creating Reusable Components"}),"\n",(0,a.jsx)(e.h3,{id:"action-factories",children:"Action Factories"}),"\n",(0,a.jsx)(e.p,{children:"Create factory methods for common actions:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class Actions {\n    public static ClickOptions singleClick() {\n        return new ClickOptions.Builder()\n            .setNumberOfClicks(1)\n            .build();\n    }\n    \n    public static ClickOptions doubleClick() {\n        return new ClickOptions.Builder()\n            .setNumberOfClicks(2)\n            .build();\n    }\n    \n    public static TypeOptions type(String text) {\n        return new TypeOptions.Builder()\n            .setText(text)\n            .build();\n    }\n    \n    public static PatternFindOptions find(double similarity) {\n        return new PatternFindOptions.Builder()\n            .setSimilarity(similarity)\n            .build();\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"custom-builders",children:"Custom Builders"}),"\n",(0,a.jsx)(e.p,{children:"Create domain-specific builders:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public class LoginBuilder {\n    private String username;\n    private String password;\n    private boolean rememberMe;\n    \n    public LoginBuilder withCredentials(String user, String pass) {\n        this.username = user;\n        this.password = pass;\n        return this;\n    }\n    \n    public LoginBuilder rememberMe(boolean remember) {\n        this.rememberMe = remember;\n        return this;\n    }\n    \n    public ActionConfig build() {\n        ActionConfig.Builder chain = find(usernameField)\n            .then(click())\n            .then(type(username))\n            .then(find(passwordField))\n            .then(click())\n            .then(type(password));\n            \n        if (rememberMe) {\n            chain = chain\n                .then(find(rememberCheckbox))\n                .then(click());\n        }\n        \n        return chain\n            .then(find(loginButton))\n            .then(click())\n            .build();\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"pattern-examples",children:"Pattern Examples"}),"\n",(0,a.jsx)(e.h3,{id:"form-filling-pattern",children:"Form Filling Pattern"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'public class FormFiller {\n    public ActionConfig fillForm(Map<String, String> fields) {\n        ActionConfig.Builder chain = null;\n        \n        for (Map.Entry<String, String> field : fields.entrySet()) {\n            ActionConfig fillField = find(field.getKey())\n                .then(click())\n                .then(clearField())\n                .then(type(field.getValue()))\n                .then(pressTab());\n                \n            if (chain == null) {\n                chain = fillField;\n            } else {\n                chain = chain.then(fillField);\n            }\n        }\n        \n        return chain.build();\n    }\n    \n    private ActionConfig clearField() {\n        return type("a").withModifiers("ctrl")\n            .then(type(Key.DELETE));\n    }\n    \n    private ActionConfig pressTab() {\n        return type(Key.TAB);\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"retry-pattern",children:"Retry Pattern"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"public ActionResult retryAction(ActionConfig action, int maxRetries) {\n    for (int i = 0; i < maxRetries; i++) {\n        // Add exponential backoff pause after action (except for first attempt)\n        if (i > 0) {\n            action = action.toBuilder()\n                .setPauseAfterAction((double)(i + 1))  // Exponential backoff\n                .build();\n        }\n        \n        ActionResult result = action.perform(action);\n        if (result.isSuccess()) {\n            return result;\n        }\n    }\n    \n    return new ActionResult();  // Failed after all retries\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"navigation-pattern",children:"Navigation Pattern"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'public class Navigator {\n    public ActionConfig navigateToSection(String... menuPath) {\n        ActionConfig.Builder navigation = null;\n        \n        for (String menuItem : menuPath) {\n            ActionConfig step = find(menuItem)\n                .then(click())\n                .then(pause(0.5));\n                \n            if (navigation == null) {\n                navigation = step;\n            } else {\n                navigation = navigation.then(step);\n            }\n        }\n        \n        return navigation.build();\n    }\n}\n\n// Usage\nActionConfig goToSettings = navigator.navigateToSection(\n    "File", "Preferences", "Advanced Settings"\n);\n'})}),"\n",(0,a.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsx)(e.h3,{id:"1-keep-chains-readable",children:"1. Keep Chains Readable"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// Good: Clear, logical flow\naction.perform(\n    find(searchBox)\n        .then(click())\n        .then(clearField())\n        .then(type(searchTerm))\n        .then(find(searchButton))\n        .then(click())\n);\n\n// Bad: Too compressed\naction.perform(find(searchBox).then(click()).then(clearField()).then(type(searchTerm)).then(find(searchButton)).then(click()));\n"})}),"\n",(0,a.jsx)(e.h3,{id:"2-extract-complex-logic",children:"2. Extract Complex Logic"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// Good: Reusable, testable components\nprivate ActionConfig loginSequence(String user, String pass) {\n    return find(usernameField)\n        .then(click())\n        .then(type(user))\n        .then(find(passwordField))\n        .then(click())\n        .then(type(pass))\n        .then(find(submitButton))\n        .then(click());\n}\n\n// Usage\naction.perform(loginSequence("user@example.com", "password"));\n'})}),"\n",(0,a.jsx)(e.h3,{id:"3-use-descriptive-names",children:"3. Use Descriptive Names"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// Good: Self-documenting\nActionConfig openFileMenu = find(fileMenu).then(click());\nActionConfig selectSaveOption = find(saveOption).then(click());\nActionConfig confirmSave = find(saveButton).then(click());\n\nActionConfig saveWorkflow = openFileMenu\n    .then(selectSaveOption)\n    .then(confirmSave);\n"})}),"\n",(0,a.jsx)(e.h3,{id:"4-handle-failures-gracefully",children:"4. Handle Failures Gracefully"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'ActionConfig robustChain = find(element)\n    .setSuccessCriteria(result -> result.isSuccess())\n    .then(click())\n    .setSuccessCriteria(result -> {\n        if (!result.isSuccess()) {\n            logger.warn("Click failed, attempting recovery");\n            return false;  // Will stop chain\n        }\n        return true;\n    })\n    .then(type("data"));\n'})}),"\n",(0,a.jsx)(e.h3,{id:"5-document-complex-chains",children:"5. Document Complex Chains"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"/**\n * Performs a complete checkout process:\n * 1. Adds item to cart\n * 2. Navigates to checkout\n * 3. Fills shipping information\n * 4. Enters payment details\n * 5. Confirms order\n */\npublic ActionConfig checkoutFlow(ShippingInfo shipping, PaymentInfo payment) {\n    return addToCart()\n        .then(goToCheckout())\n        .then(fillShipping(shipping))\n        .then(fillPayment(payment))\n        .then(confirmOrder());\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"debugging-fluent-chains",children:"Debugging Fluent Chains"}),"\n",(0,a.jsx)(e.h3,{id:"enable-illustration",children:"Enable Illustration"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'ActionConfig debugChain = find(element)\n    .setIllustrate(ActionConfig.Illustrate.YES)\n    .then(click())\n    .setIllustrate(ActionConfig.Illustrate.YES)\n    .then(type("test"));\n'})}),"\n",(0,a.jsx)(e.h3,{id:"add-logging",children:"Add Logging"}),"\n",(0,a.jsx)(e.h4,{id:"automatic-logging-recommended",children:"Automatic Logging (Recommended)"}),"\n",(0,a.jsx)(e.p,{children:"Use the built-in logging capabilities for cleaner code:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'ActionConfig searchWithLogging = find(searchButton)\n    .withBeforeActionLog("Searching for search button...")\n    .withSuccessLog("Found search button at {target}")\n    .withFailureLog("Search button not found - check if page loaded")\n    .withAfterActionLog("Search completed in {duration}ms")\n    .then(click())\n    .withBeforeActionLog("Clicking search button...")\n    .withSuccessLog("Search initiated successfully");\n'})}),"\n",(0,a.jsxs)(e.p,{children:["See the ",(0,a.jsx)(e.a,{href:"/brobot/docs/logging/automatic-action-logging",children:"Automatic Action Logging Guide"})," for more details."]}),"\n",(0,a.jsx)(e.h4,{id:"manual-logging",children:"Manual Logging"}),"\n",(0,a.jsx)(e.p,{children:"For custom logging logic, use success criteria:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'public class LoggingActions {\n    public ActionConfig find(StateImage image) {\n        return new PatternFindOptions.Builder()\n            .setSimilarity(0.9)\n            .setSuccessCriteria(result -> {\n                logger.info("Find result: {} matches found", \n                    result.getMatchList().size());\n                return result.isSuccess();\n            })\n            .build();\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"inspect-execution-history",children:"Inspect Execution History"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'ActionResult result = action.perform(complexChain);\n\n// Analyze what happened\nfor (ActionRecord record : result.getExecutionHistory()) {\n    System.out.printf("Step %s: %s (%.2fs)%n",\n        record.getActionType(),\n        record.isSuccess() ? "SUCCESS" : "FAILED",\n        record.getDuration()\n    );\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(e.p,{children:"The Fluent API makes Brobot automation code:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Readable"}),": Chains read like natural language"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Maintainable"}),": Clear structure and flow"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Reusable"}),": Easy to create components"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Testable"}),": Each piece can be tested independently"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Debuggable"}),": Clear execution flow and history"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"By mastering these patterns, you can create robust, maintainable automation workflows that clearly express their intent."})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>c});var t=i(96540);const a={},l=t.createContext(a);function s(n){const e=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);