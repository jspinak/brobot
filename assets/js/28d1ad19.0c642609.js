"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1797],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var i=s(96540);const r={},o=i.createContext(r);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:n},e.children)}},42394:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"core-library/configuration/headless-configuration","title":"Headless Configuration Guide","description":"Overview","source":"@site/docs/03-core-library/configuration/headless-configuration.md","sourceDirName":"03-core-library/configuration","slug":"/core-library/configuration/headless-configuration","permalink":"/brobot/docs/core-library/configuration/headless-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/configuration/headless-configuration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"BrobotProperties Usage Guide","permalink":"/brobot/docs/core-library/configuration/brobot-properties-usage"},"next":{"title":"Initial State Configuration Guide","permalink":"/brobot/docs/core-library/configuration/initial-states"}}');var r=s(74848),o=s(28453);const l={},t="Headless Configuration Guide",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Setting Headless Mode",id:"setting-headless-mode",level:3},{value:"Property Values",id:"property-values",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Simple Configuration-Based Approach",id:"simple-configuration-based-approach",level:3},{value:"No More Complex Workarounds",id:"no-more-complex-workarounds",level:3},{value:"Common Scenarios",id:"common-scenarios",level:2},{value:"Desktop Development (Windows/Mac/Linux)",id:"desktop-development-windowsmaclinux",level:3},{value:"CI/CD Pipeline (GitHub Actions, Jenkins)",id:"cicd-pipeline-github-actions-jenkins",level:3},{value:"Docker Container",id:"docker-container",level:3},{value:"WSL2 Development",id:"wsl2-development",level:3},{value:"Why We Changed",id:"why-we-changed",level:2},{value:"The Problem with Auto-Detection",id:"the-problem-with-auto-detection",level:3},{value:"The Solution: Explicit Configuration",id:"the-solution-explicit-configuration",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Getting HeadlessException",id:"issue-getting-headlessexception",level:3},{value:"Issue: Click Actions Not Working",id:"issue-click-actions-not-working",level:3},{value:"Issue: Different Behavior in Tests",id:"issue-different-behavior-in-tests",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Configuration",id:"related-configuration",level:2},{value:"Mock Mode",id:"mock-mode",level:3},{value:"Screen Capture",id:"screen-capture",level:3},{value:"Summary",id:"summary",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"headless-configuration-guide",children:"Headless Configuration Guide"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["Starting with Brobot 1.1.0, headless mode is ",(0,r.jsx)(n.strong,{children:"explicitly configured"})," via properties rather than auto-detected. This simplifies the codebase and avoids issues with Java's unreliable ",(0,r.jsx)(n.code,{children:"GraphicsEnvironment.isHeadless()"})," detection, particularly on Windows systems."]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"setting-headless-mode",children:"Setting Headless Mode"}),"\n",(0,r.jsx)(n.p,{children:"Headless mode must be explicitly configured via properties:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# application.properties\r\n# Explicitly set headless mode (default: false)\r\nbrobot.headless=false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"property-values",children:"Property Values"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"false"})," (default)"]}),(0,r.jsx)(n.td,{children:"GUI is available"}),(0,r.jsx)(n.td,{children:"Normal desktop environments, Windows/Mac/Linux with displays"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"true"})}),(0,r.jsx)(n.td,{children:"No display available"}),(0,r.jsx)(n.td,{children:"CI/CD pipelines, headless servers, Docker containers, test environments"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsx)(n.h3,{id:"simple-configuration-based-approach",children:"Simple Configuration-Based Approach"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"HeadlessDetector"})," component simply reads the configured property value:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Component\r\npublic class HeadlessDetector {\r\n\r\n    public HeadlessDetector(@Value("${brobot.headless:false}") boolean brobotHeadless) {\r\n        // Uses configured value ONLY - no auto-detection\r\n        this.headlessMode = brobotHeadless;\r\n    }\r\n\r\n    public boolean isHeadless() {\r\n        return headlessMode;  // Returns configured value\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"no-more-complex-workarounds",children:"No More Complex Workarounds"}),"\n",(0,r.jsxs)(n.p,{children:["Previous versions attempted various workarounds for headless detection issues. These have been ",(0,r.jsx)(n.strong,{children:"removed"})," in favor of the simpler approach:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"Removed"}),": ",(0,r.jsx)(n.code,{children:"ForceNonHeadlessInitializer"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"Removed"}),": ",(0,r.jsx)(n.code,{children:"RobotForcedInitializer"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u274c ",(0,r.jsx)(n.strong,{children:"Removed"}),": Direct Robot manipulation"]}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Kept"}),": Simple property-based configuration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-scenarios",children:"Common Scenarios"}),"\n",(0,r.jsx)(n.h3,{id:"desktop-development-windowsmaclinux",children:"Desktop Development (Windows/Mac/Linux)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# Default configuration - no changes needed\r\n# brobot.headless defaults to false\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cicd-pipeline-github-actions-jenkins",children:"CI/CD Pipeline (GitHub Actions, Jenkins)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# application-ci.properties\r\nbrobot.headless=true\r\nbrobot.mock=true  # Also enable mock mode for testing\n"})}),"\n",(0,r.jsx)(n.h3,{id:"docker-container",children:"Docker Container"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# application-docker.properties\r\nbrobot.headless=true\r\nbrobot.mock=true\n"})}),"\n",(0,r.jsx)(n.h3,{id:"wsl2-development",children:"WSL2 Development"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# WSL2 with WSLg (GUI support)\r\nbrobot.headless=false\r\n\r\n# WSL2 without display\r\nbrobot.headless=true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"why-we-changed",children:"Why We Changed"}),"\n",(0,r.jsx)(n.h3,{id:"the-problem-with-auto-detection",children:"The Problem with Auto-Detection"}),"\n",(0,r.jsxs)(n.p,{children:["Java's ",(0,r.jsx)(n.code,{children:"GraphicsEnvironment.isHeadless()"})," has several issues:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cached Results"}),": Once called, the result is cached and cannot change"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Gradle Interference"}),": Gradle often sets ",(0,r.jsx)(n.code,{children:"java.awt.headless=true"})," before the JVM starts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timing Issues"}),": Early initialization can lock in the wrong headless state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Platform Inconsistency"}),": Different behavior on different operating systems"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"the-solution-explicit-configuration",children:"The Solution: Explicit Configuration"}),"\n",(0,r.jsx)(n.p,{children:"By using explicit configuration:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Predictable"}),": You know exactly what mode you're in"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simple"}),": No complex detection logic or workarounds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reliable"}),": Works consistently across all platforms"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testable"}),": Easy to test both modes"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"issue-getting-headlessexception",children:"Issue: Getting HeadlessException"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom"}),": ",(0,r.jsx)(n.code,{children:"HeadlessException"})," when running automation"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure ",(0,r.jsx)(n.code,{children:"brobot.headless=false"})," in your properties"]}),"\n",(0,r.jsxs)(n.li,{children:["If using Gradle, add to ",(0,r.jsx)(n.code,{children:"gradle.properties"}),":","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"org.gradle.jvmargs=-Djava.awt.headless=false\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-click-actions-not-working",children:"Issue: Click Actions Not Working"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom"}),": Images are found but clicks fail"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"This is likely a headless detection issue"}),"\n",(0,r.jsxs)(n.li,{children:["Ensure ",(0,r.jsx)(n.code,{children:"brobot.headless=false"})," is set"]}),"\n",(0,r.jsx)(n.li,{children:"The click action now uses SikuliX directly, which handles Robot initialization lazily"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"issue-different-behavior-in-tests",children:"Issue: Different Behavior in Tests"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptom"}),": Tests behave differently than production"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Ensure consistent configuration:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// In tests, extend BrobotTestBase\r\npublic class MyTest extends BrobotTestBase {\r\n    // Mock mode is automatically enabled\r\n    // Headless-safe testing environment\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Always set explicitly for production"}),": Don't rely on defaults"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"brobot.headless=false  # Explicitly set for your environment\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use profiles for different environments"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# application-dev.properties\r\nbrobot.headless=false\r\n\r\n# application-ci.properties\r\nbrobot.headless=true\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use HeadlessDetector, not GraphicsEnvironment"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// Good\r\n@Autowired\r\nprivate HeadlessDetector headlessDetector;\r\n\r\nif (headlessDetector.isHeadless()) { }\r\n\r\n// Avoid - unreliable\r\nif (GraphicsEnvironment.isHeadless()) { }\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-configuration",children:"Related Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"mock-mode",children:"Mock Mode"}),"\n",(0,r.jsx)(n.p,{children:"Mock mode (simulated actions) is separate from headless mode:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mock mode"}),": ",(0,r.jsx)(n.code,{children:"brobot.mock=true"})," - Simulates actions for testing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Headless mode"}),": ",(0,r.jsx)(n.code,{children:"brobot.headless=true"})," - No display available"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Both can be used together for CI/CD testing."}),"\n",(0,r.jsx)(n.h3,{id:"screen-capture",children:"Screen Capture"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"brobot.headless=true"}),", ensure appropriate capture provider:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"brobot.capture.provider=MOCK  # Use mock provider for headless\n"})}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Headless mode is ",(0,r.jsx)(n.strong,{children:"explicitly configured"})," via ",(0,r.jsx)(n.code,{children:"brobot.headless"})," property"]}),"\n",(0,r.jsxs)(n.li,{children:["Auto-detection has been ",(0,r.jsx)(n.strong,{children:"removed"})," for simplicity and reliability"]}),"\n",(0,r.jsxs)(n.li,{children:["Default is ",(0,r.jsx)(n.code,{children:"false"})," (assumes display is available)"]}),"\n",(0,r.jsx)(n.li,{children:"No more complex workarounds or Robot initialization tricks"}),"\n",(0,r.jsx)(n.li,{children:"SikuliX handles all low-level details automatically"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);