"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[276],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var i=n(96540);const a={},o=i.createContext(a);function r(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:t},e.children)}},57229:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"core-library/tutorials/tutorial-basics/define-capture-region","title":"Define the Capture Region","description":"This tutorial demonstrates Brobot 1.1.0\'s declarative region definition using SearchRegionOnObject. This approach eliminates manual region calculations by defining regions relative to other UI elements.","source":"@site/docs/03-core-library/tutorials/tutorial-basics/define-capture-region.md","sourceDirName":"03-core-library/tutorials/tutorial-basics","slug":"/core-library/tutorials/tutorial-basics/define-capture-region","permalink":"/brobot/docs/core-library/tutorials/tutorial-basics/define-capture-region","draft":false,"unlisted":false,"editUrl":"https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/tutorials/tutorial-basics/define-capture-region.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docSidebar","previous":{"title":"Transitions","permalink":"/brobot/docs/core-library/tutorials/tutorial-basics/transitions"},"next":{"title":"Get Island Type","permalink":"/brobot/docs/core-library/tutorials/tutorial-basics/get-island-type"}}');var a=n(74848),o=n(28453);const r={sidebar_position:6},s="Define the Capture Region",l={},c=[{value:"State Definition with Declarative Region",id:"state-definition-with-declarative-region",level:2},{value:"Using the Declarative Region",id:"using-the-declarative-region",level:2},{value:"Key Benefits of Declarative Approach",id:"key-benefits-of-declarative-approach",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Learn More",id:"learn-more",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"define-the-capture-region",children:"Define the Capture Region"})}),"\n",(0,a.jsx)(t.admonition,{title:"Version Note",type:"info",children:(0,a.jsxs)(t.p,{children:["This tutorial demonstrates Brobot 1.1.0's declarative region definition using ",(0,a.jsx)(t.code,{children:"SearchRegionOnObject"}),". This approach eliminates manual region calculations by defining regions relative to other UI elements."]})}),"\n",(0,a.jsx)(t.p,{children:"We need to define the region where we will capture the image of the island.\nThe island always appears near the search button, so we define the capture region\nrelative to the search button's location using the declarative approach."}),"\n",(0,a.jsx)(t.h2,{id:"state-definition-with-declarative-region",children:"State Definition with Declarative Region"}),"\n",(0,a.jsxs)(t.p,{children:["First, we define the island capture region declaratively in the ",(0,a.jsx)(t.code,{children:"IslandState"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'package com.example.basics.states;\n\nimport io.github.jspinak.brobot.annotations.State;\nimport io.github.jspinak.brobot.model.state.StateImage;\nimport io.github.jspinak.brobot.model.state.StateObject;\nimport io.github.jspinak.brobot.model.element.SearchRegionOnObject;\nimport io.github.jspinak.brobot.action.basic.find.MatchAdjustmentOptions;\nimport lombok.Getter;\nimport org.springframework.stereotype.Component;\n\n@State\n@Component\n@Getter\npublic class IslandState {\n    \n    private final StateImage islandName;\n    private final StateImage islandCapture;\n    \n    public IslandState() {\n        islandName = new StateImage.Builder()\n            .addPatterns("islandName")\n            .build();\n            \n        // Define the island capture region relative to the search button\n        // The island appears near the search button, so we define the capture\n        // region relative to its location\n        islandCapture = new StateImage.Builder()\n            .setName("IslandCapture")\n            .setSearchRegionOnObject(SearchRegionOnObject.builder()\n                .targetType(StateObject.Type.IMAGE)\n                .targetStateName("World")  // @State removes "State" suffix from class name\n                .targetObjectName("searchButton")\n                .adjustments(MatchAdjustmentOptions.builder()\n                    .addX(-50)      // 50 pixels to the left of search button\n                    .addY(-250)     // 250 pixels above search button\n                    .absoluteW(200) // Fixed width of 200 pixels\n                    .absoluteH(200) // Fixed height of 200 pixels\n                    .build())\n                .build())\n            .build();\n    }\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"using-the-declarative-region",children:"Using the Declarative Region"}),"\n",(0,a.jsx)(t.p,{children:"With the declarative approach, the region calculation is automatic:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"@Component\npublic class IslandRegion {\n    \n    private final Action action;\n    private final WorldState world;\n    private final IslandState island;\n    \n    public IslandRegion(Action action, WorldState world, IslandState island) {\n        this.action = action;\n        this.world = world;\n        this.island = island;\n    }\n    \n    /**\n     * Ensure the search button has been found so the island capture region\n     * can be calculated relative to it.\n     * \n     * @return true if the search button was found and the region is ready\n     */\n    public boolean ensureRegionReady() {\n        // Find the search button to establish the reference point\n        PatternFindOptions findOptions = new PatternFindOptions.Builder()\n                .build();\n        ObjectCollection searchButton = new ObjectCollection.Builder()\n                .withImages(world.getSearchButton())\n                .build();\n        \n        ActionResult result = action.perform(findOptions, searchButton);\n        \n        // If the search button is found, the island capture region\n        // will automatically be updated relative to its location\n        return result.isSuccess();\n    }\n    \n    /**\n     * Capture an image of the island using the dynamically calculated region.\n     * The region is automatically positioned relative to the search button.\n     * \n     * @return ActionResult containing the captured image\n     */\n    public ActionResult captureIsland() {\n        // The search region for islandCapture is automatically calculated\n        // relative to the search button's last known location\n        PatternFindOptions captureOptions = new PatternFindOptions.Builder()\n                .setCaptureImage(true)\n                .build();\n        \n        ObjectCollection islandCapture = new ObjectCollection.Builder()\n                .withImages(island.getIslandCapture())\n                .build();\n        \n        return action.perform(captureOptions, islandCapture);\n    }\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"key-benefits-of-declarative-approach",children:"Key Benefits of Declarative Approach"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"No Manual Calculations"}),": The region is automatically calculated based on the search button's location"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Dynamic Updates"}),": If the search button moves, the island capture region automatically adjusts"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Cleaner Code"}),": Region definition is part of the state definition, not scattered in action code"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Maintainable"}),": Changes to region positioning require only updating the adjustments in one place"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["When ",(0,a.jsx)(t.code,{children:"WorldState.searchButton"})," is found, its location is recorded"]}),"\n",(0,a.jsxs)(t.li,{children:["The ",(0,a.jsx)(t.code,{children:"islandCapture"})," StateImage has a ",(0,a.jsx)(t.code,{children:"SearchRegionOnObject"})," that references the search button"]}),"\n",(0,a.jsxs)(t.li,{children:["When searching for ",(0,a.jsx)(t.code,{children:"islandCapture"}),", Brobot automatically:","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Takes the search button's last known location"}),"\n",(0,a.jsx)(t.li,{children:"Applies the adjustments (-50 pixels left, -250 pixels up)"}),"\n",(0,a.jsx)(t.li,{children:"Sets the dimensions (200x200 pixels)"}),"\n",(0,a.jsx)(t.li,{children:"Uses this calculated region for the search"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"learn-more",children:"Learn More"}),"\n",(0,a.jsxs)(t.p,{children:["For more details on declarative region definition, see the ",(0,a.jsx)(t.a,{href:"/docs/core-library/guides/declarative-region-definition",children:"Declarative Region Definition Guide"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);