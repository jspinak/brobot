"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9453],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var r=i(96540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}},81727:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"core-library/guides/search-regions-and-fixed-locations","title":"Search Regions and Fixed Locations","description":"Understanding the difference between normal search regions and fixed locations is crucial for efficient pattern matching in Brobot. This guide explains these concepts and how they work together.","source":"@site/docs/03-core-library/guides/search-regions-and-fixed-locations.md","sourceDirName":"03-core-library/guides","slug":"/core-library/guides/search-regions-and-fixed-locations","permalink":"/brobot/docs/core-library/guides/search-regions-and-fixed-locations","draft":false,"unlisted":false,"editUrl":"https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/guides/search-regions-and-fixed-locations.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16},"sidebar":"docSidebar","previous":{"title":"Declarative Region Definition","permalink":"/brobot/docs/core-library/guides/declarative-region-definition"},"next":{"title":"Annotations API","permalink":"/brobot/docs/core-library/guides/annotations"}}');var s=i(74848),t=i(28453);const a={sidebar_position:16},o="Search Regions and Fixed Locations",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Normal Search Regions",id:"normal-search-regions",level:2},{value:"Defining Search Regions",id:"defining-search-regions",level:3},{value:"Multiple Search Regions",id:"multiple-search-regions",level:3},{value:"Fixed Locations",id:"fixed-locations",level:2},{value:"How Fixed Locations Work",id:"how-fixed-locations-work",level:3},{value:"Marking Patterns as Fixed",id:"marking-patterns-as-fixed",level:3},{value:"The Relationship Between Search Regions and Fixed Locations",id:"the-relationship-between-search-regions-and-fixed-locations",level:2},{value:"Practical Example: Claude Automator",id:"practical-example-claude-automator",level:2},{value:"What Happens During Execution",id:"what-happens-during-execution",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"When to Use Fixed Locations",id:"when-to-use-fixed-locations",level:3},{value:"When to Use Search Regions Only",id:"when-to-use-search-regions-only",level:3},{value:"Combining Both Approaches",id:"combining-both-approaches",level:3},{value:"Advanced: Resetting Fixed Locations",id:"advanced-resetting-fixed-locations",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Performance Comparison",id:"performance-comparison",level:3},{value:"Debugging Search Regions",id:"debugging-search-regions",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"search-regions-and-fixed-locations",children:"Search Regions and Fixed Locations"})}),"\n",(0,s.jsx)(n.p,{children:"Understanding the difference between normal search regions and fixed locations is crucial for efficient pattern matching in Brobot. This guide explains these concepts and how they work together."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Brobot uses two complementary concepts for locating visual elements:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search Regions"}),": Areas where patterns are searched for"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fixed Locations"}),": Remembered positions where patterns were previously found"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"normal-search-regions",children:"Normal Search Regions"}),"\n",(0,s.jsx)(n.p,{children:"Normal search regions define the areas where Brobot will look for patterns. They limit the search space, improving performance and accuracy."}),"\n",(0,s.jsx)(n.h3,{id:"defining-search-regions",children:"Defining Search Regions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// Define a search region for the lower left quarter of the screen\nRegion lowerLeftQuarter = Region.builder()\n    .withScreenPercentage(0.0, 0.5, 0.5, 0.5)  // x=0%, y=50%, width=50%, height=50%\n    .build();\n\n// Apply to a StateImage\nStateImage prompt = new StateImage.Builder()\n    .addPatterns("prompt-1", "prompt-2", "prompt-3")\n    .setName("Prompt")\n    .setSearchRegionForAllPatterns(lowerLeftQuarter)\n    .build();\n'})}),"\n",(0,s.jsx)(n.h3,{id:"multiple-search-regions",children:"Multiple Search Regions"}),"\n",(0,s.jsx)(n.p,{children:"You can define multiple search regions for more complex search patterns:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'Pattern pattern = new Pattern("button.png");\npattern.addSearchRegion(topRegion);\npattern.addSearchRegion(bottomRegion);\n// Pattern will be searched in both regions\n'})}),"\n",(0,s.jsx)(n.h2,{id:"fixed-locations",children:"Fixed Locations"}),"\n",(0,s.jsx)(n.p,{children:'Fixed locations are used for UI elements that always appear in the same position. When a pattern marked as "fixed" is found, Brobot remembers its location for faster subsequent searches.'}),"\n",(0,s.jsx)(n.h3,{id:"how-fixed-locations-work",children:"How Fixed Locations Work"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Initial Search"}),": Pattern is searched within defined search regions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Location Memory"}),": When found, the location is saved as the fixed region"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Subsequent Searches"}),": Future searches check the fixed location first"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"marking-patterns-as-fixed",children:"Marking Patterns as Fixed"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'StateImage fixedElement = new StateImage.Builder()\n    .addPatterns("status-bar.png")\n    .setName("StatusBar")\n    .setSearchRegionForAllPatterns(topOfScreen)\n    .build();\n\n// Mark patterns as fixed\nfixedElement.getPatterns().forEach(p -> p.setFixed(true));\n'})}),"\n",(0,s.jsx)(n.h2,{id:"the-relationship-between-search-regions-and-fixed-locations",children:"The Relationship Between Search Regions and Fixed Locations"}),"\n",(0,s.jsx)(n.p,{children:"The key concept to understand:"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"The normal search region defines a limited area in which to search. StateImages marked as fixed will set the fixed region when found. However, until the image has been found, it will continue to search within the search regions defined for it."})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This dual approach provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Efficiency"}),": Once found, fixed elements are located quickly"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flexibility"}),": Initial searches can cover broader areas"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Robustness"}),": If a fixed element moves, it can be re-discovered"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"practical-example-claude-automator",children:"Practical Example: Claude Automator"}),"\n",(0,s.jsx)(n.p,{children:"Here's a real-world example from the Claude Automator project:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@State(initial = true)\n@Getter\npublic class PromptState {\n    \n    private final StateImage claudePrompt;\n    \n    public PromptState() {\n        // Define search region for lower left quarter\n        Region lowerLeftQuarter = Region.builder()\n            .withScreenPercentage(0.0, 0.5, 0.5, 0.5)\n            .build();\n        \n        // Create StateImage with search region\n        claudePrompt = new StateImage.Builder()\n            .addPatterns("prompt/claude-prompt-1",\n                        "prompt/claude-prompt-2",\n                        "prompt/claude-prompt-3")\n            .setName("ClaudePrompt")\n            .setSearchRegionForAllPatterns(lowerLeftQuarter)\n            .build();\n        \n        // Mark as fixed - will remember location once found\n        claudePrompt.getPatterns().forEach(p -> p.setFixed(true));\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"what-happens-during-execution",children:"What Happens During Execution"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"First Search"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Searches for claude-prompt patterns in the lower left quarter"}),"\n",(0,s.jsx)(n.li,{children:"When found, saves the exact location as the fixed region"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Subsequent Searches"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Checks the saved fixed location first"}),"\n",(0,s.jsx)(n.li,{children:"Falls back to searching the lower left quarter if not found at fixed location"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"when-to-use-fixed-locations",children:"When to Use Fixed Locations"}),"\n",(0,s.jsx)(n.p,{children:"Use fixed locations for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Navigation bars"}),"\n",(0,s.jsx)(n.li,{children:"Status indicators"}),"\n",(0,s.jsx)(n.li,{children:"Menu buttons"}),"\n",(0,s.jsx)(n.li,{children:"Any UI element with a consistent position"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"when-to-use-search-regions-only",children:"When to Use Search Regions Only"}),"\n",(0,s.jsx)(n.p,{children:"Use search regions without fixed for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Dynamic content"}),"\n",(0,s.jsx)(n.li,{children:"Popup dialogs"}),"\n",(0,s.jsx)(n.li,{children:"Moving elements"}),"\n",(0,s.jsx)(n.li,{children:"Content that appears in varying positions"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"combining-both-approaches",children:"Combining Both Approaches"}),"\n",(0,s.jsx)(n.p,{children:"For maximum robustness:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Define a reasonable search region (not full screen unless necessary)"}),"\n",(0,s.jsx)(n.li,{children:"Mark as fixed if the element typically stays in one place"}),"\n",(0,s.jsx)(n.li,{children:"The search region acts as a fallback if the fixed location fails"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// Robust pattern configuration\nStateImage menuButton = new StateImage.Builder()\n    .addPatterns("menu.png")\n    .setName("Menu")\n    .setSearchRegionForAllPatterns(topMenuBar)  // Fallback search area\n    .build();\n\nmenuButton.getPatterns().forEach(p -> p.setFixed(true));  // Remember location\n'})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-resetting-fixed-locations",children:"Advanced: Resetting Fixed Locations"}),"\n",(0,s.jsx)(n.p,{children:"Sometimes you need to reset fixed locations (e.g., after window resize):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"// Reset fixed location for a pattern\npattern.resetFixedSearchRegion();\n\n// Reset all fixed locations in a StateImage\nstateImage.getPatterns().forEach(p -> p.resetFixedSearchRegion());\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search Region Size"}),": Smaller regions = faster searches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fixed Location Benefits"}),": Near-instant location for fixed elements"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Full Screen Searches"}),": Avoid unless absolutely necessary"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"performance-comparison",children:"Performance Comparison"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Approach"}),(0,s.jsx)(n.th,{children:"Initial Search"}),(0,s.jsx)(n.th,{children:"Subsequent Searches"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Full Screen"}),(0,s.jsx)(n.td,{children:"Slowest"}),(0,s.jsx)(n.td,{children:"Slowest"}),(0,s.jsx)(n.td,{children:"Last resort"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Search Region"}),(0,s.jsx)(n.td,{children:"Fast"}),(0,s.jsx)(n.td,{children:"Fast"}),(0,s.jsx)(n.td,{children:"Dynamic content"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Fixed + Region"}),(0,s.jsx)(n.td,{children:"Fast"}),(0,s.jsx)(n.td,{children:"Fastest"}),(0,s.jsx)(n.td,{children:"Static UI elements"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"debugging-search-regions",children:"Debugging Search Regions"}),"\n",(0,s.jsx)(n.p,{children:"Enable visual feedback to see search regions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-properties",children:"# In application.properties\nbrobot.console.actions.show-search-regions=true\nbrobot.logging.verbose.show-search-regions=true\n"})}),"\n",(0,s.jsx)(n.p,{children:"This will highlight search regions during execution, helping you verify your configuration."}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Search regions"})," limit where patterns are searched for"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fixed locations"})," remember where patterns were previously found"]}),"\n",(0,s.jsx)(n.li,{children:"Fixed patterns search their saved location first, then fall back to search regions"}),"\n",(0,s.jsx)(n.li,{children:"This dual approach balances efficiency with robustness"}),"\n",(0,s.jsx)(n.li,{children:"Proper configuration significantly improves automation performance"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);