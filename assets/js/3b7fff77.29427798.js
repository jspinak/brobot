"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7197],{28453:(n,e,i)=>{i.d(e,{R:()=>c,x:()=>s});var t=i(96540);const o={},l=t.createContext(o);function c(n){const e=t.useContext(l);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:c(n.components),t.createElement(l.Provider,{value:e},n.children)}},92251:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>c,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"core-library/action-config/conditional-actions","title":"Conditional Actions","description":"Learn how to implement conditional and repeated actions using RepeatUntilConfig","source":"@site/docs/03-core-library/action-config/09-conditional-actions.md","sourceDirName":"03-core-library/action-config","slug":"/core-library/action-config/conditional-actions","permalink":"/brobot/docs/core-library/action-config/conditional-actions","draft":false,"unlisted":false,"editUrl":"https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/action-config/09-conditional-actions.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"Conditional Actions","description":"Learn how to implement conditional and repeated actions using RepeatUntilConfig"},"sidebar":"docSidebar","previous":{"title":"Complex Workflows","permalink":"/brobot/docs/core-library/action-config/complex-workflows"},"next":{"title":"Troubleshooting Action Chains","permalink":"/brobot/docs/core-library/action-config/troubleshooting-chains"}}');var o=i(74848),l=i(28453);const c={sidebar_position:9,title:"Conditional Actions",description:"Learn how to implement conditional and repeated actions using RepeatUntilConfig"},s="Conditional Actions with RepeatUntilConfig",a={},r=[{value:"Understanding RepeatUntilConfig",id:"understanding-repeatuntilconfig",level:2},{value:"Basic Click-Until Patterns",id:"basic-click-until-patterns",level:2},{value:"Click Until Image Appears",id:"click-until-image-appears",level:3},{value:"Click Until Elements Vanish",id:"click-until-elements-vanish",level:3},{value:"Advanced Patterns",id:"advanced-patterns",level:2},{value:"Multi-Step Navigation",id:"multi-step-navigation",level:3},{value:"Clearing Dynamic Lists",id:"clearing-dynamic-lists",level:3},{value:"Polling for Status Changes",id:"polling-for-status-changes",level:3},{value:"Type-Until Patterns",id:"type-until-patterns",level:2},{value:"Complex Conditional Logic",id:"complex-conditional-logic",level:2},{value:"Multiple Termination Conditions",id:"multiple-termination-conditions",level:3},{value:"Nested Conditions",id:"nested-conditions",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Set Reasonable Limits",id:"1-set-reasonable-limits",level:3},{value:"2. Add Appropriate Delays",id:"2-add-appropriate-delays",level:3},{value:"3. Choose the Right Condition",id:"3-choose-the-right-condition",level:3},{value:"4. Handle Failures Gracefully",id:"4-handle-failures-gracefully",level:3},{value:"5. Monitor Performance",id:"5-monitor-performance",level:3},{value:"Migration from ClickUntil",id:"migration-from-clickuntil",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"conditional-actions-with-repeatuntilconfig",children:"Conditional Actions with RepeatUntilConfig"})}),"\n",(0,o.jsxs)(e.p,{children:["Conditional actions are essential for robust automation. They allow your automation to adapt to different scenarios and handle dynamic UI elements. This guide focuses on using ",(0,o.jsx)(e.code,{children:"RepeatUntilConfig"}),' to implement "do-until" patterns.']}),"\n",(0,o.jsx)(e.h2,{id:"understanding-repeatuntilconfig",children:"Understanding RepeatUntilConfig"}),"\n",(0,o.jsx)(e.p,{children:"RepeatUntilConfig enables you to:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Repeat an action until a condition is met"}),"\n",(0,o.jsx)(e.li,{children:"Set maximum repetition limits to prevent infinite loops"}),"\n",(0,o.jsx)(e.li,{children:"Handle dynamic UI elements that require multiple attempts"}),"\n",(0,o.jsx)(e.li,{children:"Implement polling patterns for asynchronous operations"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"basic-click-until-patterns",children:"Basic Click-Until Patterns"}),"\n",(0,o.jsx)(e.h3,{id:"click-until-image-appears",children:"Click Until Image Appears"}),"\n",(0,o.jsx)(e.p,{children:"The most common pattern is clicking a button until something appears:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean clickUntilImageAppears(StateImage buttonToClick, StateImage imageToAppear) {\n    // Configure the click action\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions clickOptions = new ActionOptions.Builder()\n        .setAction(ActionType.CLICK)\n        .setPauseAfterEnd(0.5) // Pause between clicks\n        .build();\n    \n    // Configure the verification action\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions findOptions = new ActionOptions.Builder()\n        .setAction(ActionType.FIND)\n        .setMaxWait(2.0) // Wait up to 2 seconds for image\n        .build();\n    \n    // Build the repeat-until configuration\n    RepeatUntilConfig config = new RepeatUntilConfig.Builder()\n        .setDoAction(clickOptions)\n        .setActionObjectCollection(buttonToClick.asObjectCollection())\n        .setUntilAction(findOptions)\n        .setConditionObjectCollection(imageToAppear.asObjectCollection())\n        .setMaxActions(10) // Maximum 10 clicks\n        .build();\n    \n    // Execute using your action framework\n    return executeRepeatUntil(config);\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"click-until-elements-vanish",children:"Click Until Elements Vanish"}),"\n",(0,o.jsx)(e.p,{children:"Sometimes you need to click elements until they disappear:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean clickUntilElementsVanish(ObjectCollection elementsToClick) {\n    // Configure click action\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions clickOptions = new ActionOptions.Builder()\n        .setAction(ActionType.CLICK)\n        .setPauseAfterEnd(0.5)\n        .build();\n    \n    // Configure vanish verification\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions vanishOptions = new ActionOptions.Builder()\n        .setAction(ActionType.VANISH)\n        .setMaxWait(2.0)\n        .build();\n    \n    // Build configuration\n    RepeatUntilConfig config = new RepeatUntilConfig.Builder()\n        .setDoAction(clickOptions)\n        .setActionObjectCollection(elementsToClick)\n        .setUntilAction(vanishOptions)\n        .setConditionObjectCollection(elementsToClick) // Same elements\n        .setMaxActions(10)\n        .build();\n    \n    return executeRepeatUntil(config);\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"advanced-patterns",children:"Advanced Patterns"}),"\n",(0,o.jsx)(e.h3,{id:"multi-step-navigation",children:"Multi-Step Navigation"}),"\n",(0,o.jsx)(e.p,{children:"Click through a wizard until the finish button appears:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean clickNextUntilFinishAppears(StateImage nextButton, StateImage finishButton) {\n    // Configure with specific settings for wizard navigation\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions clickOptions = new ActionOptions.Builder()\n        .setAction(ActionType.CLICK)\n        .setPauseAfterEnd(1.0) // Longer pause for page transitions\n        .setMinSimilarity(0.8) // Higher accuracy for buttons\n        .build();\n    \n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions findOptions = new ActionOptions.Builder()\n        .setAction(ActionType.FIND)\n        .setMaxWait(3.0) // More time for page loads\n        .setMinSimilarity(0.85) // High accuracy for finish button\n        .build();\n    \n    RepeatUntilConfig config = new RepeatUntilConfig.Builder()\n        .setDoAction(clickOptions)\n        .setActionObjectCollection(nextButton.asObjectCollection())\n        .setUntilAction(findOptions)\n        .setConditionObjectCollection(finishButton.asObjectCollection())\n        .setMaxActions(10) // Reasonable limit for wizard steps\n        .build();\n    \n    return executeRepeatUntil(config);\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"clearing-dynamic-lists",children:"Clearing Dynamic Lists"}),"\n",(0,o.jsx)(e.p,{children:"Remove all items from a list by clicking delete buttons:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean clearAllItems(StateImage deleteButton) {\n    // Click delete until no more delete buttons exist\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions clickOptions = new ActionOptions.Builder()\n        .setAction(ActionType.CLICK)\n        .setPauseAfterEnd(0.3) // Quick succession\n        .build();\n    \n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions vanishOptions = new ActionOptions.Builder()\n        .setAction(ActionType.VANISH)\n        .setMaxWait(1.0) // Quick check\n        .build();\n    \n    RepeatUntilConfig config = new RepeatUntilConfig.Builder()\n        .setDoAction(clickOptions)\n        .setActionObjectCollection(deleteButton.asObjectCollection())\n        .setUntilAction(vanishOptions)\n        .setConditionObjectCollection(deleteButton.asObjectCollection())\n        .setMaxActions(50) // Higher limit for large lists\n        .build();\n    \n    return executeRepeatUntil(config);\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"polling-for-status-changes",children:"Polling for Status Changes"}),"\n",(0,o.jsx)(e.p,{children:"Wait for a process to complete by checking status:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean waitForProcessComplete(StateImage refreshButton, \n                                    StateImage completeStatus) {\n    // Click refresh until status shows complete\n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions clickOptions = new ActionOptions.Builder()\n        .setAction(ActionType.CLICK)\n        .setPauseAfterEnd(2.0) // Wait between refreshes\n        .build();\n    \n    // DEPRECATED - ActionOptions class is deprecated\n    ActionOptions findOptions = new ActionOptions.Builder()\n        .setAction(ActionType.FIND)\n        .setMaxWait(1.0) // Quick check after refresh\n        .build();\n    \n    RepeatUntilConfig config = new RepeatUntilConfig.Builder()\n        .setDoAction(clickOptions)\n        .setActionObjectCollection(refreshButton.asObjectCollection())\n        .setUntilAction(findOptions)\n        .setConditionObjectCollection(completeStatus.asObjectCollection())\n        .setMaxActions(30) // 30 * 2 seconds = 1 minute max\n        .build();\n    \n    return executeRepeatUntil(config);\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"type-until-patterns",children:"Type-Until Patterns"}),"\n",(0,o.jsx)(e.p,{children:"RepeatUntilConfig isn't limited to clicking. Here's a typing example:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean typeUntilAccepted(StateImage inputField, \n                                List<String> possibleValues,\n                                StateImage successIndicator) {\n    \n    // Try different values until one is accepted\n    for (String value : possibleValues) {\n        // DEPRECATED - ActionOptions class is deprecated\n        ActionOptions typeOptions = new ActionOptions.Builder()\n            .setAction(ActionType.TYPE)\n            .setPauseAfterEnd(0.5)\n            .build();\n        \n        // DEPRECATED - ActionOptions class is deprecated\n        ActionOptions findOptions = new ActionOptions.Builder()\n            .setAction(ActionType.FIND)\n            .setMaxWait(2.0)\n            .build();\n        \n        // Clear field first\n        clearField(inputField);\n        \n        RepeatUntilConfig config = new RepeatUntilConfig.Builder()\n            .setDoAction(typeOptions)\n            .setActionObjectCollection(\n                new ObjectCollection.Builder()\n                    .withStrings(value)\n                    .build())\n            .setUntilAction(findOptions)\n            .setConditionObjectCollection(successIndicator.asObjectCollection())\n            .setMaxActions(1) // Type once per value\n            .build();\n        \n        if (executeRepeatUntil(config)) {\n            return true; // Found acceptable value\n        }\n    }\n    return false;\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"complex-conditional-logic",children:"Complex Conditional Logic"}),"\n",(0,o.jsx)(e.h3,{id:"multiple-termination-conditions",children:"Multiple Termination Conditions"}),"\n",(0,o.jsx)(e.p,{children:"Sometimes you need to stop on different conditions:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean performUntilEitherCondition(StateImage actionTarget,\n                                         StateImage condition1,\n                                         StateImage condition2) {\n    // First try with condition1\n    RepeatUntilConfig config1 = new RepeatUntilConfig.Builder()\n        .setDoAction(createClickOptions())\n        .setActionObjectCollection(actionTarget.asObjectCollection())\n        .setUntilAction(createFindOptions())\n        .setConditionObjectCollection(condition1.asObjectCollection())\n        .setMaxActions(5)\n        .build();\n    \n    if (executeRepeatUntil(config1)) {\n        return true;\n    }\n    \n    // If not found, try with condition2\n    RepeatUntilConfig config2 = new RepeatUntilConfig.Builder()\n        .setDoAction(createClickOptions())\n        .setActionObjectCollection(actionTarget.asObjectCollection())\n        .setUntilAction(createFindOptions())\n        .setConditionObjectCollection(condition2.asObjectCollection())\n        .setMaxActions(5)\n        .build();\n    \n    return executeRepeatUntil(config2);\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"nested-conditions",children:"Nested Conditions"}),"\n",(0,o.jsx)(e.p,{children:"Handle complex scenarios with nested repeat-until patterns:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"public boolean complexConditionalWorkflow(StateImage menuButton,\n                                        StateImage submenu,\n                                        StateImage targetOption) {\n    // Keep trying to open menu until submenu appears\n    RepeatUntilConfig openMenu = new RepeatUntilConfig.Builder()\n        .setDoAction(new ActionOptions.Builder()\n            .setAction(ActionType.CLICK)\n            .setPauseAfterEnd(0.5)\n            .build())\n        .setActionObjectCollection(menuButton.asObjectCollection())\n        .setUntilAction(new ActionOptions.Builder()\n            .setAction(ActionType.FIND)\n            .build())\n        .setConditionObjectCollection(submenu.asObjectCollection())\n        .setMaxActions(3)\n        .build();\n    \n    if (!executeRepeatUntil(openMenu)) {\n        return false; // Failed to open menu\n    }\n    \n    // Menu is open, now find and click target\n    RepeatUntilConfig selectOption = new RepeatUntilConfig.Builder()\n        .setDoAction(new ActionOptions.Builder()\n            .setAction(ActionType.CLICK)\n            .build())\n        .setActionObjectCollection(targetOption.asObjectCollection())\n        .setUntilAction(new ActionOptions.Builder()\n            .setAction(ActionType.VANISH)\n            .build())\n        .setConditionObjectCollection(submenu.asObjectCollection())\n        .setMaxActions(1)\n        .build();\n    \n    return executeRepeatUntil(selectOption);\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsx)(e.h3,{id:"1-set-reasonable-limits",children:"1. Set Reasonable Limits"}),"\n",(0,o.jsxs)(e.p,{children:["Always set appropriate ",(0,o.jsx)(e.code,{children:"maxActions"})," to prevent infinite loops:"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Quick operations: 5-10 attempts"}),"\n",(0,o.jsx)(e.li,{children:"Page transitions: 10-20 attempts"}),"\n",(0,o.jsx)(e.li,{children:"Long processes: 30-60 attempts"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"2-add-appropriate-delays",children:"2. Add Appropriate Delays"}),"\n",(0,o.jsxs)(e.p,{children:["Use ",(0,o.jsx)(e.code,{children:"pauseAfterEnd"})," to give the UI time to respond:"]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Fast operations: 0.3-0.5 seconds"}),"\n",(0,o.jsx)(e.li,{children:"Normal operations: 0.5-1.0 seconds"}),"\n",(0,o.jsx)(e.li,{children:"Heavy operations: 1.0-3.0 seconds"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"3-choose-the-right-condition",children:"3. Choose the Right Condition"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Use FIND when waiting for something to appear"}),"\n",(0,o.jsx)(e.li,{children:"Use VANISH when waiting for something to disappear"}),"\n",(0,o.jsx)(e.li,{children:"Consider similarity thresholds for reliability"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"4-handle-failures-gracefully",children:"4. Handle Failures Gracefully"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:'RepeatUntilConfig config = buildConfig();\nboolean success = executeRepeatUntil(config);\n\nif (!success) {\n    // Log the failure\n    logger.warn("Failed to complete action after {} attempts", \n                config.getMaxActions());\n    \n    // Try alternative approach or fail gracefully\n    return tryAlternativeApproach();\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"5-monitor-performance",children:"5. Monitor Performance"}),"\n",(0,o.jsx)(e.p,{children:"Track how many attempts are typically needed:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:'public class MonitoredRepeatUntil {\n    public boolean execute(RepeatUntilConfig config) {\n        long startTime = System.currentTimeMillis();\n        boolean result = executeRepeatUntil(config);\n        long duration = System.currentTimeMillis() - startTime;\n        \n        logger.info("RepeatUntil completed: {} attempts, {} ms", \n                   config.getTotalSuccessfulActions(), duration);\n        \n        return result;\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"migration-from-clickuntil",children:"Migration from ClickUntil"}),"\n",(0,o.jsx)(e.p,{children:"If you're migrating from the deprecated ClickUntil class:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"// Old ClickUntil approach\nclickUntil.clickAndFind(buttonImage, targetImage);\n\n// New RepeatUntilConfig approach\nRepeatUntilConfig config = new RepeatUntilConfig.Builder()\n    .setDoAction(new ActionOptions.Builder()\n        .setAction(ActionType.CLICK)\n        .build())\n    .setActionObjectCollection(buttonImage.asObjectCollection())\n    .setUntilAction(new ActionOptions.Builder()\n        .setAction(ActionType.FIND)\n        .build())\n    .setConditionObjectCollection(targetImage.asObjectCollection())\n    .setMaxActions(10)\n    .build();\n"})}),"\n",(0,o.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["Explore ",(0,o.jsx)(e.a,{href:"/brobot/docs/core-library/action-config/form-automation",children:"Form Automation"})," for practical applications"]}),"\n",(0,o.jsxs)(e.li,{children:["Learn about ",(0,o.jsx)(e.a,{href:"/brobot/docs/core-library/action-config/reusable-patterns",children:"Reusable Patterns"})," to build your automation library"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}}}]);