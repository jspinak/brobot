"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7589],{28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>s});var r=n(96540);const t={},l=r.createContext(t);function o(e){const i=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(l.Provider,{value:i},e.children)}},76666:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>h,contentTitle:()=>s,default:()=>g,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"core-library/highlighting-feature","title":"Image Highlighting Feature","description":"Overview","source":"@site/docs/03-core-library/highlighting-feature.md","sourceDirName":"03-core-library","slug":"/core-library/highlighting-feature","permalink":"/brobot/docs/core-library/highlighting-feature","draft":false,"unlisted":false,"editUrl":"https://github.com/jspinak/brobot/edit/main/docs/docs/03-core-library/highlighting-feature.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Initial State Configuration Guide","permalink":"/brobot/docs/core-library/configuration/initial-states"},"next":{"title":"OpenCV Mock System Architecture","permalink":"/brobot/docs/core-library/opencv-mock-system/architecture"}}');var t=n(74848),l=n(28453);const o={},s="Image Highlighting Feature",h={},a=[{value:"Overview",id:"overview",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Properties Files Updated",id:"properties-files-updated",level:3},{value:"1. Main Configuration (<code>src/main/resources/application.properties</code>)",id:"1-main-configuration-srcmainresourcesapplicationproperties",level:4},{value:"2. Test Profile (<code>src/test/resources/application-highlight-test.properties</code>)",id:"2-test-profile-srctestresourcesapplication-highlight-testproperties",level:4},{value:"3. Production Profile (<code>src/main/resources/application-highlight-production.properties</code>)",id:"3-production-profile-srcmainresourcesapplication-highlight-productionproperties",level:4},{value:"Features",id:"features",level:2},{value:"1. <strong>Automatic Highlighting</strong>",id:"1-automatic-highlighting",level:3},{value:"2. <strong>Visual Indicators</strong>",id:"2-visual-indicators",level:3},{value:"3. <strong>Multiple Match Support</strong>",id:"3-multiple-match-support",level:3},{value:"4. <strong>Click Highlighting</strong>",id:"4-click-highlighting",level:3},{value:"5. <strong>Error Highlighting</strong>",id:"5-error-highlighting",level:3},{value:"6. <strong>Custom Color Per StateImage</strong> (New Feature)",id:"6-custom-color-per-stateimage-new-feature",level:3},{value:"Usage",id:"usage",level:2},{value:"Activating Highlighting",id:"activating-highlighting",level:3},{value:"Method 1: Default Configuration",id:"method-1-default-configuration",level:4},{value:"Method 2: Using Spring Profiles",id:"method-2-using-spring-profiles",level:4},{value:"Method 3: System Properties",id:"method-3-system-properties",level:4},{value:"Setting Custom Colors for StateImages",id:"setting-custom-colors-for-stateimages",level:3},{value:"Real-World Example: Claude Automator",id:"real-world-example-claude-automator",level:4},{value:"Testing Highlighting",id:"testing-highlighting",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Customization",id:"customization",level:2},{value:"Color Schemes",id:"color-schemes",level:3},{value:"Animation Settings",id:"animation-settings",level:3},{value:"Performance Tuning",id:"performance-tuning",level:3},{value:"Integration with Claude Automator",id:"integration-with-claude-automator",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Highlights Not Appearing",id:"highlights-not-appearing",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Console Output",id:"console-output",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Future Enhancements",id:"future-enhancements",level:2}];function c(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"image-highlighting-feature",children:"Image Highlighting Feature"})}),"\n",(0,t.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(i.p,{children:["Brobot includes comprehensive highlighting capabilities for found images and UI elements. When patterns are found on the screen, they can be visually highlighted to provide immediate feedback during automation. The highlighting system now supports ",(0,t.jsx)(i.strong,{children:"custom colors per StateImage"}),", allowing different UI elements to be highlighted in different colors for better visual differentiation."]}),"\n",(0,t.jsx)(i.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(i.h3,{id:"properties-files-updated",children:"Properties Files Updated"}),"\n",(0,t.jsxs)(i.h4,{id:"1-main-configuration-srcmainresourcesapplicationproperties",children:["1. Main Configuration (",(0,t.jsx)(i.code,{children:"src/main/resources/application.properties"}),")"]}),"\n",(0,t.jsx)(i.p,{children:"Enhanced highlighting properties have been added:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"# Visual feedback \r\nbrobot.highlight.enabled=true\r\nbrobot.highlight.auto-highlight-finds=true\r\n\r\n# Enhanced highlighting for found images\r\nbrobot.highlight.find.color=#00FF00\r\nbrobot.highlight.find.border-width=4\r\nbrobot.highlight.find.flash=true\r\nbrobot.highlight.find.flash-count=2\r\nbrobot.highlight.find.flash-interval=200\r\nbrobot.highlight.find.show-confidence=true\r\nbrobot.highlight.find.label.enabled=true\r\nbrobot.highlight.find.label.background=#00FF00\r\nbrobot.highlight.find.label.text-color=#FFFFFF\r\n\r\n# Highlight durations\r\nbrobot.highlight.find.duration=1.5\r\nbrobot.highlight.click.duration=0.2\r\n\r\n# Multiple match highlighting\r\nbrobot.highlight.multi-match.enabled=true\r\nbrobot.highlight.multi-match.number-matches=true\r\nbrobot.highlight.multi-match.gradient-colors=true\n"})}),"\n",(0,t.jsxs)(i.h4,{id:"2-test-profile-srctestresourcesapplication-highlight-testproperties",children:["2. Test Profile (",(0,t.jsx)(i.code,{children:"src/test/resources/application-highlight-test.properties"}),")"]}),"\n",(0,t.jsx)(i.p,{children:"Extended test configuration with additional features:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"# Find highlighting configuration\r\nbrobot.highlight.find.show-confidence=true\r\nbrobot.highlight.find.label.enabled=true\r\nbrobot.highlight.find.label.show-similarity-score=true\r\n\r\n# Multiple match highlighting\r\nbrobot.highlight.multi-match.enabled=true\r\nbrobot.highlight.multi-match.gradient-colors=true\r\n\r\n# Highlight animations\r\nbrobot.highlight.animation.enabled=true\r\nbrobot.highlight.animation.type=pulse\n"})}),"\n",(0,t.jsxs)(i.h4,{id:"3-production-profile-srcmainresourcesapplication-highlight-productionproperties",children:["3. Production Profile (",(0,t.jsx)(i.code,{children:"src/main/resources/application-highlight-production.properties"}),")"]}),"\n",(0,t.jsx)(i.p,{children:"Optimized configuration for production use:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"# Production-optimized highlighting\r\nbrobot.highlight.find.duration=1.0\r\nbrobot.highlight.find.flash-count=1\r\nbrobot.highlight.find.label.format=Match: %.2f%%\r\n\r\n# Performance optimizations\r\nbrobot.highlight.performance.use-hardware-acceleration=true\r\nbrobot.highlight.performance.batch-renders=true\r\nbrobot.highlight.performance.max-concurrent-highlights=3\n"})}),"\n",(0,t.jsx)(i.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(i.h3,{id:"1-automatic-highlighting",children:["1. ",(0,t.jsx)(i.strong,{children:"Automatic Highlighting"})]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["When ",(0,t.jsx)(i.code,{children:"brobot.highlight.auto-highlight-finds=true"}),", all successful pattern matches are automatically highlighted"]}),"\n",(0,t.jsxs)(i.li,{children:["No code changes required - works with existing ",(0,t.jsx)(i.code,{children:"action.find()"})," calls"]}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"2-visual-indicators",children:["2. ",(0,t.jsx)(i.strong,{children:"Visual Indicators"})]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Border Highlight"}),": Green border around found images"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Flash Effect"}),": Configurable flash animation to draw attention"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Confidence Labels"}),": Shows similarity score on found matches"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Color Coding"}),": Different colors for multiple matches"]}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"3-multiple-match-support",children:["3. ",(0,t.jsx)(i.strong,{children:"Multiple Match Support"})]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"When finding multiple instances, each match can be highlighted with different colors"}),"\n",(0,t.jsx)(i.li,{children:"Numbered labels help identify individual matches"}),"\n",(0,t.jsx)(i.li,{children:"Gradient color support for visual differentiation"}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"4-click-highlighting",children:["4. ",(0,t.jsx)(i.strong,{children:"Click Highlighting"})]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Yellow ripple effect at click locations"}),"\n",(0,t.jsx)(i.li,{children:"Helps verify where automation is clicking"}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"5-error-highlighting",children:["5. ",(0,t.jsx)(i.strong,{children:"Error Highlighting"})]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Red indicators for failed pattern matches"}),"\n",(0,t.jsx)(i.li,{children:"Cross-mark overlay for clear failure indication"}),"\n"]}),"\n",(0,t.jsxs)(i.h3,{id:"6-custom-color-per-stateimage-new-feature",children:["6. ",(0,t.jsx)(i.strong,{children:"Custom Color Per StateImage"})," (New Feature)"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Each StateImage can have its own highlight color"}),"\n",(0,t.jsxs)(i.li,{children:["Set via ",(0,t.jsx)(i.code,{children:"StateImage.Builder.setHighlightColor()"})]}),"\n",(0,t.jsx)(i.li,{children:"Allows visual differentiation between different UI elements"}),"\n",(0,t.jsx)(i.li,{children:"Falls back to default color if custom color is invalid"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(i.h3,{id:"activating-highlighting",children:"Activating Highlighting"}),"\n",(0,t.jsx)(i.h4,{id:"method-1-default-configuration",children:"Method 1: Default Configuration"}),"\n",(0,t.jsxs)(i.p,{children:["Highlighting is enabled by default in ",(0,t.jsx)(i.code,{children:"application.properties"}),":"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"./gradlew bootRun\n"})}),"\n",(0,t.jsx)(i.h4,{id:"method-2-using-spring-profiles",children:"Method 2: Using Spring Profiles"}),"\n",(0,t.jsx)(i.p,{children:"Activate specific highlighting profiles:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"# For testing with full highlighting features\r\n./gradlew bootRun --args='--spring.profiles.active=highlight-test'\r\n\r\n# For production with optimized highlighting\r\n./gradlew bootRun --args='--spring.profiles.active=highlight-production'\n"})}),"\n",(0,t.jsx)(i.h4,{id:"method-3-system-properties",children:"Method 3: System Properties"}),"\n",(0,t.jsx)(i.p,{children:"Override specific properties at runtime:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"./gradlew bootRun -Dbrobot.highlight.find.duration=2.0 -Dbrobot.highlight.find.color=#FF00FF\n"})}),"\n",(0,t.jsx)(i.h3,{id:"setting-custom-colors-for-stateimages",children:"Setting Custom Colors for StateImages"}),"\n",(0,t.jsx)(i.p,{children:"You can now specify custom highlight colors for individual StateImages using the builder pattern:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-java",children:'// Create a StateImage with blue highlighting\r\nStateImage iconImage = new StateImage.Builder()\r\n    .addPatterns("icon-1.png", "icon-2.png")\r\n    .setName("MyIcon")\r\n    .setHighlightColor("#0000FF")  // Blue highlight\r\n    .build();\r\n\r\n// Create a StateImage with red highlighting\r\nStateImage errorImage = new StateImage.Builder()\r\n    .addPatterns("error-indicator.png")\r\n    .setName("ErrorIndicator")\r\n    .setHighlightColor("#FF0000")  // Red highlight\r\n    .build();\r\n\r\n// Create a StateImage with default highlighting (uses global config)\r\nStateImage normalImage = new StateImage.Builder()\r\n    .addPatterns("normal-element.png")\r\n    .setName("NormalElement")\r\n    // No setHighlightColor() - uses default from properties\r\n    .build();\n'})}),"\n",(0,t.jsx)(i.h4,{id:"real-world-example-claude-automator",children:"Real-World Example: Claude Automator"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-java",children:'public class WorkingState {\r\n    private final StateImage claudeIcon;\r\n    \r\n    public WorkingState() {\r\n        claudeIcon = new StateImage.Builder()\r\n            .addPatterns("working/claude-icon-1", \r\n                        "working/claude-icon-2", \r\n                        "working/claude-icon-3", \r\n                        "working/claude-icon-4")\r\n            .setName("ClaudeIcon")\r\n            .setHighlightColor("#0000FF")  // Blue for icon\r\n            .build();\r\n    }\r\n}\r\n\r\npublic class PromptState {\r\n    private final StateImage claudePrompt;\r\n    \r\n    public PromptState() {\r\n        claudePrompt = new StateImage.Builder()\r\n            .addPatterns("prompt/claude-prompt-1",\r\n                        "prompt/claude-prompt-2",\r\n                        "prompt/claude-prompt-3")\r\n            .setName("ClaudePrompt")\r\n            // Uses default green color from properties\r\n            .build();\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(i.h3,{id:"testing-highlighting",children:"Testing Highlighting"}),"\n",(0,t.jsxs)(i.p,{children:["A comprehensive test class ",(0,t.jsx)(i.code,{children:"HighlightingTest.java"})," has been created to verify highlighting functionality:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-java",children:"// Test finds with automatic highlighting\r\naction.find(stateImage);  // Highlighting applied automatically\r\n\r\n// Test multiple matches\r\nPatternFindOptions options = new PatternFindOptions.Builder()\r\n    .setStrategy(PatternFindOptions.Strategy.ALL)\r\n    .build();\r\naction.perform(ActionType.FIND, collection, options);\n"})}),"\n",(0,t.jsx)(i.p,{children:"Run the test:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"./gradlew test --tests HighlightingTest\n"})}),"\n",(0,t.jsx)(i.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Property Loading"}),": Spring Boot loads highlighting configuration from properties files"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Aspect Integration"}),": Brobot's ",(0,t.jsx)(i.code,{children:"VisualFeedbackAspect"})," intercepts find operations"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Automatic Application"}),": When enabled, highlights are drawn around match regions"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Console Reporting"}),": Highlight events are logged for debugging"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"customization",children:"Customization"}),"\n",(0,t.jsx)(i.h3,{id:"color-schemes",children:"Color Schemes"}),"\n",(0,t.jsx)(i.p,{children:"Modify colors using hex values:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"brobot.highlight.find.color=#00FF00      # Green for finds\r\nbrobot.highlight.click.color=#FFFF00     # Yellow for clicks\r\nbrobot.highlight.error.color=#FF0000     # Red for errors\n"})}),"\n",(0,t.jsx)(i.h3,{id:"animation-settings",children:"Animation Settings"}),"\n",(0,t.jsx)(i.p,{children:"Control animation behavior:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"brobot.highlight.find.flash=true\r\nbrobot.highlight.find.flash-count=2\r\nbrobot.highlight.find.flash-interval=200  # milliseconds\n"})}),"\n",(0,t.jsx)(i.h3,{id:"performance-tuning",children:"Performance Tuning"}),"\n",(0,t.jsx)(i.p,{children:"Adjust for performance vs visibility:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"brobot.highlight.find.duration=0.5       # Shorter for less intrusion\r\nbrobot.highlight.performance.max-concurrent-highlights=3\n"})}),"\n",(0,t.jsx)(i.h2,{id:"integration-with-claude-automator",children:"Integration with Claude Automator"}),"\n",(0,t.jsx)(i.p,{children:"The highlighting feature integrates seamlessly with the Claude Automator's existing pattern matching:"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"ClaudeMonitoringAutomation"}),": Highlights prompt and icon detection"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"State Transitions"}),": Visual feedback during state changes"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Debug Mode"}),": Enhanced visibility for troubleshooting"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(i.h3,{id:"highlights-not-appearing",children:"Highlights Not Appearing"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Verify ",(0,t.jsx)(i.code,{children:"brobot.highlight.enabled=true"})]}),"\n",(0,t.jsxs)(i.li,{children:["Check ",(0,t.jsx)(i.code,{children:"brobot.highlight.auto-highlight-finds=true"})]}),"\n",(0,t.jsxs)(i.li,{children:["Ensure not in mock mode (",(0,t.jsx)(i.code,{children:"brobot.core.mock=false"}),")"]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:["Reduce ",(0,t.jsx)(i.code,{children:"brobot.highlight.find.duration"})]}),"\n",(0,t.jsxs)(i.li,{children:["Disable ",(0,t.jsx)(i.code,{children:"brobot.highlight.find.flash"})]}),"\n",(0,t.jsxs)(i.li,{children:["Set ",(0,t.jsx)(i.code,{children:"brobot.highlight.search-region.enabled=false"})]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"console-output",children:"Console Output"}),"\n",(0,t.jsx)(i.p,{children:"Enable detailed logging:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-properties",children:"logging.level.io.github.jspinak.brobot.tools.logging.visual.HighlightManager=DEBUG\r\nbrobot.console.actions.report-highlight=true\n"})}),"\n",(0,t.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(i.ol,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Development"}),": Use ",(0,t.jsx)(i.code,{children:"highlight-test"})," profile for maximum visibility"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Production"}),": Use ",(0,t.jsx)(i.code,{children:"highlight-production"})," profile for optimized performance"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Debugging"}),": Enable console reporting to track highlight events"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"CI/CD"}),": Disable highlighting in automated tests (mock mode handles this)"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,t.jsx)(i.p,{children:"Potential improvements to consider:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Screenshot capture of highlighted regions"}),"\n",(0,t.jsx)(i.li,{children:"Video recording of automation with highlights"}),"\n",(0,t.jsx)(i.li,{children:"Custom highlight shapes (circles, arrows)"}),"\n",(0,t.jsx)(i.li,{children:"Highlight persistence for analysis"}),"\n",(0,t.jsx)(i.li,{children:"Integration with debugging tools"}),"\n"]})]})}function g(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);